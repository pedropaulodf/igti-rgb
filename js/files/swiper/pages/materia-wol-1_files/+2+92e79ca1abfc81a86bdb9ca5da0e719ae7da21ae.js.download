var app;!function(e,l,r){function t(e,t,n){var i,a=n[0],o=e===s;return n[0]=function(){a&&(a.apply(l,arguments),o||(delete t[i],a=null))},i=e.apply(l,n),t[i]={args:n,created:Date.now(),cb:a,id:i},i}function n(e,t,n,i){var a,o,r=n[i];r&&(a=e===s,t(r.id),a||(o=r.args[1],t=Date.now()-r.created,r.args[1]=o=(o-=t=t<0?0:t)<0?0:o),r.args[0]=function(){r.cb&&(r.cb.apply(l,arguments),a||(delete n[i],r.cb=null))},r.created=Date.now(),r.id=e.apply(l,r.args))}var i,a,o,s,u,c;r.getElementsByClassName||(r.getElementsByClassName=function(e){var t,n,i,a=r.getElementsByTagName("*"),o=[];for(t=0,n=a.length;t<n;t++)(function(e,t){if(e)for(var n=e.split(" "),i=0;i<n.length;i++)if(n[i]===t)return 1})((i=a[t]).className,e)&&o.push(i);return o}),Modernizr.localstorage||(l.localStorage=function(){var n={};return{setItem:function(e,t){n[e]=t},getItem:function(e){return n[e]},removeItem:function(e){delete n[e]},clear:function(){n={}}}}),Array.prototype.indexOf||(Array.prototype.indexOf=e.inArray),navigator.userAgent.match(/(iPad|iPhone|iPod);.*?6_\d/i)&&(i={},a={},o=l.setTimeout,s=l.setInterval,u=l.clearTimeout,c=l.clearInterval,l.setTimeout=function(){return t(o,i,arguments)},l.setInterval=function(){return t(s,a,arguments)},l.clearTimeout=function(e){var t=i[e];t&&(delete i[e],u(t.id))},l.clearInterval=function(e){var t=a[e];t&&(delete a[e],c(t.id))},l.addEventListener("scroll",function(){for(var e in i)n(o,u,i,e);for(e in a)n(s,c,a,e)}))}(jQuery,window,document,app=app||{}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return null!==this&&null!==e&&this.slice(0,e.length)===e}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return null!==this&&null!==e&&this.slice(-e.length)===e}),"function"!=typeof String.prototype.replaceToken&&(String.prototype.replaceToken=function(e,t){if(null===this||null===e)return this;e=new RegExp("{"+e+"}","g");return this.replace(e,t)}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var o=t[a];if(e.call(i,o,a,t))return o;a++}},configurable:!0,writable:!0}),"function"!=typeof jQuery.cachedScript&&(jQuery.cachedScript=function(e,t){"use strict";return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var o=t[a];if(e.call(i,o,a,t))return a;a++}return-1}}),Math.trunc||(Math.trunc=function(e){return(e=+e)-e%1||(isFinite(e)&&0!==e?e<0?-0:0:e)}),$.settle||($.settle=function(e){"use strict";e=Array.isArray(e)?e:Array.prototype.slice.call(arguments);return $.when.apply($,e.map(function(e){return(e=!e||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.then?$.Deferred().resolve(e):e).then(function(e){return e},function(e){return $.Deferred().resolve(new Error(e.status+" "+e.statusText+"\n"+e.responseText))})})).then(function(){return Array.prototype.slice.call(arguments)})});var wolConstants={TOKENS_BibleBookName:"BibleBookName",TOKENS_BibleBookNameAndChapter:"BibleBookNameAndChapter",TOKENS_BibleChapter:"BibleChapter",TOKENS_StartingBibleChapter:"StartingBibleChapter",TOKENS_EndingBibleChapter:"EndingBibleChapter",TOKENS_BibleVerse:"BibleVerse",TOKENS_StartingBibleVerse:"StartingBibleVerse",TOKENS_EndingBibleVerse:"EndingBibleVerse",TOKENS_DateTime:"DateTime",TOKENS_LanguageCount:"LanguageCount",TOKENS_LanguageName:"LanguageName",TOKENS_LibraryName:"LibraryName",TOKENS_AlternateSuggestion:"AlternateSuggestion",TOKENS_LanguageLink:"LanguageLink",TOKENS_Link:"Link",TOKENS_URL:"URL",TOKENS_TotalLanguages:"TotalLanguages",TOKENS_PublicationSymbol:"PublicationSymbol",TOKENS_PageNumber:"PageNumber",TOKENS_StartingPageNumber:"StartingPageNumber",TOKENS_EndingPageNumber:"EndingPageNumber",TOKENS_ResultsCount:"ResultsCount",TOKENS_ResultsPageCount:"ResultsPageCount",TOKENS_ResultsPageNumber:"ResultsPageNumber",TOKENS_SearchCategory:"SearchCategory",TOKENS_Proximity:"Proximity",TOKENS_DocumentAbbreviation:"DocumentAbbreviation",QUERY_Bible:"bible",QUERY_BibleChapter:"bible-chapter",QUERY_BibleVerse:"bible-verse",QUERY_EndBibleChapter:"end-bible-chapter",QUERY_EndBibleVerse:"end-bible-verse",QUERY_Paragraph:"paragraph",QUERY_EndParagraph:"end-paragraph",QUERY_Par:"par",QUERY_Date:"date",QUERY_SEARCH_TRIGGER_FieldSubmit:"a",QUERY_SEARCH_TRIGGER_ButtonSubmit:"b",QUERY_SEARCH_TRIGGER_NavWithLink:"c",QUERY_SEARCH_TRIGGER_NavWithoutLink:"d",QUERY_SEARCH_TRIGGER_ChangeFilter:"e",QUERY_SEARCH_TRIGGER_ChangeSort:"f",QUERY_SEARCH_TRIGGER_PaginationLink:"g",SHARETYPE_Bible:"bible-chapter",SHARETYPE_Document:"document",SHARETYPE_DailyText:"daily-text"},app;!function($,window,app){"use strict";window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var isTouchDevice="ontouchend"in document,iOS=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),Android=!!navigator.userAgent.match(/Android/i),WindowsPhone=!!navigator.userAgent.match(/IEMobile|Windows Phone/i),iPadOS=!(!isTouchDevice||!navigator.userAgent.match(/(Macintosh)/i)),hasPositionFixedProblem=!!navigator.userAgent.match(/(iPad|iPhone|iPod);.*?5_\d/i),isPointerDevice=!!navigator.pointerEnabled||!!window.PointerEvent,isOldIE=function(){var e=0;if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent;if((e=null!==new RegExp("MSIE ([^;]*)").exec(t)?parseFloat(RegExp.$1):e)<9)return!0}return!1},isIEOlderThan11=function(){return-1!==navigator.userAgent.indexOf("MSIE")},isOldSafari=function(){var e=navigator.userAgent.toLowerCase();return-1<e.indexOf("safari")&&!!(-1<e.indexOf("version/7")||-1<e.indexOf("version/8"))},getUILanguage=function(){return $("#locale").val()},getRsConfigSymbol=function(){return $("#rsconf").val()},getLibrarySymbol=function(){return $("#lib").val()},getLibraryLanguageSymbol=function(){return $("#libLangSym").val()},getLibraryLanguageScript=function(){return $("#libLangScript").val()},getLibraryDir=function(){return $("#libDir").val()},isLibraryRTL=function(){return"rtl"===getLibraryDir()},getLibraryLanguageName=function(){return $("#libLang").val()},getLibraryLocale=function(){return $("#libraryLocale").val()},getLibraryTitle=function(){return $("#libTitle").val()},getLibraryIsPrivileged=function(){return $("#libIsPrivileged").val()},getContentUILanguage=function(){return $("#contentLocale").val()},getContentRsConfigSymbol=function(){return $("#contentRsconf").val()},getContentLibrarySymbol=function(){return $("#contentLib").val()},getContentLibraryLanguageSymbol=function(){return $("#contentLibLangSym").val()},getContentLibraryLanguageScript=function(){return $("#contentLibLangScript").val()},getContentLibraryDir=function(){return $("#contentLibDir").val()},isContentLibraryRTL=function(){return"rtl"===getContentLibraryDir()},isContentLibraryHTML5=function(){return 0<$(".html5").length},getScrollPositionFormatStrings=function(){return{bibleDocumentNavigationChapterManyVerseFormat:$("#bibleDocumentNavigationChapterManyVerseFormat").val(),bibleDocumentNavigationChapterVerseFormat:$("#bibleDocumentNavigationChapterVerseFormat").val(),bibleDocumentNavigationChapterVerseRangeFormat:$("#bibleDocumentNavigationChapterVerseRangeFormat").val(),bibleDocumentNavigationSingleChapterManyVerseFormat:$("#bibleDocumentNavigationSingleChapterManyVerseFormat").val(),bibleDocumentNavigationSingleChapterSingleVerseFormat:$("#bibleDocumentNavigationSingleChapterSingleVerseFormat").val(),documentNavigationMultiplePagesPositionFormat:$("#documentNavigationMultiplePagesPositionFormat").val(),documentNavigationSinglePagePositionFormat:$("#documentNavigationSinglePagePositionFormat").val()}},getCommand=function(e){return URI().segment(e?1:2)},getSelectedText=function(){try{return(window.getSelection?window:document).getSelection().getRangeAt(0)}catch(e){}},getSelectedTextContainers=function(){var e=getSelectedText(),t=e.startContainer.parentElement;""===t.id&&(t=$(t).closest("[id]")[0]);var n=e.endContainer.parentElement;""===n.id&&(n=$(n).closest("[id]")[0]);var e=$(e.commonAncestorContainer),i=e.find("[id^=v]");0===i.length&&(i=e.find("*").filter(function(){return void 0!==$(this).data("pid")}));var a=$(),o=!1;return i.each(function(e){e=i[e];e.id!==t.id||o?e.id===n.id&&o?(o=!1,a=a.add($(e))):o&&(a=a.add($(e))):(o=!0,a=a.add($(e)))}),a},getTextNodes=function(e){var i=$(),e=$(e);return 0<e.length&&function e(t){var n;if(3===t.nodeType)"\n"!==t.nodeValue&&i.push($(t));else for(n=0;n<t.childNodes.length;n++)e(t.childNodes[n])}(e[0]),i},getCharacterPosition=function(e,t){var n=e.innerHTML,i=getSelectedText(),a=$(e).lettering(),t=$(a).children()[t],t=$(t).position();$(e).innerHTML=n;n=document.createRange();return n.setStart(i.startContainer.parentNode,i.startOffset),n.setEnd(i.endContainer.parentNode,i.endOffset),t},getVerseNumberFromIDAttribute=function(e){var t=getBookNumber(),n=getChapterNumber(),n=app.utilities.isContentLibraryHTML5()?t?"v"+t+"-"+n+"-(\\d+)":"v\\d+-\\d+-(\\d+)":t?"dcv_"+n+"_(\\d+)":"dcv_\\d+_(\\d+)";return(e=(n=new RegExp(n)).exec(e))?e[1]:null},getVerseNumberObject=function(e){e=e.$items.closest("#article [id]").not("[data-pid]"),e=getAllVerseSegmentsFromIDAttribute(e.attr("id"));if(0<e.length){e=e[0];return $(e).children(".cl, .vl")}return null},getChapterNumberFromIDAttribute=function(e){e=/v\d+-(\d+)-\d+/.exec(e);return e?e[1]:null},getBookNumberFromIDAttribute=function(e){e=/v(\d+)-\d+-\d+/.exec(e);return e?e[1]:null},getAllVerseSegmentsFromIDAttribute=function(e){e=/(v\d+-\d+-\d+)/.exec(e);return e?$("#article").find("[id^="+e[1]+"-]"):$()},getParagraphIDFromIDAttribute=function(e){return Number(e.substr(1))},getParagraphById=function(e){e=parseInt(e,10);e=$("#p"+e);if(0<e.length)return e[0]},getFirstActionableIdInScope=function(e,t){var n,i=$(t[0]);return 0<t.length?(app.isBibleDocument()&&!e?0===(n=i.find("[id^=v]")).length&&0===(n=i.closest("[id]")).length&&(n=i.find("[id]").first()):0===(n=i.closest("[data-pid]")).length&&(n=i.find("[data-pid]").first()),n.attr("id")):null},isDocument=function(e){switch(getCommand(e)){case"d":case"dsync":return!0;default:return!1}},articleHasVerses=function(){var e=$(".article");return/id=\"v/.test(e.html())},getDID=function(e){return $("#docId").val()},getDocumentDescription=function(){return $("#documentDescription").val()},getDocumentDescriptionSubstitute=function(){return $("#documentDescriptionSubstitute").val()},getPubMediaServer=function(){return $("#pubMediaServer").val()||location.host},getInsightApiUrl=function(){return $("#insightApi").val()},getShareBaseUrl=function(){return $("#shareBaseUrl").val()},getShareType=function(){return $("#shareType").val()},getContentTitle=function(){return $("#contentTitle").val()},getContentParentTitle=function(){return $("#parentTitle").val()},getContentThumbnailUrl=function(){return $("#contentThumbnail").val()},getSourcePreferredBible=function(){return $("#sourcePreferredBible").val()},getPubSym=function(){return $("#englishSym").val()},getAudioPubSym=function(){return $("#audioPubSym").val()},getPubYear=function(){return $("#pubYear").val()},getLangSym=function(){return $("#langSym").val()},getIssue=function(){return $("#issue").val()},getIssueDate=function(){return $("#issueDate").val()},getIssueSymbol=function(){return $("#issueSymbol").val()},getBookNumber=function(){return $("#bookNo").val()},getChapterNumber=function(){return $("#chapNo").val()},getTodayDate=function(){return $("#todayDate").val()},getTodayWeek=function(){return $("#todayWeek").val()},getSelectedSearchCategories=function(){var e=[];return $('#searchFilterContainer input[name="fc[]"]:checked').each(function(){e.push($(this).val())}),e},isSubsetSelectedSearchCategories=function(){return 0<$('#searchFilterContainer input[name="fc[]"]:not(:checked)').length},isBibleDocument=function(e){switch(getCommand(e)){case"b":case"bsync":case"sybv":return!0;default:return!1}},isLibraryNav=function(e){switch(getCommand(e)){case"lv":case"library":return!0;default:return!1}},isBibleBookDocument=function(e){return isDocument(e)&&$(".document.bibleBook").length},isBiblePublication=function(e){return!!["nwt","nwtsty","bi7","bi10","b12","bi22","by","int","Rbi8","rh"].indexOf(getPubSym())},isBibleNav=function(e){return"binav"===getCommand(e)},isDefaultBible=function(e){return"true"===$("#isDefaultBible").val()},isPublicationNav=function(e){return"publication"===getCommand(e)},isGalleryNav=function(e){return"gallery"===getCommand(e)},isTodayPage=function(e){return"dt"===getCommand(e)},parseBibleDocumentURL=function(e){return{rsconf:$("#rsconf").val(),lib:$("#lib").val(),book:$("#bookNo").val(),chapter:$("#chapNo").val()}},parsePublicationURL=function(e){return{rsconf:$("#rsconf").val(),lib:$("#lib").val(),englishSymbol:$("#englishSym").val(),languageSymbol:$("#langSym").val()}},isSearchResultsPage=function(e){return"s"===getCommand(e)},isDocumentWithSearchHits=function(e){return!!isDocument(e)&&URI().hasQuery("q")},isDocumentWithImages=function(e){return!!isDocument(e)&&0<$(".article img").length},hasDocumentContent=function(){return 0<$(".scalableui").length},getContentAreaMargins=function(){return{marginTop:$("#regionHeader").outerHeight()||0,marginBottom:0}},transcribeUreLinks=function(e){if(e){var t=sprintf("/%s/wol/",getContentUILanguage()||getUILanguage());return e.replace(/\/wol\//g,t)}return e},roundToNearest=function(e,t){return t=1/t,Math.round(e*t)/t},roundDown=function(e,t){return t=1/t,Math.floor(e*t)/t},loadPage=function(e){e=URI(e),e=e.path()+e.search()+e.hash();window.location.href=e},loadJSFile=function(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(t)},cookiesEnabled=function(){return"cookie"in document&&(0<document.cookie.length||-1<(document.cookie="test").indexOf.call(document.cookie,"test"))},libInfoIsCurrent=function(n,e){var i=!1;return $.each(e.items,function(e,t){$.each(t.libs,function(e,t){if(t.symbol==n)return!(i=!0)})}),i},getMRULibraries=function(){var t=getRsConfigSymbol(),n=getLibrarySymbol(),e=JSON.parse(Modernizr.localstorage?window.localStorage.getItem("mru"):"{}")||[];for((e=$.grep(e,function(e){return!(e.rsconf===t&&e.lib===n)})).unshift({rsconf:t,lib:n});3<e.length;)e.pop();return Modernizr.localstorage&&window.localStorage.setItem("mru",JSON.stringify(e)),e},fontSizeManager=(pc=[.7,.78,.85,1,1.17,1.38,1.72,1.9,2.23,2.67,3.08,3.7],qc=-1,{getScale:function(){return oc(),pc[qc]},decrement:function(){return oc(),0<qc&&(--qc,!0)},increment:function(){return oc(),qc+1<pc.length&&(qc+=1,!0)},reset:function(){qc=3}}),getDefaultFontSize=function(){var e,t,n=parseInt($("body").css("font-size"),10);return e=n,Math.round(72*e/(t=$('<div style="width:1in;visible:hidden;padding:0px"></div>').appendTo("body"),e=t[0].offsetWidth,t.remove(),e))},isFeatureEnabled=function(e){return"true"===getCookie(e)},enableFeature=function(e){setCookie(e,!0)},disableFeature=function(e){setCookie(e,!1)},isFeatureSet=function(e){return void 0!==getCookie(e)},normalizeText=function(e){return isLibraryRTL()?e.replace("(","&#x200E;(").replace(")",")&#x200E;").replace(/（/,"&#x200E;（").replace(/）/,"）&#x200E;"):e},localizeNumber=function(e){var t;return t=null==(t=void 0===(t=void 0===(t="undefined"!=typeof localizedNumbers&&null!==localizedNumbers&&localizedNumbers instanceof Array?localizedNumbers[e]:t)?$("[data-no="+e+"]").data("beforeText"):t)?$(".v[id$=-"+e+"-1]").children(".vl").first().text().trim():t)||0===t.length?e:t},hasAudio=!1,isFallbackAudio=!1,shouldShowAudioPlayer=function(){var e=getCookie("audioPlayer");return!e||"true"===e},shouldContinuousPlayAudio=function(){var e=getCookie("audioContinuousPlay");return!e||"true"===e},audioPlayerSetup=!1,isIE=function(){var e=window.navigator.userAgent;return 0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")},isEdge=/Edge\/\d./i.test(navigator.userAgent),isOpera=function(){return!!(/OPR\/\d./i.test(navigator.userAgent)||/Opera\/\d./i.test(navigator.userAgent)||/Opera Mini\/\d./i.test(navigator.userAgent))},isChrome=function(){var e=window.chrome,t=window.navigator,n=t.vendor,i=-1<t.userAgent.indexOf("OPR")||-1<t.userAgent.indexOf("Opera"),a=-1<t.userAgent.indexOf("Edge");return!!t.userAgent.match("CriOS")||null!=e&&"Google Inc."===n&&!1==i&&!1==a},isJscriptGt4=eval("/*@cc_on (@_jscript_version >= 4)@*/"),isHTTPS=function(){return"https:"===location.protocol},pc,qc;function oc(){if(-1===qc){for(var e=Number.MAX_VALUE,t=(a=getCookie("fontScale"))?parseFloat(a):1,n=0;n<pc.length;n++){var i=Math.abs(t-pc[n]);if(!(i<e))break;e=i,qc=n}setCookie("fontScale",pc[qc])}var a}function isFromTouch(e){return"touch"===e.originalEvent.pointerType||void 0===e.originalEvent.pointerType&&(app.WindowsPhone||app.iOS||app.Android)}function getFirstIdMatchingVerseNumber(e){var t,n="v\\d+-\\d+-"+e+"-1",n=new RegExp(n),e=$("[id^=v]").filter(function(e,t){return n.test(t.id)});return 0<e.length&&(t=e.first().attr("id")),app.utilities.getAllVerseSegmentsFromIDAttribute(t)}function updateFontSize(e){var t=app.fontSizeManager.getScale();e&&setCookie("fontScale",t);e=parseInt(getDefaultFontSize()*t,10);$("#fontPointSize").text(e).css("font-size",100*t+"%")}function cookieDomain(){return $("#siteCookieDomain").val()}function getCookie(e){return Cookies.get(e,{domain:cookieDomain()})}function setCookie(e,t){Cookies.set(e,t,{expires:365,domain:cookieDomain()})}function removeCookie(e){Cookies.remove(e,{domain:cookieDomain()})}function trySetCookie(e,t){return!getCookie(e)&&(setCookie(e,t),!0)}function getVideoResolution(){var e=getCookie("preferredVideoResolution");return e||"720p"}function setVideoResolution(e){setCookie("preferredVideoResolution",e)}function getSearchProximity(){var e=getCookie("prox");return e||"par"}function getSearchRank(){var e=getCookie("rank");return e||"occ"}function setupAsyncPartialPageLoad(t){var n;Modernizr.history&&window.history.pushState&&(n={success:function(e){t.pageContentObject.html(e),app.menu.markButtonByLocation(),app.images.placeholders(),app.media.removeAudioSetup(),app.media.audioNavigationSetup(),app.bibleAudioCheck.checkBibleAudio(),app.share.setupShare(),app.pref.updatePreferencesRedirect(),null!=t.successCallback&&"function"==typeof t.successCallback&&t.successCallback()},error:function(e){var t=new URI(this.url).removeQuery("snip","yes");app.loadPage(t.toString())}},t.pageContentObject.off("click").on("click",t.filter,function(){var e=new URI(this.href).addQuery("snip","yes");return(isTouchDevice||isPointerDevice)&&t.pageContentObject.html('<div class="loading"><span class="icon"></span></div>'),app.web.ajax(e.toString(),n),window.history.pushState(null,null,this.href),window.scroll(0,0),app.utilities.isPublicationNav()&&(app.audioPlayerSetup=!1,app.media.audioNavigationSetup()),!1}),window.onpopstate=function(){var e;new URI(window.location.href).hasQuery("q")||(e=new URI(window.location.pathname).addQuery("snip","yes"),$.ajax(e.toString(),n))})}function isSignLanguage(){return"false"!==$("#contentLibLangIsSignLanguage").val()}function externalizeArticleLinks(){$("article").find("a").each(function(){var e,t=$(this);!t.attr("href")||(""!==(e=URI(t.attr("href")).host())&&e!==window.location.host||t.hasClass("fb"))&&(t.attr("target","_blank"),t.addClass("fb"))})}function rubyAvailable(){return"true"===$("#rubyAvailable").val()}function rubyVisible(){return 0<$(".article").find("ruby").length}function currentDocumentRubyAvailable(){return"true"===$("#hasRuby").val()}function showRubyOnForPage(){return app.isFeatureEnabled("rb")}function enableRubyDocumentMenu(){return!0}function libraryHasRubyAsync(t,n){app.web.getJSON("/wol/li").done(function(e){e=e.items.some(function(e){return e.libs.some(function(e){return t===e.symbol&&!0===e.hasRuby})});n(e)}).fail(function(e){n(!1)})}function selectText(e){var t,n;iOS||iPadOS?((t=document.createRange()).selectNodeContents(e),(n=window.getSelection()).removeAllRanges(),n.addRange(t),e.setSelectionRange(0,999999)):e.select()}function copyToClipboard(e){var t=document.createElement("textarea");t.style.cssText="position: absolute; left: -9999px; top: -9999px;",t.readOnly=!0,t.contentEditable="true",t.value=e,document.body.appendChild(t),selectText(t),document.execCommand("copy"),document.body.removeChild(t)}function copyRichText(t){var n=stripHtml(t);function e(e){e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",n),e.preventDefault()}iOS||iPadOS?copyToClipboard(n):(document.addEventListener("copy",e),copyToClipboard(n),document.removeEventListener("copy",e))}function stripHtml(e){e=e.replace(/<rt>.*?<\/rt>/g,"");var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}function getVideoPlayerHeight(){return $("#regionMain.hasVideoPlayer #videoWrapper").height()||0}function leftPad(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function getWeekNumber(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),t=Math.ceil(((e-t)/864e5+1)/7);return[e.getUTCFullYear(),t]}function getDateString(e){return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)}app.isTouchDevice=isTouchDevice,app.isPointerDevice=isPointerDevice,app.isOldIE=isOldIE,app.isIEOlderThan11=isIEOlderThan11,app.iOS=iOS,app.Android=Android,app.WindowsPhone=WindowsPhone,app.iPadOS=iPadOS,app.hasPositionFixedProblem=hasPositionFixedProblem,app.getUILanguage=getUILanguage,app.getRsConfigSymbol=getRsConfigSymbol,app.getLibrarySymbol=getLibrarySymbol,app.getLibraryLanguageSymbol=getLibraryLanguageSymbol,app.getLibraryLanguageScript=getLibraryLanguageScript,app.getLibraryDir=getLibraryDir,app.isLibraryRTL=isLibraryRTL,app.getLibraryLanguageName=getLibraryLanguageName,app.getLibraryLocale=getLibraryLocale,app.getLibraryTitle=getLibraryTitle,app.getLibraryIsPrivileged=getLibraryIsPrivileged,app.getContentUILanguage=getContentUILanguage,app.getContentRsConfigSymbol=getContentRsConfigSymbol,app.getContentLibrarySymbol=getContentLibrarySymbol,app.getContentLibraryLanguageSymbol=getContentLibraryLanguageSymbol,app.getContentLibraryLanguageScript=getContentLibraryLanguageScript,app.getContentLibraryDir=getContentLibraryDir,app.isContentLibraryRTL=isContentLibraryRTL,app.getCommand=getCommand,app.getVerseNumberFromIDAttribute=getVerseNumberFromIDAttribute,app.getChapterNumberFromIDAttribute=getChapterNumberFromIDAttribute,app.getBookNumberFromIDAttribute=getBookNumberFromIDAttribute,app.getParagraphIDFromIDAttribute=getParagraphIDFromIDAttribute,app.isDocument=isDocument,app.getDID=getDID,app.getDocumentDescription=getDocumentDescription,app.isBibleDocument=isBibleDocument,app.isBibleBookDocument=isBibleBookDocument,app.isBiblePublication=isBiblePublication,app.isSearchResultsPage=isSearchResultsPage,app.isDocumentWithSearchHits=isDocumentWithSearchHits,app.isDocumentWithImages=isDocumentWithImages,app.parseBibleDocumentURL=parseBibleDocumentURL,app.parsePublicationURL=parsePublicationURL,app.hasDocumentContent=hasDocumentContent,app.transcribeUreLinks=transcribeUreLinks,app.loadPage=loadPage,app.cookiesEnabled=cookiesEnabled,app.getMRULibraries=getMRULibraries,app.fontSizeManager=fontSizeManager,app.normalizeText=normalizeText,app.isFeatureEnabled=isFeatureEnabled,app.enableFeature=enableFeature,app.disableFeature=disableFeature,app.isFeatureSet=isFeatureSet,app.hasAudio=hasAudio,app.audioPlayerVisible=shouldShowAudioPlayer(),app.audioPlayerSetup=audioPlayerSetup,app.isFallbackAudio=isFallbackAudio,app.isIE=isIE,app.isEdge=isEdge,app.isChrome=isChrome,app.isOpera=isOpera,app.isJscriptGt4=isJscriptGt4,app.isHTTPS=isHTTPS,app.pubMediaServer=getPubMediaServer,app.getPubSym=getPubSym,app.getAudioPubSym=getAudioPubSym,app.getLangSym=getLangSym,app.getPubYear=getPubYear,app.getIssue=getIssue,app.getIssueDate=getIssueDate,app.getIssueSymbol=getIssueSymbol,app.getDocumentDescriptionSubstitute=getDocumentDescriptionSubstitute,app.getBookNumber=getBookNumber,app.getChapterNumber=getChapterNumber,app.getTodayDate=getTodayDate,app.getTodayWeek=getTodayWeek,app.getShareBaseUrl=getShareBaseUrl,app.getShareType=getShareType,app.getContentTitle=getContentTitle,app.getContentParentTitle=getContentParentTitle,app.getContentThumbnailUrl=getContentThumbnailUrl,app.getSourcePreferredBible=getSourcePreferredBible,app.localizeNumber=localizeNumber,app.lastClickEvent=null,app.getInsightApiUrl=getInsightApiUrl,app.getSelectedSearchCategories=getSelectedSearchCategories,app.isSubsetSelectedSearchCategories=isSubsetSelectedSearchCategories,app.utilities={isOldSafari:isOldSafari,getScrollPositionFormatStrings:getScrollPositionFormatStrings,getAllVerseSegmentsFromIDAttribute:getAllVerseSegmentsFromIDAttribute,getSelectedText:getSelectedText,getSelectedTextContainers:getSelectedTextContainers,getCharacterPosition:getCharacterPosition,getTextNodes:getTextNodes,getParagraphById:getParagraphById,updateFontSize:updateFontSize,articleHasVerses:articleHasVerses,getContentAreaMargins:getContentAreaMargins,loadJSFile:loadJSFile,isContentLibraryHTML5:isContentLibraryHTML5,roundToNearest:roundToNearest,roundDown:roundDown,getVerseNumberObject:getVerseNumberObject,isFromTouch:isFromTouch,isBibleNav:isBibleNav,isDefaultBible:isDefaultBible,isPublicationNav:isPublicationNav,isLibraryNav:isLibraryNav,isGalleryNav:isGalleryNav,isTodayPage:isTodayPage,getFirstActionableIdInScope:getFirstActionableIdInScope,audioContinuousPlayEnabled:shouldContinuousPlayAudio(),getFirstIdMatchingVerseNumber:getFirstIdMatchingVerseNumber,trySetCookie:trySetCookie,getSearchProximity:getSearchProximity,getSearchRank:getSearchRank,getVideoResolution:getVideoResolution,setVideoResolution:setVideoResolution,getCookie:getCookie,setCookie:setCookie,removeCookie:removeCookie,setupAsyncPartialPageLoad:setupAsyncPartialPageLoad,isSignLanguage:isSignLanguage,externalizeLinks:externalizeArticleLinks,rubyAvailable:rubyAvailable,rubyVisible:rubyVisible,currentDocumentRubyAvailable:currentDocumentRubyAvailable,enableRubyDocumentMenu:enableRubyDocumentMenu,showRubyOnForPage:showRubyOnForPage,libraryHasRubyAsync:libraryHasRubyAsync,copyToClipboard:copyToClipboard,copyRichText:copyRichText,stripHtml:stripHtml,getVideoPlayerHeight:getVideoPlayerHeight,leftPad:leftPad,getWeekNumber:getWeekNumber,getDateString:getDateString}}(jQuery,window,app=app||{}),function(t){t.fn.pointLink=function(a,o){var r=null;function n(e){var t,n,i=this.href||e.target.href||e.currentTarget.href;return!o(i)||(e._clickorhoverlink_FromTouch=r,a(i,(n=t=0,(i=!(i=e).clientX||!i.clientY?i.originalEvent:i).pageX||i.pageY?(t=i.pageX,n=i.pageY):(i.clientX||i.clientY)&&(t=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=i.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}),e),!1)}var e=t(this).find('a:not([role="navigation"] a, .selectionList a, .noTooltips a, a.noTooltips, .itemCaption a, .search a, .topic a, .caption a, a.galleryItem, .docNav a, a.fb)');return e.on("touchstart",function(e){null==r&&(r=!0)}),e.on("pointerover",function(e){var t;return t=e,!!(r=r||"touch"===t.originalEvent.pointerType||"pen"===t.originalEvent.pointerType)||n(e)}),e.on("pointerup",function(e){return!r||n(e)}),e.on("pointercancel",function(e){return!(r=!1)}),e.on("click",function(e){e=this.href||e.target.href||e.currentTarget.href;return!o(e)||!r}),this}}(jQuery),function(h){h.fn.insertTag=function(s,u,c,d,p){function g(e){return h.support.leadingWhitespace?e:e.replace(/^ /,"&#xA0;")}var e,i,m=(e=this,i=h(),0<(e=h(e)).length&&function e(t){var n;if(3===t.nodeType)"\n"!==t.nodeValue&&i.push(t);else for(n=0;n<t.childNodes.length;n++)e(t.childNodes[n])}(e[0]),i);return function(){for(var e,t,n,i,a,o=m.length,r=0,l=0;l<o;l++){if(i=(e=h(m[l])).text(),t=s-r,s<r+i.length){u<r+i.length?i===i.substr(t,(n=u-r)-t)&&i.length===e.parent().text().length?e.parent().addClass(p):(a=g(i.substr(0,t)),a+=c,a+=g(i.substr(t,n-t)),a+=d,a+=g(i.substr(n)),e.replaceWith(a)):i===i.substr(t)&&i.length===e.parent().text().length?e.parent().addClass(p):(a=g(i.substr(0,t)),a+=c,a+=g(i.substr(t)),a+=d,e.replaceWith(a)),r+=i.length,l++;break}r+=i.length}for(;l<o;l++)if(i=(e=h(m[l])).text(),r<u){if(u<r+i.length){if(i===i.substr(0,n)&&i.length===e.parent().text().length){e.parent().addClass(p);break}a=c,a+=g(i.substr(0,n=u-r)),a+=d,a+=g(i.substr(n)),e.replaceWith(a);break}i===e.parent().text()?e.parent().addClass(p):(a=c,a+=g(i),a+=d,e.replaceWith(a)),r+=i.length}}(),this}}(jQuery),function(a){a.fn.jumpTo=function(e,t){if(e=a.extend({marginTop:0,marginBottom:0,positionRatio:.05},e),0<this.length){var n,i=a(this),e=(a(window).height()-e.marginTop-e.marginBottom)*e.positionRatio+e.marginTop;return i.is(":visible")?n=i.offset().top:(i.removeClass("hidden").show(),n=i.offset().top,i.css("display","")),a("html, body").animate({scrollTop:n-(a("#regionMain").offset().top+e)},"fast",function(){var e=a.Event("jumptoend");a(document).trigger(e)}),!0}return!1}}(jQuery),function(d){"use strict";Modernizr.touchevents;var e,p=!1;(e=navigator.userAgent.match(/(?:iPad|iPhone|iPod);.*?OS (\d+)_/i))&&(e=Number(e[1]),p=e<=5);function n(e){return"MSPointerDown"===e.type||"MSPointerUp"===e.type||"MSPointerMove"===e.type||"pointerdown"===e.type||"pointerup"===e.type||"pointermove"===e.type}function g(e){var t;return n(e)?(t=e.target.parentNode.offsetLeft,e.originalEvent.clientX-t):(t=e.target.parentNode.offsetLeft,e.originalEvent.touches&&0<e.originalEvent.touches.length?e.originalEvent.touches[0].pageX-window.scrollX-t:e.originalEvent.changedTouches[0].pageX-window.scrollX-t)}function m(e){var t;return n(e)?(t=e.target.parentNode.offsetTop,e.originalEvent.clientY-t):(t=e.target.parentNode.offsetTop,e.originalEvent.touches&&0<e.originalEvent.touches.length?e.originalEvent.touches[0].pageY-window.scrollY-t:e.originalEvent.changedTouches[0].pageY-window.scrollY-t)}d.fn.singleclickortap=function(){var e,t,i,n=0;"string"==typeof arguments[n]&&(e=arguments[n],n++),"function"==typeof arguments[n+1]&&(t=arguments[n],n++),"function"==typeof arguments[n]&&(i=arguments[n],n++),"object"==typeof arguments[n]&&(c=arguments[n],n++);var a,o,r,l,s,u,c=d.extend({hasTimeout:!0,acceptableClickRange:20},c);return p?this.on("click",e,t,i):app.isPointerDevice?(a=!1,o=null,this.on("pointerdown",e,t,function(e){a=!1,window.clearTimeout(o),o=setTimeout(function(){a=!0,o=null},1e3),r=g(e),l=m(e)}).on("pointerup",e,t,function(e){window.clearTimeout(o),o=null;var t=g(e),n=m(e),t=Math.abs(t-r),n=Math.abs(n-l);!a&&t<c.acceptableClickRange&&n<c.acceptableClickRange&&i(e)})):(s=0,this.on("mousedown",e,t,function(e){u=e}).on("click",e,t,function(e){var t,n;u=u||e,1===++s&&(t=Math.abs(e.clientX-u.clientX),n=Math.abs(e.clientY-u.clientY),c.hasTimeout?setTimeout(function(){1===s&&t<c.acceptableClickRange&&n<c.acceptableClickRange&&i(e),s=0},300):(1===s&&t<c.acceptableClickRange&&n<c.acceptableClickRange&&i(e),s=0))})),this}}(jQuery),function(u,c){"use strict";var a=250,o=3e3,r=null,i=[],l={},d={fetchOptions:{credentials:"include"}},p=MediaPlayer.playlists.BasePlaylist.extend({init:function(e,t){this._playlist=e,this._segments=t},_loadItemsImpl:function(){return Promise.resolve(this._playlist._items)},getItemAt:function(e){var t,n=this._segments[e];return n&&(t=this._playlist.getItemAt(n.index))?(t.segment=n,t.setSegmentStartEnd=this.setSegmentStartEnd.bind(this,e),t):null},getNumberOfItems:function(){return this._segments.length},setSegments:function(e){this._segments=e},setSegmentStartEnd:function(e,t,n){isNaN(t)&&(t=0),this._segments[e].start=t,isNaN(n)&&(n=Number.MAX_VALUE),this._segments[e].end=n}}),g=MediaPlayer.behaviors.BaseBehavior.extend({bind:function(e){e._playedIndexes=[],this._boundItemChangedHandler=this._useItemSegmentIfExists.bind(this,e),e.on("currentItemChanged",this._boundItemChangedHandler)},respondToOutOfBoundsQueueItemRequest:function(e,t,n){return e.pause(),0},unbind:function(e){e.off("currentItemChanged",this._boundItemChangedHandler)},_boundItemChangedHandler:null,_useItemSegmentIfExists:function(n,e){function t(e,t){t&&t.segment?t.segment.inSegment&&e>=t.segment.end?(t.segment.playNextItem?n.nextItem():(n.pause(),i()),t.setSegmentStartEnd()):t.segment.start<=e&&e<=t.segment.end&&(t.segment.inSegment=!0):i()}function i(){n.off("timeChanged",t),n.off("seekStarted",i),n.off("currentItemChanged",i)}e&&e.segment&&(0!==e.segment.start||e.segment.end!==Number.MAX_VALUE)&&n.once("timeChanged",function(){e.segment&&(n.on("timeChanged",t),n.once("seekStarted",function(){n.once("seekStarted",i)}),n.once("currentItemChanged",i),n.seek(e.segment.start))})}});function s(e,t,n,i){var a=e.getPlaylist();return null!=a.getItemAt(t)&&(a=new p(a,[{index:t,start:n,end:i,playNextItem:!1}])),e.changePlaylistSynchronously(a)}function n(e){var t,n,i,a=Math.floor(e/3600),o=Math.floor((e-3600*a)/60),e=e-3600*a-60*o;return((t=a<10?"0"+a:t)||a)+":"+((n=o<10?"0"+o:n)||o)+":"+((i=e<10?"0"+e:i)||e)}function m(e){e=e.split(":");var t=parseInt(e[0],10),n=parseInt(e[1],10),e=parseFloat(e[2]);return 3600*t+60*n+Math.trunc(1e3*e)/1e3}function h(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function f(i,e,a){var t=i.data("jsonSrc"),o=i.data("imgSrc");a&&a.forEach(function(e){e.duration=n(e.duration),e.startTime=n(e.startTime)});var r=new MediaPlayer.playlists.PubMedia(t,d);return r.loadItems().then(function(e){e.forEach(function(e){null!=o&&e.setPosterURL(o),null!=a&&e.setMarkers(a)});var t=MediaPlayer.builderFor("video").setPlaylist(r).addBehavior(new g).setSourceSelectionFn(function(e){var t=c.utilities.getVideoResolution();return e.find(function(e){return e.getResolution()===parseInt(t,10)})}),t=(t=null!=o?t.setDefaultPoster(o):t).build(i.get(0)),n=u.Deferred();return t.once("ready",function(){n.resolve(t)}),n}).then(function(e){return e.getImplementation().on("qualitySelected",function(e,t){c.utilities.setVideoResolution(t.label)}),y(e),e}).catch(function(e){C(i)})}function e(n){n="object"==typeof n?n.getDOMElement().id:n,Object.keys(i).forEach(function(e){var t=i[e];u.contains(document,t.getDOMElement())&&(null==n||t.getDOMElement().id!==n)||(t.destroy(),delete i[e])}),i=i.filter(function(e){return e})}function y(t){e(),t&&(t.on("itemPlaying",function(){i.forEach(function(e){e!==t&&e.pause()})}),i.push(t))}function b(e,t,n,i){var a,o;(i=i&&c.utilities.isSignLanguage())?(a=e,o=t,i=n,c.utilities.isSignLanguage()&&a.setMuted(!0),s(a,0,o,i).playItemAt(0)):s(e,0,t,n)}function v(e,t){var n=(n=t.map(function(e,t){if(c.isBibleDocument())return u(t).find("[id^=v]").addBack("[id^=v]").map(function(e,t){t=u(t).attr("id");return c.getVerseNumberFromIDAttribute(t)}).get();t=c.utilities.getFirstActionableIdInScope(!1,[t]);return c.getParagraphIDFromIDAttribute(t)}).get()).filter(function(e,t){return this.indexOf(e)===t},n),i=[];n.forEach(function(e){null!=l[e]&&i.push(l[e])}),0<i.length?(i.sort(function(e,t){return parseFloat(e.startTime)-parseFloat(t.startTime)}),b(e,m(i[0].startTime),m((e=i[i.length-1]).startTime)+m(e.duration),!0)):0<t.length&&null!=r&&u(r.getDOMElement()).parent().find(".noMarkerNotice").hide().removeClass("hidden").fadeIn(a).delay(o/2).fadeOut(o/2)}function C(e){u(e.selector).hide().parent().find(".videoErrorNotice").hide().removeClass("hidden").fadeIn(a)}function w(e){var t;e.hasClass("constrainedHeight")?e.css("height","100%"):(t=parseInt(e.width(),10),t=Math.ceil(9*t/16),t+=e.innerHeight()-e.height(),e.css("height",t+"px"),e.trigger("videoResize"))}function S(){var e;return null==r||0<(e=u(this).closest("[id^=v]")).length&&(e=e.attr("id"),e=c.utilities.getAllVerseSegmentsFromIDAttribute(e),r.pause(),v(r,e)),!1}c.video={setupVideoPlaceHolder:function(){var e=u("#article"),t=e.find("video");t.each(function(e,t){var n=u(t.outerHTML.replace(/^<video/,"<div").replace(/video>$/,"div>")).addClass("videoContainer");u(t).after(n)}),t.remove(),e.find(".videoContainer").each(function(e,t){t=u(t).addClass("videoPlayerHolder").addClass("placeholder");w(t),w(t)})},setupEmbeddedVideoPlayer:function(e){u(e).find(".videoContainer").each(function(e){var i=this,t=u(this);w(t),f(t).then(function(){var t,n="resize orientationchange";u(window).on(n,function e(){clearTimeout(t),u.contains(document,i)?t=setTimeout(function(){w(u(i))},100):u(window).off(n,e)})})}).removeClass("videoContainer")},destroyPlayers:e,setupSharedPlayer:function(){var e,t,n,i=u("#videoUrl");0<i.length&&(e=u("#videoWrapper"),t=i.data("jsonSrc"),n=i.data("imgSrc"),""!==t&&(u("#regionHeader, #regionMain").addClass("hasVideoPlayer"),(i=e.find("#playerShared")).data("jsonSrc",t).data("imgSrc",n).addClass("videoPlayerHolder").addClass("placeholder").addClass("constrainedHeight"),0<(n=u("#videoMarkers")).length&&(l=n.data("jsonMarkers")),e.hide().removeClass("hidden").fadeIn(a),f(i,0,_.values(l)).then(function(t){if(null!=t){t.on("timeChanged",function(e,t,n){n&&.1<e&&c.mediaMarker.updateVideoPosition(n)}).on("markerStarted",function(e){0<e.startTimeInSeconds&&c.mediaMarker.updateVideoPosition(e);setTimeout(function(){t.isPlaying()||c.mediaMarker.clearMarkers()},1e3)}).on("playbackPaused",function(){c.mediaMarker.clearMarkers()}),u(document).on("texthighlighted",function(e){t.pause(),c.mediaMarker.autoScrollEnabled=!0,v(t,e.$items)}),u(document).on("textunhighlighted",function(){t.pause()});var e=c.highlightManager.getHighlightedElements();return v(t,e),u("#article.bible").find(".cl, .vl").on("click",S),w(u("#playerShared")),r=t}})))},setupTooltipPlayer:function e(t,n,i,a){var o,r,l,s;1<u("[id="+t+"]").length?setTimeout(function(){e(t,n,i,a)},10):(w(o=u("#"+t)),0!==(r=o.data("playlist")).length&&(l=r.map(function(e){var t,e=new MediaPlayer.playlists.PubMedia(h(e.jsonSrc),d);return e=e.loadItems(),t=u.Deferred(),e.then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t}),null!=(s=r.find(function(e){return!!e.imgSrc}))&&(s=h(s)),u.when.apply(u,l).then(function(){var e=[].slice.call(arguments),e=[].concat.apply([],e);return new MediaPlayer.playlists.BasePlaylist(e,d)},function(e){C(o)}).then(function(n){(r=r.map(function(e,t){return{index:t,start:e.startTime,end:e.startTime+e.duration,playNextItem:!0}}))[r.length-1].playNextItem=!1,(n=new p(n,r)).loadItems().then(function(){var e=MediaPlayer.builderFor("video").setPlaylist(n).addBehavior(new g).setSourceSelectionFn(function(e){return e.sort(function(e,t){return e.getResolution()>t.getResolution()})[0]}),e=(e=null!=s?e.setDefaultPoster(s):e).build(o.get(0)),t=u.Deferred();return e.once("ready",function(){t.resolve(e)}),t}).then(function(e){return y(e),a&&(c.utilities.isSignLanguage()&&e.setMuted(!0),e.play()),e}).catch(function(e){C(o)})},function(e){C(o)})))},findPlayingPlayers:function(t){return t=u(t=t||"body"),i.filter(function(e){return e.isPlaying()&&t.find(e.getDOMElement())})},timeChangeDebounceTime:.1}}(jQuery,app),function(u){u.fn.wolTooltip=function(e,t,n,r){r=u.extend({},r);var l,i=u(this),s=u("<div/>").addClass(n).attr("dir",r.rtl?"rtl":"ltr"),n=navigator.pointerEnabled;navigator.userAgent.match(/(iPad|iPhone|iPod);/i);(navigator.userAgent.match(/IEMobile/)||navigator.userAgent.match(/Trident/)&&n)&&(s.css("overflow-y","auto"),u(document).css("overflow-y","auto")),u(".tooltip").each(function(){u(this).hide().find(".closeBtn").trigger("click")}),l=s.append(i).window({complete:function(){u(r.target).off(".tooltip"),l=void 0,r.complete&&r.complete()},rendered:function(){app.images.placeholders();var e=u(".tooltipContainer");app.video.setupEmbeddedVideoPlayer(e),u(i).find("a.galleryItem").on("click",function(e){e.preventDefault(),i.find(".closeBtn").trigger("click"),app.gallery.handleGalleryItem.call(this,e)})},css:{top:t,left:e},modal:!1,rtl:r.rtl,parent:u(r.target).closest("#regionMain")}),s.on("mouseenter",function(e){s.on("wheel",function(e,t){var n=u(this);return!(0<t&&n.prop("scrollTop")<=0)&&(!(t<0&&n.prop("scrollTop")+n.prop("offsetHeight")>=n.prop("scrollHeight"))&&void 0)})}),l.form.find(".closeBtn").on("click",function(){l&&l.close()});e="scroll.tooltip pointermove.tooltip pointerenter.tooltip pointerdown.tooltip pointerover.tooltip wheel.tooltip";return u(r.target).on(e,function(e){e.stopPropagation()}),s.on(e,function(e){e.stopPropagation()}),u(document).on("scroll.tooltip mousewheel.tooltip pointermove.tooltip pointerdown.tooltip",function(e){var t=e.originalEvent&&e.originalEvent.pointerType&&"mouse"===e.originalEvent.pointerType,n="scroll"===e.type,i="pointerdown"===e.type,a="pointermove"===e.type,o=t&&a||n||!t&&!a||i;l&&o?setTimeout(function(){var e=u(r.target).is(":hover")||s.is(":hover");l&&(o&&(!e&&t||n&&!e&&t||!t&&!n||i))&&(0<app.video.findPlayingPlayers(l.form).length&&a||l.close())},500):0===u(".tooltip").length&&u(document).off(".tooltip")}),this}}(jQuery),function(m,h){"use strict";h.typingSuggestionList={typingSuggestionList:function(n,a,o,r,l){var s,u,c,d=0,p=m("<div/>");function i(){r.fadeOut(function(){c=u=s=void 0,l.hideComplete()})}function g(e){var t,i;m.trim(e).length&&(i=++d,(t=e)&&h.web.getNoSessionDialogJSON(n(t)).done(function(e){var n;i<d||0===e.items.length||(s=e.items,u=-1,c=t,n="<ul>",m.each(s,function(e,t){this.label?n+='<li data-index="'+e+'">'+this.caption+' <span class="caption">'+this.label+"</span></li>":n+='<li data-index="'+e+'">'+this.caption+"</li>"}),p.html(n+="</ul>"),p.find("li").on("click",function(){location.href=a(s[m(this).data("index")])}),p.find("li").on("mouseenter",function(){var e=p.find("li");e.removeClass("sgSel"),u=e.index(this),m(this).addClass("sgSel")}),e=o[0].getBoundingClientRect(),r.css({width:o.innerWidth(),left:e.left,top:e.top+o.height()}),r.removeClass("hidden").show(),l.showComplete())}))}function t(e){var t=o.val();0===t.length||-1!==o.val().indexOf(";")?i():9!==(e=e)&&13!==e&&27!==e&&37!==e&&38!==e&&39!==e&&40!==e&&g(t)}return l=m.extend({showComplete:function(){},hideComplete:function(){}},l),r.append(p),o.on("keydown",function(e){return 13!==(e=e.keyCode)?27===e?(s?(o.val(c),i()):o.val(""),!1):9===e||38===e||40===e?!s||(-1<u&&p.find("li").eq(u).removeClass("sgSel"),38===e?-1===u?u=s.length-1:--u:9!==e&&40!==e||(u===s.length-1?u=-1:u+=1),-1===u?o.val(c):(p.find("li").eq(u).addClass("sgSel"),o.val(s[u].query)),!1):void 0:s&&-1!==u?(p.find("li").eq(u).trigger("click"),!1):void 0}).on("keyup",function(e){t(e.keyCode)}).on("blur",function(){i()}),o}}}(jQuery,app),function(h){h.fn.window=function(i){var a,e,t,o=h(window).height(),n=h(window).width(),r=h(document).scrollLeft(),l=h(document).scrollTop(),s=h(document).height(),u=h(document).width();function c(){o=h(window).height(),n=h(window).width(),r=h(document).scrollLeft(),l=h(document).scrollTop(),s=h(document).height(),u=h(document).width()}function d(){a.fadeOut({duration:"fast",always:function(){a.remove(),a=void 0}}),i.modal&&e.fadeOut({duration:"fast",always:function(){e.remove(),e=void 0}}),h(document).off("keyup",t),i.complete()}function p(){var e=a;if(i.css.top){var t=o/2+l,n=l+o;if(i.css.top+e.outerHeight()<n)return i.css.top+i.offset;if(i.css.top-e.outerHeight()>l)return i.css.top-e.outerHeight()-i.offset;n=o/2-2*i.offset;return e.children().first().height(n),t>i.css.top?i.css.top+i.offset:i.css.top-n-i.offset}return l+o/2-e.outerHeight()/2}function g(){return i.css.left?i.rtl?i.css.left-a.outerWidth()<r?r:i.css.left-a.outerWidth():i.css.left+a.outerWidth()+i.offset>r+n?r+n-a.outerWidth()-i.offset:i.css.left+i.offset:r+n/2-a.outerWidth()/2}(i=h.extend({ok:function(){return!0},css:{},init:function(){},complete:function(){},rendered:function(){},offset:12,modal:!0,modalTransparency:.2,rtl:!(t=function(e){(27===e.keyCode||13===e.keyCode&&i.ok())&&d()})},i)).css=h.extend({width:"auto",height:"auto"},i.css),this.css(i.css),a=this.wrapAll("<div/>").parent().wrapAll('<div class="tooltipContainer" />').parent().css({position:"absolute","z-index":999,overflow:"visible",height:"auto"}),i.modal&&(e=h("<div/>").css({position:"absolute","z-index":998,height:s,width:u,top:0,left:0,background:"black"}).on("touchstart touchmove touchend MSPointerDown MSPointerMove MSPointerUp",function(e){e.stopPropagation()}).on("click",function(e){d()})),h(document).on("keyup",t),h(window).on("resize",function(){c(),a&&a.css({top:p(),left:g()}),e&&e.css({height:s,width:u,top:0,left:0}),i.rendered()});var m=h("body");return i.parent&&(m=h(i.parent)),i.modal&&e.appendTo(m).fadeTo(0,i.modalTransparency),c(),a.appendTo(m).css({top:p(),left:g()}).fadeIn("fast",i.init),i.rendered(),{close:d,form:a}}}(jQuery),function(){"use strict";var t=0,o={};function n(e){if(!e)throw new Error("No options passed to Waypoint constructor");if(!e.element)throw new Error("No element option passed to Waypoint constructor");if(!e.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=n.Adapter.extend({},n.defaults,e),this.element=this.options.element,this.adapter=new n.Adapter(this.element),this.callback=e.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=n.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=n.Context.findOrCreateByElement(this.options.context),n.offsetAliases[this.options.offset]&&(this.options.offset=n.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),o[this.key]=this,t+=1}n.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},n.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},n.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete o[this.key]},n.prototype.disable=function(){return this.enabled=!1,this},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},n.prototype.next=function(){return this.group.next(this)},n.prototype.previous=function(){return this.group.previous(this)},n.invokeAll=function(e){var t,n=[];for(t in o)n.push(o[t]);for(var i=0,a=n.length;i<a;i++)n[i][e]()},n.destroyAll=function(){n.invokeAll("destroy")},n.disableAll=function(){n.invokeAll("disable")},n.enableAll=function(){for(var e in n.Context.refreshAll(),o)o[e].enabled=!0;return this},n.refreshAll=function(){n.Context.refreshAll()},n.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},n.viewportWidth=function(){return document.documentElement.clientWidth},n.adapters=[],n.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},n.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=n}(),function(){"use strict";function t(e){window.setTimeout(e,1e3/60)}var n=0,i={},g=window.Waypoint,e=window.onload;function a(e){this.element=e,this.Adapter=g.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,n+=1,g.windowContext||(g.windowContext=!0,g.windowContext=new a(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}a.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},a.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical),n=this.element==this.element.window;e&&t&&!n&&(this.adapter.off(".waypoints"),delete i[this.key])},a.prototype.createThrottledResizeHandler=function(){var e=this;function t(){e.handleResize(),e.didResize=!1}this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,g.requestAnimationFrame(t))})},a.prototype.createThrottledScrollHandler=function(){var e=this;function t(){e.handleScroll(),e.didScroll=!1}this.adapter.on("scroll.waypoints",function(){e.didScroll&&!g.isTouch||(e.didScroll=!0,g.requestAnimationFrame(t))})},a.prototype.handleResize=function(){g.Context.refreshAll()},a.prototype.handleScroll=function(){var e,t,n={},i={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(e in i){var a,o=i[e],r=o.newScroll>o.oldScroll?o.forward:o.backward;for(a in this.waypoints[e]){var l,s,u=this.waypoints[e][a];null!==u.triggerPoint&&(l=o.oldScroll<u.triggerPoint,s=o.newScroll>=u.triggerPoint,(l&&s||!l&&!s)&&(u.queueTrigger(r),n[u.group.id]=u.group))}}for(t in n)n[t].flushTriggers();this.oldScroll={x:i.horizontal.newScroll,y:i.vertical.newScroll}},a.prototype.innerHeight=function(){return this.element==this.element.window?g.viewportHeight():this.adapter.innerHeight()},a.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},a.prototype.innerWidth=function(){return this.element==this.element.window?g.viewportWidth():this.adapter.innerWidth()},a.prototype.destroy=function(){var e,t=[];for(e in this.waypoints)for(var n in this.waypoints[e])t.push(this.waypoints[e][n]);for(var i=0,a=t.length;i<a;i++)t[i].destroy()},a.prototype.refresh=function(){var e,t,n=this.element==this.element.window,i=n?void 0:this.adapter.offset(),a={};for(t in this.handleScroll(),e={horizontal:{contextOffset:n?0:i.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:i.top,contextScroll:n?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var o,r=e[t];for(o in this.waypoints[t]){var l,s=this.waypoints[t][o],u=s.options.offset,c=s.triggerPoint,d=0,p=null==c;s.element!==s.element.window&&(d=s.adapter.offset()[r.offsetProp]),"function"==typeof u?u=u.apply(s):"string"==typeof u&&(u=parseFloat(u),-1<s.options.offset.indexOf("%")&&(u=Math.ceil(r.contextDimension*u/100))),l=r.contextScroll-r.contextOffset,s.triggerPoint=Math.floor(d+l-u),l=c<r.oldScroll,u=s.triggerPoint>=r.oldScroll,c=!l&&!u,!p&&(l&&u)?(s.queueTrigger(r.backward),a[s.group.id]=s.group):(!p&&c||p&&r.oldScroll>=s.triggerPoint)&&(s.queueTrigger(r.forward),a[s.group.id]=s.group)}}return g.requestAnimationFrame(function(){for(var e in a)a[e].flushTriggers()}),this},a.findOrCreateByElement=function(e){return a.findByElement(e)||new a(e)},a.refreshAll=function(){for(var e in i)i[e].refresh()},a.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){e&&e(),a.refreshAll()},g.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},g.Context=a}(),function(){"use strict";function o(e,t){return e.triggerPoint-t.triggerPoint}function r(e,t){return t.triggerPoint-e.triggerPoint}var t={vertical:{},horizontal:{}},n=window.Waypoint;function i(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),t[this.axis][this.name]=this}i.prototype.add=function(e){this.waypoints.push(e)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var t=this.triggerQueues[e];t.sort("up"===e||"left"===e?r:o);for(var n=0,i=t.length;n<i;n+=1){var a=t[n];!a.options.continuous&&n!==t.length-1||a.trigger([e])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(o);e=n.Adapter.inArray(e,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},i.prototype.previous=function(e){this.waypoints.sort(o);e=n.Adapter.inArray(e,this.waypoints);return e?this.waypoints[e-1]:null},i.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},i.prototype.remove=function(e){e=n.Adapter.inArray(e,this.waypoints);-1<e&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(e){return t[e.axis][e.name]||new i(e)},n.Group=i}(),function(){"use strict";var n=window.jQuery,e=window.Waypoint;function i(e){this.$element=n(e)}n.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,t){i.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[t].apply(this.$element,e)}}),n.each(["extend","inArray","isEmptyObject"],function(e,t){i[t]=n[t]}),e.adapters.push({name:"jquery",Adapter:i}),e.Adapter=i}(),function(){"use strict";var a=window.Waypoint;function e(i){return function(){var t=[],n=arguments[0];return i.isFunction(arguments[0])&&((n=i.extend({},arguments[1])).handler=arguments[0]),this.each(function(){var e=i.extend({},n,{element:this});"string"==typeof e.context&&(e.context=i(this).closest(e.context)[0]),t.push(new a(e))}),t}}window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}(),function(o){function r(e){var t=o(window),n=s.test(e[0].nodeName);return{border:n?{top:0,left:0,bottom:0,right:0}:function(e,t){t=t||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var n=!(!document.defaultView||!document.defaultView.getComputedStyle),e={top:parseFloat(n?t.borderTopWidth:o.css(e,"borderTopWidth"))||0,left:parseFloat(n?t.borderLeftWidth:o.css(e,"borderLeftWidth"))||0,bottom:parseFloat(n?t.borderBottomWidth:o.css(e,"borderBottomWidth"))||0,right:parseFloat(n?t.borderRightWidth:o.css(e,"borderRightWidth"))||0};return{top:e.top,left:e.left,bottom:e.bottom,right:e.right,vertical:e.top+e.bottom,horizontal:e.left+e.right}}(e[0]),scroll:{top:(n?t:e).scrollTop(),left:(n?t:e).scrollLeft()},scrollbar:{right:n?0:e.innerWidth()-e[0].clientWidth,bottom:n?0:e.innerHeight()-e[0].clientHeight},rect:(t=e[0].getBoundingClientRect(),{top:n?0:t.top,left:n?0:t.left,bottom:n?e[0].clientHeight:t.bottom,right:n?e[0].clientWidth:t.right})}}var l={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},n={direction:"both",topOffset:0},s=/^(?:html)$/i;function u(t,e,n){(t=s.test(t[0].nodeName)?o("html,body"):t).animate(e,n).eq(0).queue(function(e){o.isFunction(n.complete)&&n.complete.call(t[0]),e()})}function c(e){var t={};return 0<arguments.length&&("object"!=typeof e[0]?(t.duration=e[0],1<e.length&&(t.easing=e[1],2<e.length&&(t.complete=e[2]))):t=o.extend(t,e[0])),(t=o.extend({},n,t)).direction=l["string"==typeof t.direction&&t.direction.toLowerCase()]||l.both,!0===t.direction.x&&(t.direction.selector="horizontal"),!0===t.direction.y&&(t.direction.selector=t.direction.selector?"both":"vertical"),t}function e(){var e,t,n=c(arguments),i=this.eq(0),a=i.closest(":scrollable("+n.direction.selector+")");return 0<a.length&&(a=a.eq(0),t=r(i),e=r(a),i={top:t.rect.top-(e.rect.top+e.border.top)-parseInt(n.topOffset,10),bottom:e.rect.bottom-e.border.bottom-e.scrollbar.bottom-t.rect.bottom,left:t.rect.left-(e.rect.left+e.border.left),right:e.rect.right-e.border.right-e.scrollbar.right-t.rect.right},t={},!0===n.direction.y&&(i.top<0?t.scrollTop=e.scroll.top+i.top:0<i.top&&i.bottom<0&&(t.scrollTop=e.scroll.top+Math.min(i.top,-i.bottom))),!0===n.direction.x&&(i.left<0?t.scrollLeft=e.scroll.left+i.left:0<i.left&&i.right<0&&(t.scrollLeft=e.scroll.left+Math.min(i.left,-i.right))),o.isEmptyObject(t)?o.isFunction(n.complete)&&n.complete.call(a[0]):u(a,t,n)),this}function t(){var e,t,n,i=c(arguments),a=this.eq(0),o=a.closest(":scrollable(vertical)");return 0<o.length&&(o=o.eq(0),e=s.test(o[0].nodeName)?0:o.scrollTop(),t="HTML"===o.prop("tagName")?0:o.offset().top,(n={}).scrollTop=e+a.offset().top-parseFloat(a.css("margin-top"))-t-parseFloat(o.css("margin-top"))-parseFloat(o.css("padding-top"))-parseInt(i.topOffset,10),u(o,n,i)),this}o.fn.extend({scrollIntoView:e,scrollintoview:e,scrollToTop:t,scrolltotop:t});var d={auto:!0,overlay:!0,scroll:!0,visible:!1,hidden:!1};o.extend(o.expr[":"],{scrollable:function(e,t,n,i){var a=l["string"==typeof n[3]&&n[3].toLowerCase()]||l.both,n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,o={x:d[n.overflowX.toLowerCase()]||!1,y:d[n.overflowY.toLowerCase()]||!1,isRoot:s.test(e.nodeName)};if(!o.x&&!o.y&&!o.isRoot)return!1;e={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(o.x||o.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(o.y||o.isRoot)&&this.height.scroll>this.height.client}};return a.y&&e.scrollableY()||a.x&&e.scrollableX()}})}(jQuery),function(){"use strict";var g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function m(e){return function(e,t){var n,i,a,o,r,l,s,u,c=1,d=e.length,p="";for(i=0;i<d;i++)if("string"==typeof e[i])p+=e[i];else if("object"==typeof e[i]){if((o=e[i]).keys)for(n=t[c],a=0;a<o.keys.length;a++){if(null==n)throw new Error(m('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[a],o.keys[a-1]));n=n[o.keys[a]]}else n=o.param_no?t[o.param_no]:t[c++];if(g.not_type.test(o.type)&&g.not_primitive.test(o.type)&&n instanceof Function&&(n=n()),g.numeric_arg.test(o.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(m("[sprintf] expecting number but found %T",n));switch(g.number.test(o.type)&&(s=0<=n),o.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,o.width?parseInt(o.width):0);break;case"e":n=o.precision?parseFloat(n).toExponential(o.precision):parseFloat(n).toExponential();break;case"f":n=o.precision?parseFloat(n).toFixed(o.precision):parseFloat(n);break;case"g":n=o.precision?String(Number(n.toPrecision(o.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=o.precision?n.substring(0,o.precision):n;break;case"t":n=String(!!n),n=o.precision?n.substring(0,o.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=o.precision?n.substring(0,o.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=o.precision?n.substring(0,o.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}g.json.test(o.type)?p+=n:(!g.number.test(o.type)||s&&!o.sign?u="":(u=s?"+":"-",n=n.toString().replace(g.sign,"")),r=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",l=o.width-(u+n).length,l=o.width&&0<l?r.repeat(l):"",p+=o.align?u+n+l:"0"===r?u+l+n:l+u+n)}return p}(function(e){if(s[e])return s[e];var t,n=e,i=[],a=0;for(;n;){if(null!==(t=g.text.exec(n)))i.push(t[0]);else if(null!==(t=g.modulo.exec(n)))i.push("%");else{if(null===(t=g.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var o=[],r=t[2],l=[];if(null===(l=g.key.exec(r)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(l[1]);""!==(r=r.substring(l[0].length));)if(null!==(l=g.key_access.exec(r)))o.push(l[1]);else{if(null===(l=g.index_access.exec(r)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(l[1])}t[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return s[e]=i}(e),arguments)}function e(e,t){return m.apply(null,[e].concat(t||[]))}var s=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=m,exports.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=m,window.vsprintf=e,"function"==typeof define&&define.amd&&define(function(){return{sprintf:m,vsprintf:e}}))}(),function(r,o){"use strict";o.bibleAudioCheck={checkBibleAudio:function(){var e=r("#rsconf").attr("value"),t=r("#lib").attr("value"),n=r("#englishSym").attr("value"),i=r("#langSym").attr("value"),a=r("#pubYear").attr("value");r("#isPublicationABible").val()&&n&&i&&a&&(a="/wol/baa/%s/%s/%s",a=sprintf("/wol/baa/%s/%s/%s",e,t,n),o.web.getJSON(a).done(function(e){var i,a,o;i=e,e=r("#bookNo").attr("value"),o='<span class="hasAudioStatic"><span class="audioIcon"></span></span>',e?i[e]&&r(".navBook").append(o):i[0]?r(".materialNav").find("header h1").filter(function(){return 0===r(this).find(".hasAudio").length}).append(o):(a=r("nav.bibleNav").hasClass("legacy"),r("[data-bookid]").filter(function(){return 0===r(this).find(".hasAudio").length}).each(function(e,t){var n=r(t),t=n.data("bookid");i[t]&&(a?n.append(o):n.parent().addClass("audio"))}))}))}}}(jQuery,app),function(n,e){"use strict";var i=null,t=[];function a(){t.forEach(function(e){e()})}!function(){try{var e=new Audio,t=e.canPlayType("audio/ogg")?"data:audio/ogg;base64,T2dnUwACAAAAAAAAAAD/QwAAAAAAAM2LVKsBHgF2b3JiaXMAAAAAAUSsAAAAAAAAgLsAAAAAAAC4AU9nZ1MAAAAAAAAAAAAA/0MAAAEAAADmvOe6Dy3/////////////////MgN2b3JiaXMdAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAwNzA2MjIAAAAAAQV2b3JiaXMfQkNWAQAAAQAYY1QpRplS0kqJGXOUMUaZYpJKiaWEFkJInXMUU6k515xrrLm1IIQQGlNQKQWZUo5SaRljkCkFmVIQS0kldBI6J51jEFtJwdaYa4tBthyEDZpSTCnElFKKQggZU4wpxZRSSkIHJXQOOuYcU45KKEG4nHOrtZaWY4updJJK5yRkTEJIKYWSSgelU05CSDWW1lIpHXNSUmpB6CCEEEK2IIQNgtCQVQAAAQDAQBAasgoAUAAAEIqhGIoChIasAgAyAAAEoCiO4iiOIzmSY0kWEBqyCgAAAgAQAADAcBRJkRTJsSRL0ixL00RRVX3VNlVV9nVd13Vd13UgNGQVAAABAEBIp5mlGiDCDGQYCA1ZBQAgAAAARijCEANCQ1YBAAABAABiKDmIJrTmfHOOg2Y5aCrF5nRwItXmSW4q5uacc845J5tzxjjnnHOKcmYxaCa05pxzEoNmKWgmtOacc57E5kFrqrTmnHPGOaeDcUYY55xzmrTmQWo21uaccxa0pjlqLsXmnHMi5eZJbS7V5pxzzjnnnHPOOeecc6oXp3NwTjjnnHOi9uZabkIX55xzPhmne3NCOOecc84555xzzjnnnHOC0JBVAAAQAABBGDaGcacgSJ+jgRhFiGnIpAfdo8MkaAxyCqlHo6ORUuoglFTGSSmdIDRkFQAACAAAIYQUUkghhRRSSCGFFFKIIYYYYsgpp5yCCiqppKKKMsoss8wyyyyzzDLrsLPOOuwwxBBDDK20EktNtdVYY62555xrDtJaaa211koppZRSSikIDVkFAIAAABAIGWSQQUYhhRRSiCGmnHLKKaigAkJDVgEAgAAAAgAAADzJc0RHdERHdERHdERHdETHczxHlERJlERJtEzL1ExPFVXVlV1b1mXd9m1hF3bd93Xf93Xj14VhWZZlWZZlWZZlWZZlWZZlWYLQkFUAAAgAAIAQQgghhRRSSCGlGGPMMeegk1BCIDRkFQAACAAgAAAAwFEcxXEkR3IkyZIsSZM0S7M8zdM8TfREURRN01RFV3RF3bRF2ZRN13RN2XRVWbVdWbZt2dZtX5Zt3/d93/d93/d93/d93/d1HQgNWQUASAAA6EiOpEiKpEiO4ziSJAGhIasAABkAAAEAKIqjOI7jSJIkSZakSZ7lWaJmaqZneqqoAqEhqwAAQAAAAQAAAAAAKJriKabiKaLiOaIjSqJlWqKmaq4om7Lruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7rui4QGrIKAJAAANCRHMmRHEmRFEmRHMkBQkNWAQAyAAACAHAMx5AUybEsS9M8zdM8TfRET/RMTxVd0QVCQ1YBAIAAAAIAAAAAADAkw1IsR3M0SZRUS7VUTbVUSxVVT1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTVN0zRNIDRkJQAABADAYo3B5SAhJSXl3hDCEJOeMSYhtV4hBJGS3jEGFYOeMqIMct5C4xCDHggNWREARAEAAMYgxxBzyDlHqZMSOeeodJQa5xyljlJnKcWYYs0oldhSrI1zjlJHraOUYiwtdpRSjanGAgAAAhwAAAIshEJDVgQAUQAAhDFIKaQUYow5p5xDjCnnmHOGMeYcc44556B0UirnnHROSsQYc445p5xzUjonlXNOSiehAACAAAcAgAALodCQFQFAnACAQZI8T/I0UZQ0TxRFU3RdUTRd1/I81fRMU1U90VRVU1Vt2VRVWZY8zzQ901RVzzRV1VRVWTZVVZZFVdVt03V123RV3ZZt2/ddWxZ2UVVt3VRd2zdV1/Zd2fZ9WdZ1Y/I8VfVM03U903Rl1XVtW3VdXfdMU5ZN15Vl03Vt25VlXXdl2fc103Rd01Vl2XRd2XZlV7ddWfZ903WF35VlX1dlWRh2XfeFW9eV5XRd3VdlVzdWWfZ9W9eF4dZ1YZk8T1U903RdzzRdV3VdX1dd19Y105Rl03Vt2VRdWXZl2fddV9Z1zzRl2XRd2zZdV5ZdWfZ9V5Z13XRdX1dlWfhVV/Z1WdeV4dZt4Tdd1/dVWfaFV5Z14dZ1Ybl1XRg+VfV9U3aF4XRl39eF31luXTiW0XV9YZVt4VhlWTl+4ViW3feVZXRdX1ht2RhWWRaGX/id5fZ943h1XRlu3efMuu8Mx++k+8rT1W1jmX3dWWZfd47hGDq/8OOpqq+brisMpywLv+3rxrP7vrKMruv7qiwLvyrbwrHrvvP8vrAso+z6wmrLwrDatjHcvm4sv3Acy2vryjHrvlG2dXxfeArD83R1XXlmXcf2dXTjRzh+ygAAgAEHAIAAE8pAoSErAoA4AQCPJImiZFmiKFmWKIqm6LqiaLqupGmmqWmeaVqaZ5qmaaqyKZquLGmaaVqeZpqap5mmaJqua5qmrIqmKcumasqyaZqy7LqybbuubNuiacqyaZqybJqmLLuyq9uu7Oq6pFmmqXmeaWqeZ5qmasqyaZquq3meanqeaKqeKKqqaqqqraqqLFueZ5qa6KmmJ4qqaqqmrZqqKsumqtqyaaq2bKqqbbuq7Pqybeu6aaqybaqmLZuqatuu7OqyLNu6L2maaWqeZ5qa55mmaZqybJqqK1uep5qeKKqq5ommaqqqLJumqsqW55mqJ4qq6omea5qqKsumatqqaZq2bKqqLZumKsuubfu+68qybqqqbJuqauumasqybMu+78qq7oqmKcumqtqyaaqyLduy78uyrPuiacqyaaqybaqqLsuybRuzbPu6aJqybaqmLZuqKtuyLfu6LNu678qub6uqrOuyLfu67vqucOu6MLyybPuqrPq6K9u6b+sy2/Z9RNOUZVM1bdtUVVl2Zdn2Zdv2fdE0bVtVVVs2TdW2ZVn2fVm2bWE0Tdk2VVXWTdW0bVmWbWG2ZeF2Zdm3ZVv2ddeVdV/XfePXZd3murLty7Kt+6qr+rbu+8Jw667wCgAAGHAAAAgwoQwUGrISAIgCAACMYYwxCI1SzjkHoVHKOecgZM5BCCGVzDkIIZSSOQehlJQy5yCUklIIoZSUWgshlJRSawUAABQ4AAAE2KApsThAoSErAYBUAACD41iW55miatqyY0meJ4qqqaq27UiW54miaaqqbVueJ4qmqaqu6+ua54miaaqq6+q6aJqmqaqu67q6Lpqiqaqq67qyrpumqqquK7uy7Oumqqqq68quLPvCqrquK8uybevCsKqu68qybNu2b9y6ruu+7/vCka3rui78wjEMRwEA4AkOAEAFNqyOcFI0FlhoyEoAIAMAgDAGIYMQQgYhhJBSSiGllBIAADDgAAAQYEIZKDRkRQAQJwAAGEMppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkgppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkqppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoplVJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSCgCQinAAkHowoQwUGrISAEgFAACMUUopxpyDEDHmGGPQSSgpYsw5xhyUklLlHIQQUmktt8o5CCGk1FJtmXNSWosx5hgz56SkFFvNOYdSUoux5ppr7qS0VmuuNedaWqs115xzzbm0FmuuOdecc8sx15xzzjnnGHPOOeecc84FAOA0OACAHtiwOsJJ0VhgoSErAYBUAAACGaUYc8456BBSjDnnHIQQIoUYc845CCFUjDnnHHQQQqgYc8w5CCGEkDnnHIQQQgghcw466CCEEEIHHYQQQgihlM5BCCGEEEooIYQQQgghhBA6CCGEEEIIIYQQQgghhFJKCCGEEEIJoZRQAABggQMAQIANqyOcFI0FFhqyEgAAAgCAHJagUs6EQY5Bjw1BylEzDUJMOdGZYk5qMxVTkDkQnXQSGWpB2V4yCwAAgCAAIMAEEBggKPhCCIgxAABBiMwQCYVVsMCgDBoc5gHAA0SERACQmKBIu7iALgNc0MVdB0IIQhCCWBxAAQk4OOGGJ97whBucoFNU6iAAAAAAAAwA4AEA4KAAIiKaq7C4wMjQ2ODo8AgAAAAAABYA+AAAOD6AiIjmKiwuMDI0Njg6PAIAAAAAAAAAAICAgAAAAAAAQAAAAICAT2dnUwAE7AwAAAAAAAD/QwAAAgAAADuydfsFAQEBAQEACg4ODg==":"data:audio/mpeg;base64,//MUxAAB6AXgAAAAAPP+c6nf//yi/6f3//MUxAMAAAIAAAjEcH//0fTX6C9Lf//0//MUxA4BeAIAAAAAAKX2/6zv//+IlR4f//MUxBMCMAH8AAAAABYWalVMQU1FMy45//MUxBUB0AH0AAAAADkuM1VVVVVVVVVV//MUxBgBUATowAAAAFVVVVVVVVVVVVVV";e.autoplay=!0,e.volume=0,n(e).on("play",function(){i=!0,a()}),e.src=t}catch(e){i=!1,a()}setTimeout(function(){null===i&&(i=!1,a())},1e3)}(),e.audioAutoplay={canAutoplay:i,onReady:function(e){null===i?t.push(e):e()}}}(jQuery,app),function(c,d){"use strict";var e=250;function p(e,t,n){return e.replace("{rsconf}",t).replace("{library}",n).replace("/#","")}function g(){var e=new URI(this.href);e.pathname()===window.location.pathname&&(e=this.attributes.rsconf&&this.attributes.lib?p(t(),this.attributes.rsconf.value,this.attributes.lib.value):(e=new URI("/"+d.getUILanguage()+"/wol/sysl/"+d.getRsConfigSymbol()+"/"+d.getLibrarySymbol())).addQuery("url",t()));e=function(e){var t,n=e;d.highlightManager.hasHighlight()&&(null==(t=d.highlightManager.getFirstHighlightedIdNumber())||isNaN(t)||(n=e.replace("{no}",t)));return n}(decodeURIComponent(e.toString()));return e&&d.loadPage(e),!1}function t(){var e="",t="",n=d.getRsConfigSymbol()+"/"+d.getLibrarySymbol(),i=d.getContentRsConfigSymbol()+"/"+d.getContentLibrarySymbol();switch(d.getCommand()){case"d":case"dsync":case"sydp":e="sydp",t=d.getDID()+"/{no}";break;case"dt":case"dtsync":case"sydt":e="sydt",t=d.getTodayDate();break;case"meetings":case"msync":case"sym":e="sym",t=d.getTodayWeek();break;case"b":case"bsync":case"sybv":e="sybv",t=d.getBookNumber()+"/"+d.getChapterNumber()+"/{no}"}if(e){n=[d.getUILanguage(),"wol",e,n];return"sybv"===e&&n.push(d.getSourcePreferredBible()),n.push("{rsconf}/{library}",i,t),"/"+n.join("/")}return""}function n(){var e=c(".convenienceCharsMenu li");0<e.length&&(e.on("click",function(){var e,t=c(this).text();e=t,(t=l().find(".searchField")).val(t.val()+e),i()}),c(".convenienceCharsButton").on("click",function(){return a(),!1}))}function i(){l().find(".convenienceCharsFrame").fadeOut(e),c(document).off("click.convenienceCharsFrame")}function a(){var e,t,n;l().find(".convenienceCharsFrame").is(":visible")?i():(e=l().find(".convenienceCharsFrame"),t=l().find(".searchFieldContainer"),n=t[0].getBoundingClientRect(),e.css({width:t.outerWidth(),left:n.left,top:n.top+t.height()}),e.removeClass("hidden").show(),c(document).one("click.convenienceCharsFrame",function(){a()}))}function o(){var e=!1,t=l().find(".searchField");t.on("keydown",function(){e||(t.removeAttr("title"),e=!0)})}function r(){var e=c("#standardSearch");e.find(".searchIcon").on("click",d.menu.toggleSearch),e.find(".closeIcon").on("click",d.menu.hideSearch),c("#regionMain, #publicationNavigation, #regionFooter").on("pointerdown pointerup click",function(){c(".searchControl").removeClass("searchFocused"),d.menu.hideSearch()}),c(".searchField").on("input propertychange change keydown",s),c(".searchFieldCancel").on("click",function(){c(".searchField").focus(),d.menu.clearSearch()}),s()}function l(){return c("#standardSearch")}function s(){c(".searchField").val().length?c(".searchFieldCancel").show():c(".searchFieldCancel").hide()}function u(){var e=c("#menuBible").removeClass("selected"),t=c("#menuToday").removeClass("selected"),n=c("#menuToolsPreferences").removeClass("selected"),i=c("#menuPublications").removeClass("selected"),a=c(".librarySelectionLink").removeClass("selected");switch(d.getCommand()){case"d":case"dsync":case"sim":(c("#documentInBible").val()?e:i).addClass("selected");break;case"lv":case"library":i.addClass("selected");break;case"b":case"bsync":case"binav":case"bibles":case"gallery":case"galleryitem":case"bibledocument":e.addClass("selected");break;case"dt":case"dtsync":case"meetings":case"msync":t.addClass("selected");break;case"pref":n.addClass("selected");break;case"li":a.addClass("selected");break;case"publication":(c("#isPublicationABible").val()?e:i).addClass("selected")}}d.menu={setupMenu:function(){var a,e;!function(){var t,n,e,i,a,o=c("#menuSynchronize"),r=c("#linkSynchronizeSwitch");{var l,s,u;0<o.length&&(null==(l=function(){var e=d.net.convertSymbolToFromRb(d.getLibrarySymbol(),!1),t=d.net.convertSymbolToFromRb(d.getContentLibrarySymbol(),!1),n=d.net.convertSymbolToFromRb(d.utilities.getCookie("lib")||"",!1),i=d.net.convertSymbolToFromRb(d.utilities.getCookie("synclib")||"",!1),e=!(d.getRsConfigSymbol()===d.getContentRsConfigSymbol()&&e===t),i=d.getContentRsConfigSymbol()===d.utilities.getCookie("syncrsconf")&&t===i,n=d.getContentRsConfigSymbol()===d.utilities.getCookie("rsconf")&&t===n;if(e&&!n||!e&&i){if(d.validator.isValidRsconf(d.utilities.getCookie("rsconf"))&&d.validator.isValidLib(d.utilities.getCookie("lib"))&&d.validator.containsNoTags(d.utilities.getCookie("lang"))&&d.validator.isValidLocale(d.utilities.getCookie("locale")))return!0}else if((!e||e&&n)&&d.validator.isValidRsconf(d.utilities.getCookie("syncrsconf"))&&d.validator.isValidLib(d.utilities.getCookie("synclib"))&&d.validator.containsNoTags(d.utilities.getCookie("synclang"))&&d.validator.isValidLocale(d.utilities.getCookie("synclocale")))return!1;return null}())?o.hide():(s=c("#menuSynchronizeSwitch"),u=c("#linkSynchronize"),l=!0===l?(t=d.utilities.getCookie("rsconf"),n=d.utilities.getCookie("lib"),d.utilities.getCookie("locale"),a=d.normalizeText(decodeURI(d.utilities.getCookie("lang")).replace("+"," ")),e=d.utilities.getCookie("ckLang"),i=d.utilities.getCookie("script"),d.utilities.getCookie("dir")):(t=d.utilities.getCookie("syncrsconf"),n=d.utilities.getCookie("synclib"),d.utilities.getCookie("synclocale"),a=d.normalizeText(decodeURI(d.utilities.getCookie("synclang")).replace("+"," ")),e=d.utilities.getCookie("synclangsym"),i=d.utilities.getCookie("synclangscript"),d.utilities.getCookie("syncdir")),u.addClass("ml-"+e).addClass("ms-"+i).addClass("dir-"+l).children(".label").html(a),0<s.length&&(s.removeClass("tbSync"),s.addClass("tbSyncSelect")),c.when().then(function(){var e=c.Deferred();return d.utilities.showRubyOnForPage()?d.utilities.libraryHasRubyAsync(n,e.resolve):e.resolve(!1),e}).then(function(e){n=d.net.convertSymbolToFromRb(n,e),u.attr("href",p(u.attr("href"),t,n)).attr("rsconf",t).attr("lib",n).on("click",g),o.removeClass("hidden").show()})))}0<r.length&&r.on("click",g);c("#menuSynchronizeControls").removeClass("hidden")}(),c("a.todayNav").attr("href",d.url.makeDateDataUrl(new Date,0)),c(".todayNav a").not("#dailyText a").attr("href",d.url.makeDateDataUrl(new Date,0,!1,!0)),c(".searchForm").on("submit",function(){switch(document.activeElement.className){case"searchField":c(".searchForm #st").val(wolConstants.QUERY_SEARCH_TRIGGER_FieldSubmit);break;case"searchButton":c(".searchForm #st").val(wolConstants.QUERY_SEARCH_TRIGGER_ButtonSubmit)}if(!l().find(".searchField").val().length)return!1}),d.isLibraryRTL()&&(a=c(".searchField"),e=d.isIE()?"keydown":"input",a.on(e,function(e){var t=a.val(),n=e.target.selectionStart,i=new RegExp("([:,./-])(?!‏)","gm");a.val(t.replace(i,function(e){return n++,e+"‏"})),e.target.setSelectionRange(n,n)})),function(){{var i,a,o;!0!==/[A|a]ndroid 2/.test(navigator.userAgent)&&(i=d.getUILanguage(),a=d.getRsConfigSymbol(),o=d.getLibrarySymbol(),c(".searchControl").each(function(){var e=c(this).find(".searchField");d.typingSuggestionList.typingSuggestionList(function(e){if(a&&o&&e){e=d.search.sanitizeSearchQuery(e);return sprintf("/wol/sg/%s/%s?q=%s",a,o,encodeURIComponent(e))}return null},function(e){var t=d.search.sanitizeSearchQuery(e.query);switch(e.type){case 1:return sprintf("/%s/wol/bl/%s/%s?q=%s",i,a,o,encodeURIComponent(t));case 2:return sprintf("/%s/wol/pl/%s/%s?q=%s",i,a,o,encodeURIComponent(t));case 3:return sprintf("/%s/wol/tl/%s/%s?q=%s",i,a,o,encodeURIComponent(t));default:var n=sprintf("p=%s&r=%s",d.utilities.getSearchProximity(),d.utilities.getSearchRank());return sprintf("/%s/wol/s/%s/%s?q=%s&%s",i,a,o,encodeURIComponent(t),n)}},e,c(this).find(".suggestions"),{})}))}}(),r(),o(),n(),u(),d.utilities.getCookie("prox")&&c("#proximitySelector").val(d.utilities.getCookie("prox")),d.utilities.getCookie("rank")&&c("#rankSelector").val(d.utilities.getCookie("rank")),c("#menuSearchHitNext").on("click",function(){return d.text.navigateSearchHits(!0),!1}),"h"!==d.getCommand()||("#standardSearch"===(e=l()).selector||"#compactSearch"===e.selector&&e.hasClass("showField"))&&l().find(".searchField").trigger("focus")},toggleSearch:function(){var e=c("#standardSearch");e.toggleClass("searchFocused"),e.hasClass("searchFocused")&&e.find("input").trigger("focus")},hideSearch:function(){c("#standardSearch").removeClass("searchFocused")},clearSearch:function(){c(".searchField").val("").change()},setupConvenienceCharacters:n,repositionConvenienceChars:function(){var e,t,n=l().find(".convenienceCharsFrame");n.is(":visible")&&((e=l().find(".searchFieldContainer")).is(":visible")?(t=e[0].getBoundingClientRect(),n.css({width:e.outerWidth(),left:t.left,top:t.top+e.height()})):n.hide())},setupSearchEntry:r,setupSearchTooltip:o,getActiveSearchControl:l,markButtonByLocation:u,repositionSuggestionList:function(){var e,t,n=l().find(".suggestions");n.is(":visible")&&((e=l().find(".searchField")).is(":visible")?(t=e[0].getBoundingClientRect(),n.css({width:e.innerWidth(),left:t.left,top:t.top+e.height()})):n.hide())}}}(jQuery,app),function(c,d){"use strict";var p;function g(e){var t=window.location.pathname+window.location.search,e=Object.keys(e);if(null!=e)return e.findIndex(function(e){return t===decodeURI(e.split("#")[0])||t===e.split("#")[0]})}d.togglePageNo=function(){c(".pageNum").toggle()},d.text={toggleQuestions:function(){var e=c("#questionContainer");e.toggle(),e.is(":visible")?c(".contentContainer").find(".qu").hide():(c(".contentContainer").find(".qu").show(),d.contentScrollHandler())},setupText:function(){function e(){c(".ellipsized:not(.ellipsizedFade)").filter(function(){return 0<c(this).find("ruby").length}).addClass("ellipsizedFade")}var t,n,i,a,o,r,l,s;function u(e){var t;(s=e)<0?s=l-1:l<=s&&(s=Modernizr.sessionstorage?null!=(t=JSON.parse(sessionStorage.getItem("nav-scope-data")))&&0<Object.keys(t).length?null!=(e=g(t))&&-1!==e?((n=e+1)>=Object.keys(t).length&&(n=0),d.loadPage(Object.keys(t)[n]),o):0:0:0),o!==s&&(c("."+a).removeClass(a),r.eq(s).toggleClass(a).jumpTo(),o=s);var n=c.Event("markhighlighchanged");n.item=r.eq(s),c(document).trigger(n)}e(),(d.utilities.rubyAvailable()||0<document.getElementsByTagName("ruby").length)&&new MutationObserver(function(){e()}).observe(document,{childList:!0,subtree:!0}),!Modernizr.sessionstorage||null!=(t=JSON.parse(sessionStorage.getItem("nav-scope-data")))&&0<Object.keys(t).length&&(null!=(n=g(t))&&-1!==n&&(n=t[Object.keys(t)[n]],i=c("[data-fnid]"),n.forEach(function(e){i.filter("[data-fnid="+e+"]").find("span").addClass("mk")}))),d.layout.setupNextSearchHitButton(),0<c(".mk, .mkhl").length&&(a="mkhl",r=c("."+"mk"),l=r.length,s=null,"s"!==d.getCommand()&&u(null===s?0:s+1),p={jump:function(e){u(r.index(e))},prev:function(){u(s-1)},next:function(){u(null===s?0:s+1)}},c(document).on("keypress",function(e){c(".searchField").toArray().some(function(e){return e===document.activeElement})||(43===(e=e.keyCode||e.which)||59===e||61===e?p.next():45===e&&p.prev())}),c(".mk").on("click",function(){c(this).hasClass("mkhl")||p.jump(c(this))}))},navigateSearchHits:function(e){e?p.next():p.prev()}}}(jQuery,app);var BoundaryWidthLarge=700,BoundaryWidthMedium=550,BoundaryWidthNarrow=400,FullWidthClass="contentFullWidth",LargeWidthClass="contentLargeWidth",MediumWidthClass="contentMediumWidth",NarrowWidthClass="contentNarrowWidth",app,app;!function(e){var t=e(window),n=e("#regionMain, #videoWrapper"),i=e(".articlePositioner");t.on("resize",function(){return i.width()>BoundaryWidthLarge?n.addClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(MediumWidthClass).removeClass(NarrowWidthClass):i.width()>BoundaryWidthMedium&&i.width()<=BoundaryWidthLarge?n.addClass(LargeWidthClass).removeClass(FullWidthClass).removeClass(MediumWidthClass).removeClass(NarrowWidthClass):i.width()>BoundaryWidthNarrow&&i.width()<=BoundaryWidthMedium?n.addClass(MediumWidthClass).removeClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(NarrowWidthClass):i.width()<=BoundaryWidthNarrow?n.addClass(NarrowWidthClass).removeClass(FullWidthClass).removeClass(LargeWidthClass).removeClass(MediumWidthClass):void 0}).trigger("resize")}(jQuery),function(m,h){"use strict";var a,l={sn:["iasn","iasnm","snv"],snnw:["snnw","snv"],sjj:["sjjm","sjji","sjjc","pksjj"]},n={"r2:lp-u-ru":["bi12","yc","sn","snnw","sjj","mb"]},s={},o=[];function r(){return c().addQuery("langwritten",h.getContentLibraryLanguageSymbol()).addQuery("txtCMSLang",h.getContentLibraryLanguageSymbol()).addQuery("fileformat","mp3")}function u(e,t,n,i){t=c().addQuery("pub",e).addQuery("langwritten",t).addQuery("txtCMSLang",t).addQuery("fileformat","mp3");return n&&(t.addQuery("booknum",n),i&&t.addQuery("track",i)),t.toString()}function c(){return new URI(h.pubMediaServer())}function d(a){var e={},n=[],o=[],r=[];return m.isArray(a)?m.each(a,function(e,a){m.each(a.languages,function(e,t){-1===m.inArray(e,n)&&(n.push(e),o.push(t.name))}),m.each(n,function(n,i){m.each(a.files[i].MP3,function(e,t){-1===t.file.url.indexOf(".zip")&&(t={sym:i,name:o[n],title:t.title,url:t.file.url,duration:t.duration,markers:t.markers,pub:a.pub,pubName:a.pubName},r.push(t))})})}):(m.each(a.languages,function(e,t){n.push(e),o.push(t.name)}),m.each(n,function(n,i){m.each(a.files[i].MP3,function(e,t){-1===t.file.url.indexOf(".zip")&&(t={sym:i,name:o[n],title:t.title,url:t.file.url,duration:t.duration,markers:t.markers,pub:a.pub,pubName:a.pubName},r.push(t))})})),e.languages=n,e.tracks=r,e}function p(){h.hasAudio=!1,h.isFallbackAudio=!1,h.audioPlayerSetup=!1,h.audioPlayerVisible=!1,m("#audioPlayerSpeakerIcon").remove(),m(".hasAudioPlayer").removeClass("hasAudioPlayer"),m("#playerwrapper").empty().addClass("hidden"),h.contentScrollHandler(),h.layout.sideBarSizing(),m(document).trigger("scroll")}function i(){var e=h.parseBibleDocumentURL();t(u(h.getAudioPubSym(),h.getContentLibraryLanguageSymbol(),e.book,e.chapter))}function t(i){if(-1!==m.inArray(i,o))return p(),void k();S(i)&&h.web.ajax(i,{dataType:"json",cache:!0}).done(function(e,t,n){h.hasAudio=!0,v(d(e))}).fail(function(e,t,n){o.push(i),p()}).always(k)}function g(){var n,i,a=[],e=h.getPubSym(),e=e in l?(i=h.getChapterNumber(),m.each(l[e],function(e,t){n=r().addQuery("pub",t).addQuery("track",i).toString(),a.push(n)}),f(a)):f(n=r().addQuery("docid",h.getDID()).toString());m.settle(e).then(function(e){e=e.filter(function(e){return!(e instanceof Error)});0<e.length?(h.hasAudio=!0,v(d(e)),k()):-1===m.inArray(h.getAudioPubSym(),["nwt","nwtsty","bi12","bi7","Rbi8"])?m.when(S(e=function(){var e=c().addQuery("pub",h.getAudioPubSym()).addQuery("langwritten",h.getContentLibraryLanguageSymbol()).addQuery("txtCMSLang",h.getContentLibraryLanguageSymbol()).addQuery("fileformat","mp3");return""!==h.getIssue()&&("iasn"===h.getAudioPubSym()||"sjjm"===h.getAudioPubSym()?e.addQuery("track",h.getIssue()):e.addQuery("issue",h.getIssue())),e.toString()}())?h.web.ajax(e,{dataType:"json",cache:!0}):m.Deferred().reject("Invalid URL")).done(function(e){h.hasAudio=!0,h.isFallbackAudio=!0,v(d(e)),k()}).fail(function(){p()}):p()})}function f(e){var n=[];if(m.isArray(e))m.each(e,function(e,t){S(t)&&n.push(y(t))});else if("string"==typeof e){if(!S(e))return[];n.push(y(e))}return n}function y(e){return h.web.ajax(e,{dataType:"json",cache:!0})}function b(){var e=m("#playerwrapper");e.is(":visible")||(e.removeClass("hidden"),e.hasClass("headerPosition")&&(m(".bible").addClass("hasAudioPlayer"),m(".publication").addClass("hasAudioPlayer"),m("#secondaryNavContent").addClass("hasAudioPlayer"),m(".documentSynchronizeInformation").addClass("hasAudioPlayer"),m("#toolbarFrame").addClass("hasAudioPlayer"),m("#toolbarSearch").addClass("hasAudioPlayer"),m("#regionMain").addClass("hasAudioPlayer"),h.contentScrollHandler(),h.layout.sideBarSizing(),e.trigger("resize"),m(document).trigger("scroll"),m(window).trigger("resize"))),m("#audioPlayerSpeakerIcon").addClass("audioPlayerVisible").attr("disabled",!0),h.layout.toggleNavigation()}function v(i){var e,t,n;i&&0!==i.tracks.length&&(n=i.tracks[0].url,e=h.utilities.getCookie("audioLanguage"),e=m.inArray(e,i.languages),h.playlist=i,C(h.getAudioPubSym(),""),h.media.lastSelector=null,-1===e?(i.tracks[0].sym,i.tracks[0].name):(n=i.tracks[e].url,i.tracks[e].sym,i.tracks[e].name),m("#playerwrapper").empty().addClass("lang-"+h.getContentUILanguage()).append(m('<div id="mePlayerHolder" />').append(m("<audio/>").attr("id","wolplayer").attr("preload","none").attr("src",n).css("width","100%").css("height","100%")))),t=function(e){window.mejs=window.mejs||{},mejs.i18n=mejs.i18n||{},mejs.i18n.locale=mejs.i18n.locale||{},mejs.i18n.locale.strings=mejs.i18n.locale.strings||[];var n,t=h.getUILanguage();mejs.i18n.locale.language=t,mejs.i18n.locale.strings[t]=e,n=i,h.web.cachedScript("/assets/js/mediaelement-and-player.min.js").done(function(){var t;t=n,h.audioAutoplay.onReady(function(){var g;if(h.utilities.isPublicationNav()&&!document.getElementById("flavorSelector")&&function(e){var i,a=0,t=h.getPubSym(),o=m("<div/>");o.attr("id","flavorSelector");var r=e.tracks[0].pub;t in l&&(m.each(l[t],function(e,t){var n;s.hasOwnProperty(t)&&(n=_.unescape(s[t].tracks[0].pubName),r===t?(i=m('<div class="flavorOptions">'),m("<input/>",{type:"radio",name:"flavor",id:t,value:t,checked:"checked"}).appendTo(i)):(i=m('<div class="flavorOptions">'),m("<input/>",{type:"radio",name:"flavor",id:t,value:t}).appendTo(i)),m("<label/>",{for:t,text:n}).appendTo(i),i.appendTo(o),a++)}),1<a&&(o.insertBefore("#playerwrapper"),m('input[type="radio"][name="flavor"]').on("change",function(){v(s[this.value])})))}(t),g=t,MediaElementPlayer.prototype.buildplaylist=function(o,e,t,r){var i,l,n=this.options,a=!1,s=!0,u=m("<button/>").attr("aria-controls",this.id).singleclickortap(function(){p(!a)}),c=m("<div/>").addClass("mejs-button").addClass("mejs-playlistdisclosure-button").append(u),d=[];function p(e){var t,n;(a=e)?(l.show().height(i.outerHeight(!0)).css("max-height",(t=m(o.node).parent()[0].getBoundingClientRect().bottom,n=Math.min(m("#regionFooter")[0].getBoundingClientRect().top,m(window).height()),Math.floor(n-t))),u.attr("aria-label",mejs.i18n.t("Close Playlist")).attr("label",mejs.i18n.t("Close Playlist"))):(l.hide(),u.attr("aria-label",mejs.i18n.t("Open Playlist")).attr("label",mejs.i18n.t("Open Playlist")))}1<g.tracks.length&&g.tracks[0].pub===g.tracks[1].pub&&(s=!1),m.each(g.tracks,function(e,t){var n,i=m('<li class="mediaTitle"/>'),a=m("<a/>");s&&((n=m("<p>")).html(t.pubName),n.appendTo(i)),a.html(t.title),a.data(this),a.on("click",function(e,t){w(!0),p(!1),l.find("li").removeClass("playing");var n=m(t.target);n.closest("li").addClass("playing");t=n.data(),n=t.url;n=n.split(":")[1],r.addEventListener("canplay",function e(){o.play(),r.removeEventListener("canplay",e)},!1),h.getDID()&&e.markers&&parseInt(h.getDID(),10)===e.markers.documentId&&C(e.pub,e.title);o.setSrc(n),o.load();try{setTimeout(function(){o.play()})}catch(e){}h.utilities.setCookie("audioLanguage",t.sym),h.utilities.setCookie("audioLanguageName",t.name),h.jumpHighlight.jumpToElement(function(e){e=e.match(/\d{3}/);return e=parseInt(e,10),m("[data-no="+e+"]")}(e.title))}.bind(this,t)),a.appendTo(i),d.push(i),1<g.languages.length&&((i=m('<li class="mediaLanguage"/>')).html(t.name),d.push(i))}),1<d.length||1==d.length&&h.isFallbackAudio?(i=m("<ul/>").append(d),l=m("<div/>").attr("id","playerplaylist").append(i).insertAfter("#mePlayerHolder"),p(a),e.append(c),n.hasPlaylist=!0):n.hasPlaylist=!1,r.addEventListener("play",function(){l&&0===l.find(".playing").length&&l.find("li").first().addClass("playing")},!1)},MediaElementPlayer.prototype.buildcontinuousplay=function(e,t,n,i){var a=this.options,o=m("<button/>").attr("aria-controls",this.id).singleclickortap(function(){var e="continuousPlay"+(h.utilities.audioContinuousPlayEnabled?"Off":"On"),t=document.createEvent("HTMLEvents");return t.initEvent(e,!0,!0),i.dispatchEvent(t)}),r=m("<div/>").addClass("mejs-button").addClass("mejs-continuousplay-button").append(o);function l(e){e?(r.removeClass("mejs-singleplay").addClass("mejs-continuousplay"),o.attr("aria-label",mejs.i18n.t("Disable Continuous Play")).attr("label",mejs.i18n.t("Disable Continuous Play")),h.enableFeature("audioContinuousPlay")):(r.removeClass("mejs-continuousplay").addClass("mejs-singleplay"),o.attr("aria-label",mejs.i18n.t("Enable Continuous Play")).attr("label",mejs.i18n.t("Enable Continuous Play")),h.disableFeature("audioContinuousPlay"))}(1===g.tracks.length&&h.audioAutoplay.canAutoplay||1<g.tracks.length)&&(0<m(".enableAutoAdvance").length||h.utilities.isBibleNav()||h.utilities.isPublicationNav())&&(l(h.utilities.audioContinuousPlayEnabled),t.append(r)),i.addEventListener("continuousPlayOn",function(){h.utilities.audioContinuousPlayEnabled=!0,l(h.utilities.audioContinuousPlayEnabled)},!1),i.addEventListener("continuousPlayOff",function(){h.utilities.audioContinuousPlayEnabled=!1,l(h.utilities.audioContinuousPlayEnabled)},!1),i.addEventListener("ended",function(){var e;h.utilities.audioContinuousPlayEnabled&&(a.hasPlaylist?setTimeout(function(){m("#playerplaylist").find(".playing").removeClass("playing").next().find("a").trigger("click")}):!h.audioAutoplay.canAutoplay||(e=m(".resultNavRight.enableAutoAdvance a").attr("href"))&&(e=new URI(e).addQuery("autoplay","yes"),h.loadPage(e.toString())))},!1)},(a=m("#wolplayer").mediaelementplayer({audioWidth:"100%",audioHeight:"100%",features:["playlist","playpause","progress","duration","continuousplay"],alwaysShowControls:!0})[0]).addEventListener("playing",function(){h.media.isPlayerPlaying=!0}),a.addEventListener("pause",function(){h.media.isPlayerPlaying=!1}),(1<t.tracks.length&&!h.utilities.isBibleNav()||h.isFallbackAudio)&&w(!1),h.isOldIE()||h.mediaMarker.initAudioMarkers(),"yes"===URI().query(!0).autoplay){a.autoplay=!0,a.addEventListener("canplay",function(e){b()});var e=document.createEvent("HTMLEvents");return e.initEvent("continuousPlayOn",!0,!0),a.player.media.dispatchEvent(e)}(h.audioPlayerVisible||h.utilities.isBibleNav()||h.utilities.isPublicationNav())&&b(),h.audioPlayerSetup=!0})}).fail(function(){p()})},n=new URI("").path("/wol/ls").addQuery("locale",h.getUILanguage()).addQuery("type","mediaelementPlayer"),h.web.getJSON(n.toString()).done(function(e){e.strings?t(e.strings):t(null)}).fail(function(){p()})}function C(t,n){var e=h.playlist,i=e.tracks.filter(function(e){return e.pub===t&&e.title===n});0<i.length?(h.audioMarkers=null!==i[0].markers,h.audioMarkerData=i[0].markers):1===e.tracks.length&&(h.audioMarkers=null!==e.tracks[0].markers,h.audioMarkerData=e.tracks[0].markers)}function w(e){m(".mejs-playpause-button button")[0].disabled=!e}function S(e){var t=m("#pubMediaServer");return null!=e&&-1===e.indexOf("undefined")&&0!==t.length&&0!==t[0].value.length}function k(){h.hasAudio&&m.each(m(".resultsNavigationSelected.documentLocation"),function(){m("<button/>").attr("id","audioPlayerSpeakerIcon").addClass("hasAudio").on("click",function(){b()}).append('<span class="icon"/>').appendTo(this)})}h.media={audioNavigationSetup:function(){if(function(){var e=h.getContentRsConfigSymbol()+":"+h.getContentLibrarySymbol(),t=h.getPubSym();if(e in n)if(-1===n[e].indexOf(t))return!1;return!0}()&&!1===h.audioPlayerSetup)try{new Audio&&Modernizr.audio&&(function(){{var e;h.isBibleDocument()?i():h.utilities.isBibleNav()&&m("#enableAudioPlayer").val()?function(){var e=h.parseBibleDocumentURL();e.book&&t(u(h.getAudioPubSym(),h.getContentLibraryLanguageSymbol(),e.book))}():h.isDocument()?g():h.utilities.isPublicationNav()&&m("#enableAudioPlayer").val()&&(e=h.getAudioPubSym(),0<Object.keys(s).length&&s.hasOwnProperty(e)?v(s[e]):function(){var n,i=[],e=h.getPubSym(),a=h.getAudioPubSym(),e=e in l?(m.each(l[e],function(e,t){n=u(t,h.getContentLibraryLanguageSymbol()),i.push(n)}),f(i)):f(n=u(a,h.getContentLibraryLanguageSymbol()));m.settle(e).then(function(e){var t,e=e.filter(function(e){return!(e instanceof Error)});1<e.length&&(t=e.filter(function(e){return e.pub===a}),m.each(e,function(e,t){t=d(t),s[t.tracks[0].pub]=t})),1===e.length&&(t=e),k(),t?v(d(t)):p()})}())}}(),function(){var e=URI().fragment(),t=!1;-1<e.indexOf("audio:")&&(t=!0);t&&!h.audioPlayerVisible&&h.isBibleDocument()&&i()}())}catch(e){}},showAudioPlayer:b,isPlayerPlaying:!1,initMedia:function(){"b"!==h.getCommand()&&"sybv"!==h.getCommand()&&"bsync"!==h.getCommand()||m.each(m(".altPub"),function(){var e,i,a=m(this),t=a.attr("data-audio-pub"),n=a.attr("data-lang");-1===m.inArray(t,["bi22","bi10","by","int","rh"])&&(e=h.parseBibleDocumentURL(),i=u(t,n,e.book,e.chapter),-1===m.inArray(i,o)&&S(i)&&h.web.ajax(i,{dataType:"json",cache:!0}).done(function(e,t,n){var i=m('<a href="'+a.attr("href")+'#audio:show" class="hasAudio"><span class="icon"> </span></a>');a.after(i)}).fail(function(e,t,n){o.push(i)}))})},removeAudioSetup:p,lastSelector:null,prepareGalleryCaptionAudio:function(){var t=m(".playPauseBtn"),e=m(".gallerySelectedItem"),n=e.data("docid");0<e.length&&null!=n&&-1!==n&&y(r().addQuery("docid",n).toString()).then(function(e){e=d(e);m("#galleryPlayer").attr("src",e.tracks[0].url).on("loadedmetadata",function(){m("#galleryPlayer").get(0).paused?t.removeClass("pauseBtn").addClass("playBtn"):t.removeClass("playBtn").addClass("pauseBtn")}),t.hasClass("hidden")&&t.removeClass("hidden").on("click",h.gallery.handlePlayPauseButton)}).fail(function(){t.removeClass("playBtn").removeClass("pauseBtn").addClass("hidden").off("click",h.gallery.handlePlayPauseButton)})}}}(jQuery,app),function(a,i){"use strict";var o,r,l,s,e="*[tabindex], *[contenteditable], a[href], area[href], button:not([disabled]), embed, iframe, input:not([disabled]), object, select:not([disabled]), textarea:not([disabled])";function u(){return r.find("*").filter(e).filter(":visible")}function c(e,t,n){l=t||!1,s=n||!1,d(),o=a(":focus"),(n=a("#modalUnderlayContainer")).fadeIn(100),a("#wrapper").attr("aria-hidden",!0),s?n.on("click",d):n.off("click"),n.on("focus.underlay",function(){u().first().focus()}),(r=e).first().addClass("modalDialog").attr("role","dialog").removeClass("hidden"),l&&a("#dialogContainer").append(r),r.on("keydown.accessbility",p);e=r.find("[autofocus]");(0<e.length?e:u().first()).focus()}function d(){var e;r&&!l&&r.addClass("hidden"),a("#dialogContainer").children().remove(),"function"==typeof i.modal.form.destroy&&i.modal.form.destroy(),i.modal.form={},r&&r.off(".accessbility"),(e=a("#modalUnderlayContainer")).fadeOut(100),a("#wrapper").attr("aria-hidden",!1),e.off(".underlay"),o&&(o.focus(),o=void 0)}function p(e){switch(e.which){case 9:var t=u(),n=a(":focus"),i=t.length,n=t.index(n);if(e.shiftKey){if(0===n)return t.get(i-1).focus(),!1}else if(n===i-1)return t.get(0).focus(),!1;break;case 27:return s&&d(),!1}}i.modal={form:{},setupModals:function(){window.addEventListener("beforeunload",function(){d()})},showForm:c,showModal:function(e,t,n){t=!t,n=n||!1,(e=new URI(e)).setQuery("locale",i.getUILanguage()),(t?i.web.ajax(e.toString()):a.ajax(e.toString()).fail(function(){window.location.reload()})).done(function(e){c(a(e),!0,n)})},removeModals:d}}(jQuery,app),function(m,h){"use strict";var d=null,f="#secondaryNavContent",y="#study",n=!1;function b(){var e=m(".articlePositioner");return!!e&&e.outerWidth()>=m(window).width()}function v(){m("#secondaryNavContent").off("scroll.disableBodyScrolling")}function C(){var i=null;m("#secondaryNavContent").on("scroll.disableBodyScrolling",function(e){var t=m("#secondaryNavContent");t.stop(!0,!1);var n=t.scrollTop(),t=m("#secondaryNav").height()-t.height()-t.scrollTop();return null===(i=0===n?t-1:i)&&(i=n+t-1),!1})}function a(e){var t=m("#secondaryNavContent"),n=m("#regionHeader"),i=m("#regionMain"),a=m("#regionFooter"),o=window.innerHeight||document.documentElement.clientHeight||m(window).height(),r=i.height(),i=r;return 0<t.length&&(i=o-n.outerHeight()-l(a)),r&&(i=r<i?r:i),"left"===e&&(i-=parseFloat(t.css("margin-bottom"))+parseFloat(t.css("padding-bottom"))),i<0?o:i}function l(e){var t=(e=m(e))[0].getBoundingClientRect(),n=m(window).scrollTop(),i=n+m("#regionHeader").height(),a=parseInt(m("#regionMain.hasVideoPlayer .articlePositioner").css("margin-top"),10);a&&(i=Math.max(i,n+a));e=n+(window.innerHeight||document.documentElement.clientHeight||m(window).height()),a=n+t.top,t=n+t.bottom;if(t<i||e<a)return 0;i=Math.max(a,i);return Math.min(t,e)-i}function w(e){var t,n=m("#secondaryNavContent"),i=m("#study, #studyWrapper");l(m("#regionFooter"));O(),null!=e&&"left"!==e||(t=a("left"),n.height(t)),null!=e&&"right"!==e||(t=a("right"),n=i.find(".navigationContents").find(".studyPane"),e=t-m(".navigationTabsContainer").outerHeight()-parseFloat(m(".studyPane").css("margin-top")),b()?i.height(t):i.height(m("#content").height()),n.height(e)),o(),O()}function S(e,t,n){var i,a,o,r,l,s,u,c=m("#regionMain, #videoWrapper"),d=m(".studyPaneToggle"),p=m(".secondaryNavToggle"),g=b();switch(e){case"right":i=y,a="left",o=d,r=p,l="showStudy",s="showSecondaryNav",u=!!m(".hasStudyPane").length;break;case"left":default:i=f,a="right",o=p,r=d,l="showSecondaryNav",s="showStudy",u=!!m(".hasSecondaryNav").length}null==t&&(t=0<m("."+l).length),u&&t?(c.removeClass(s),r.removeClass("expanded"),c.addClass(l),o.addClass("expanded")):(g||c.removeClass(l),o.removeClass("expanded")),g?t?(S(a,!1,!0),function(e){e=m("#regionMain").find(e);return 0<e.length&&(function(){var e=m("#underlayContainer");e.on("pointerdown",function(){x(!1)}),e.fadeIn(100),m("body").addClass("slideInUnderlay noscroll")}(),e.addClass("slideIn"),!0)}(i)&&C()):(x(n),v()):this&&this.recurseing||!u||S.bind({recurseing:!0})(a,!t),t&&(m(".activePane").removeClass("activePane"),m(i).addClass("activePane")),w(e),k(),h.documentMenu.positionMenu(),h.url.matchUrlToStudyPane()}function o(){var e=document.getElementById("secondaryNavContent");!e||0<(e=e.clientWidth)&&m("#secondaryNav, #secondaryNav .navigationContents").css("width",e+"px")}function t(){var e=m("#underlayContainer");e.fadeOut(100),e.off("pointerdown",t),m("body.slideInUnderlay").removeClass("slideInUnderlay noscroll")}function k(){var e=0<m(f).closest(".slideIn").length,t=0<m(y).closest(".slideIn").length,n=b();n||(e=e||0<m(".showSecondaryNav").length,t=t||0<m(".showStudy").length);var i=m(".secondaryNavToggle"),a=m(".studyPaneToggle");e?i.addClass("expanded"):i.removeClass("expanded"),t?a.addClass("expanded"):a.removeClass("expanded"),n||x(!1)}function x(e){e||t();e=m("#regionMain");e.find(f).removeClass("slideIn"),e.find(y).removeClass("slideIn"),b()&&(m(".studyPaneToggle").removeClass("expanded"),m(".secondaryNavToggle").removeClass("expanded")),h.url.matchUrlToStudyPane(),h.documentMenu.positionMenu()}function p(e){for(var t in e)if(e.hasOwnProperty(t)&&void 0!==e[t])return!0;return!1}function r(e){var t,n,i,a,o,r,l,s,u,c;0!==e.length&&(null!==d&&window.clearTimeout(d),t=m(".scrollPositionDisplay"),s="",2===(n=(e=e.toString()).split(":")).length&&(i=n[0].split("-"),a=n[1].split("-")),o=e.split("-"),r=e.split("-"),p(s=h.utilities.getScrollPositionFormatStrings())&&(h.isBibleBookDocument()?2===n.length&&(n[0]===n[1]?t.html(s.bibleDocumentNavigationChapterVerseFormat.replaceToken(wolConstants.TOKENS_BibleChapter,i[0]).replaceToken(wolConstants.TOKENS_BibleVerse,i[1])):i[0]===a[0]?0!==s.bibleDocumentNavigationSingleChapterManyVerseFormat.length?t.html(s.bibleDocumentNavigationSingleChapterManyVerseFormat.replaceToken(wolConstants.TOKENS_StartingBibleVerse,i[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,a[1])):t.html(s.bibleDocumentNavigationChapterManyVerseFormat.replaceToken(wolConstants.TOKENS_BibleChapter,i[0]).replaceToken(wolConstants.TOKENS_StartingBibleVerse,i[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,a[1])):t.html(s.bibleDocumentNavigationChapterVerseRangeFormat.replaceToken(wolConstants.TOKENS_StartingBibleChapter,i[0]).replaceToken(wolConstants.TOKENS_EndingBibleChapter,a[0]).replaceToken(wolConstants.TOKENS_StartingBibleVerse,i[1]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,a[1]))):h.isBibleDocument()?1===o.length||2===o.length&&o[0]===o[1]?(l=""===s.bibleDocumentNavigationChapterVerseFormat?s.bibleDocumentNavigationSingleChapterSingleVerseFormat:s.bibleDocumentNavigationChapterVerseFormat,t.html(l.replaceToken(wolConstants.TOKENS_BibleVerse,o[0]))):(l=""===s.bibleDocumentNavigationChapterManyVerseFormat?s.bibleDocumentNavigationSingleChapterManyVerseFormat:s.bibleDocumentNavigationChapterManyVerseFormat,t.html(l.replaceToken(wolConstants.TOKENS_StartingBibleVerse,o[0]).replaceToken(wolConstants.TOKENS_EndingBibleVerse,o[1]))):1===r.length?t.html(s.documentNavigationSinglePagePositionFormat.replaceToken(wolConstants.TOKENS_PageNumber,r[0])):t.html(s.documentNavigationMultiplePagesPositionFormat.replaceToken(wolConstants.TOKENS_StartingPageNumber,r[0]).replaceToken(wolConstants.TOKENS_EndingPageNumber,r[1]))),""===e&&""!==(e=h.getDocumentDescriptionSubstitute())&&t.html(e),u=m(".navPosition"),c=m(".resultNavControls, .studyPaneToggle, .secondaryNavToggle, .pubNavTitle"),null==t.data("lastShowOffset")&&t.data("lastShowOffset",window.pageYOffset),null==d&&u.is(":visible")||t.data("lastShowOffset")===window.pageYOffset||(void 0===e?(t.html(""),u.hide()):""!==e&&(u.hasClass("hidden")&&u.hide().removeClass("hidden"),Modernizr.opacity?u.fadeIn(100):u.show(),b()&&(c.hide(),d=window.setTimeout(function(){Modernizr.opacity?u.fadeOut(500,function(){c.css("display",""),u.css("display",""),d=null,t.data("lastShowOffset",window.pageYOffset)}):(c.css("display",""),u.css("display",""),d=null,t.data("lastShowOffset",window.pageYOffset))},2e3)))))}function s(e,t,n){e=h.localizeNumber(e),n=h.localizeNumber(n);var i=e;void 0!==i&&(e!==n&&(i+="-"+n),r(i))}function u(){r("")}function i(e,t,n){var i=m(".article").offset().top,a=m(window).scrollTop()+i,o=a+m(window).height()-i,a=function(e,t,n){for(var i=0,a=e.length;i<a;){var o=i+a>>>1;n(e[o])<t?i=1+o:a=o}return i}(e,a,n);t&&0<a&&a--;var r=[];if(a<e.length){r.push(a);for(var l=a+1;l<e.length&&!(o<=n(e[l]));l++)r.push(l)}return r}var c,g=(c=m("span[id^=v]"),function(){var e=i(c,!1,function(e){return m(e).offset().top});if(e.length)return{first:A(c[e[0]].id),last:1<e.length?A(c[e[e.length-1]].id):void 0}});function A(e){return e=(h.utilities.isContentLibraryHTML5()?/v\d+-(\d+)-(\d+)/:/dcv_(\d+)_(\d+)/).exec(e),{chapter:Number(e[1]),verse:Number(e[2])}}var P,T=(P=m("[id^=page]"),function(){var e=i(P,!0,function(e){return I(m(e))});if(e.length){var t=e.map(function(e){return P[e]}).sort(function(e,t){return e=parseInt(e.attributes["data-no"].value,10),t=parseInt(t.attributes["data-no"].value,10),e<t?-1:t<e?1:0});return{first:E(t[0]),last:1<e.length?E(t[t.length-1]):void 0}}});function I(e){for(var t=e,n=!t.is(":visible");n;)n=(t=t.parent()).length&&!t.is(":visible");return t&&0<t.length?t.offset().top:0}function E(e){var t=m(e),e=Number(t.data("no"));return{top:I(t),pageNum:e,displayText:t.data("beforeText")}}var L,R=(L=m("p[data-pid]"),function(){var e=i(L,!0,function(e){return t=m(e),(e=!((e=t).is(":visible")||(e=e.next()).offset()||(e=t.prev()).offset())?t.parent():e).offset().top-m(".content").offset().top;var t});if(e.length)return e});function e(){var e,t,n,i=g();i?(t=i.first,n=i.last||t,h.isBibleDocument()?s(t.verse,t.verse,n.verse,n.verse):h.isBibleBookDocument()&&(e=t.verse,i=t.chapter,t=n.verse,n=n.chapter,e=h.localizeNumber(e),i=h.localizeNumber(i),t=h.localizeNumber(t),r(i+"-"+e+":"+(n=h.localizeNumber(n))+"-"+t))):u()}function M(){var e,t=T();t?(e=t.first,n=t.last||e,s(e.pageNum,e.displayText,n.pageNum,n.displayText)):u();var n=R();n?function(e){for(var t=[],n=0;n<e.length;n++){var i='p[data-pid="'+e[n]+'"]',a=m(i).data("relPid");if(a)for(var o=0;o<a.length;o++){var r=Number(a[o]);-1===m.inArray(r,t)&&t.push(r)}}var l=m("#questionContainer");l.width(m(".article").outerWidth(!0));var s=l.find("ul");s.empty();for(var u=0;u<t.length;u++){var c='p[data-pid="'+t[u]+'"]',c=m(".contentContainer").find(c);s.append('<li><p class="qu">'+c.text()+"</p></li>")}}(n):(m("#questionContainer").hide("slow"),m("#questionContainer").find("ul").empty())}function D(){h.isBibleDocument()||h.isBibleBookDocument()?e():h.isDocument()&&M()}function O(){var e=m("#toolbarFrame");"absolute"===e.css("position")&&e.css("margin-top",0),h.documentMenu.positionMenu()}h.pubsub=m(),h.setupTooltip=function(d){d.pointLink(function(e,n,t){var i=t.target;function a(){var e=m(".tooltip .tooltipVideo");(e=1<e.length?e.filter(":visible"):e).each(function(e,i){(i=m(i)).bind("videoResize",function(){var e,t,n;e=i.closest(".tooltip"),t=e.closest(".tooltipContainer"),n=t[0].getBoundingClientRect().top,e=e.height()+32,(e=m(window).height()-e)<n&&(e<0&&(e=0),e+=m(window).scrollTop(),t.css("top",e+"px"))}),h.video.setupTooltipPlayer(i.attr("id"),parseFloat(i.data("startTime")),parseFloat(i.data("duration")),0===e)})}function o(e){var t;c||(t=m(e),e="rtl"===d.closest("[dir]").attr("dir"),u+=e?" dir-rtl":" dir-ltr",t.wolTooltip(n.x,n.y,u,{rtl:e,complete:function(){h.highlightManager.enabled=!0,h.video.destroyPlayers()},target:i}),h.highlightManager.enabled=!1,function(e){var t;switch(URI().segment(2)){case"dsync":case"bsync":case"dtsync":t=e.find("a")}t&&t.attr("target","_blank")}(t))}var r,l=URI(e),s=l.fragment(),u="tooltip",c=!1;s?s&&t._clickorhoverlink_FromTouch&&h.loadPage(l):(r=e.replace(/\/[\w-]+\/wol\//,"/wol/"),"rslink"===l.segment(1)&&(r+="&format=json"),t._clickorhoverlink_FromTouch||m(i).one("pointerout.tooltip",function(){c=!0}),e=250,t._clickorhoverlink_FromTouch&&(e=0),window.setTimeout(function(e){c||h.web.getJSON(r).done(function(e){var n,e=((e=null==(e=e).items?{items:[e]}:e).tooltipContentErrorMessage=m("#tooltipContentErrorMessage").val(),e=Handlebars.templates.Tooltip(e),e=h.transcribeUreLinks(e));e&&!c&&(o(e),(n=m(".tooltip .alternatePresentation .lightbox")).on("load",function(){var e=m(".tooltip .alternatePresentation .option");e.addClass("loaded");var t=h.images.setupLightboxItems(n);m(e).on("click",this,function(){return h.images.callLightbox(this,t),!1})}),a())}).fail(function(e){t._clickorhoverlink_FromTouch&&h.loadPage(l)})},e))},function(e){var t=URI(e),n=URI().host()===t.host(),i=t.segment(2),e=URI().directory()===t.directory();return""!==t.path()&&n&&!e&&"ml"!==i&&"mp"!==i&&"stringsreader"!==i})},h.calcMaxHeight=a,h.contentScrollHandler=D,h.layout={applyFontSize:function(){var e,t=h.fontSizeManager.getScale();t&&(e=document.getElementById("scalableui").sheet).insertRule(".scalableui{font-size:"+100*t+"%;}",e.cssRules.length),m(window).trigger("resize")},setupStudyPaneCollapse:function(){var n=m(".studyPaneToggle");n.on("click",function(){n.toggleClass("expanded");var e=n.hasClass("expanded"),t=e?"yes":"no";h.layout.toggleStudyPane(e),h.utilities.setCookie("showStudy",t)})},toggleStudyPane:function(e){S("right",e)},toggleSecondaryNav:function(e){S("left",e)},toggleSidePane:S,toggleNavigation:function(){var e,t;!m("#secondaryNavContent").is(":visible")||n?(e=m("#secondaryNavContent"),t=e.prop("scrollHeight")>e.height(),e.is(":visible")&&t&&w("left")):x(!1)},applyStudyPaneCollapse:function(){var e="yes"===(e=null==(e=h.utilities.getCookie("showStudy"))?"yes":e);b()||h.layout.toggleStudyPane(e)},setupSecondaryNavToggle:function(){var t=m(".secondaryNavToggle");t.on("click",function(){t.toggleClass("expanded");var e=t.hasClass("expanded");h.layout.toggleSecondaryNav(e)})},contentPositionAdjuster:O,toggleReferenceSymbols:function(){m("body").toggleClass("hideReferenceSymbols")},pixelsScrolledIntoView:l,setupSecondaryNav:function(){w("left")},setupSyncLinks:function(){var e;switch(h.getCommand()){case"dsync":e=m("#regionMain a, #resultNavigation a");break;case"bsync":e=m("#regionMain a, #documentNavigation .nav a");break;case"dtsync":e=m("#contentOnly a")}e&&e.attr("target","_blank")},displaySyncState:function(){switch(h.getCommand()){case"dsync":case"bsync":case"dtsync":m("#menuSynchronize").addClass("synchronizeBackgroundColor"),m("#menuSynchronizeSwitch").addClass("synchronizeBackgroundColor")}},setupScrollHandler:function(){var e;m(window).on("scroll",function(){D(),h.mediaMarker.autoScrollEnabled=!1}),m(window).on("scroll",function(){clearTimeout(e),e=setTimeout(function(){var e,t;h.documentMenu.positionMenu(),e=m("#secondaryNavContent"),t=m("#study"),(0<e.length||0<t.length||b())&&(e.is(":visible")||t.is(":visible"))&&w()},100)})},setupResizeHandler:function(){var e;m(window).on("resize orientationchange",function(){clearTimeout(e),e=setTimeout(function(){w(),h.menu.repositionConvenienceChars(),h.menu.repositionSuggestionList(),k()},100)})},setupKeymapping:function(){m(document).on("keydown",function(e){118===e.keyCode&&h.menu.getActiveSearchControl().find(".searchField").trigger("focus")})},setupCSSAnimationHandler:function(){m("#secondaryNavContent").on("transitionend",function(e){o()}),m(".articlePositioner").on("transitionend",function(e){"margin-left"!=e.originalEvent.propertyName&&"margin"!=e.originalEvent.propertyName||h.documentMenu.positionMenu()})},setupNextSearchHitButton:function(){0<m(".mk, .mkhl").length&&m("#menuSearchHitNext").removeClass("hidden").show()},disableBodyScrolling:C,enableBodyScrolling:v,sideBarSizing:w,calcHeaderHeight:function(){var e=m("#regionHeader");return parseFloat(e.height())},setupLibraryColor:function(){var e=m("#userStatus"),t=e.data("libraryColor");null!=t&&""!==t&&e.css("background-color",t).addClass("private")},isFloatingMode:b,hasTokenizedString:p}}(jQuery,app),function(n,i){"use strict";function a(e){n(".active").removeClass("active");var t=n(e).data("relatedContent"),t=n("#"+t),e=n(e);t.addClass("active"),e.addClass("active"),i.url.matchUrlToStudyPane()}i.tabs={activateContent:a,wireTabs:function(e){e.each(function(e,t){n(t).on("click",function(){return a(this),!1})})}}}(jQuery,app),function(l){app.scrollHandler={activateSubheadingTracking:function(){l("#subheadings a").each(function(e,t){var i,a,n,o;t=l(t.hash),i=l("#secondaryNavContent"),a=l("#regionHeader"),n=parseFloat(l("#regionMain").css("margin-top")),o=l(window).height(),t.waypoint(function(e){var t,n;l(".middleParagraph").removeClass("middleParagraph"),null!=(t="down"===e?this:this.previous())&&(n=l(t.element).data("pid"),l("[href$=p"+n+"]").parent().addClass("middleParagraph"),e=i.get(0).getBoundingClientRect(),n=(t=l(".middleParagraph").get(0).getBoundingClientRect()).top-a.height(),e=t.bottom-e.bottom,n<=0&&i.scrollTop(i.scrollTop()+n),0<e&&i.scrollTop(i.scrollTop()+e))},{offset:"50%",group:"midTop"}),t.waypoint(function(e){l("[href$=p"+l(this.element).data("pid")+"]").parent().toggleClass("visibleParagraph","down"===e)},{offset:function(){return o},group:"parDown"}),t.waypoint(function(e){var t=this.previous();null!=t&&l("[href$=p"+l(t.element).data("pid")+"]").parent().toggleClass("visibleParagraph","up"===e)},{offset:function(){return n-this.element.getBoundingClientRect().height},group:"parUp"})})},activateVerseTracking:function(){var t=l(".verseItem");t.each(function(e){l(t[e].hash).waypoint(function(e){l(".verseItem[href=#"+this.id+"]").toggleClass("activeVerse","up"===e)},{offset:function(){return-l(this).height()+parseFloat(l("#regionMain").css("margin-top"))}}).waypoint(function(e){l(".verseItem[href=#"+this.id+"]").toggleClass("activeVerse","down"===e)},{offset:"100%"})})},addBottomPadding:function(e){try{var t=l(e[0].hash),n=l("#regionFooter"),i=l("#article"),a=l("#regionHeader"),o=n.offset().top-t.offset().top,r=(window.innerHeight||document.documentElement.clientHeight||l(window).height())/2+a.outerHeight();o<r&&i.css("padding-bottom",r-o)}catch(e){}}}}(jQuery),function(u,c){"use strict";function d(e,t,n,i,a){var o=t,r=["toggle"],t=e?"":" disabled";e||r.push("disabled"),i&&r.push(i);n=u('<li class="'+r.join(" ")+'"><input type="checkbox"'+t+">"+n+'<span class="icon"></span></li>');return e&&n.find("input").prop("checked",o).end().on("click",function(e){a(o=!o),u(this).find("input").prop("checked",o),e.stopPropagation()}),n}function p(){var e,t,n,i,a,o,r,l,s=u("#documentMenuButton");0<s.length&&(e=u(".documentMenu"),t=u(".articlePositioner"),n=s.outerWidth(),r=s.outerHeight(),l=i=0,o=u("#regionFooter"),a=window.innerHeight||document.documentElement.clientHeight||u(window).height(),o=Math.min(a-c.layout.pixelsScrolledIntoView(o),o[0].getBoundingClientRect().top)-n-8,s.css("top",o+"px"),e.css("top",o-e.height()-r/2),r=(t=0===t.length?u("#article"):t)[0].getBoundingClientRect(),l=c.isContentLibraryRTL()&&0<r.width?i=t.offset().left+8:(i=r.right-n-8)-e.width()+8,e.css("left",l+"px"),s.css("left",i+"px"))}c.documentMenu={makeDocumentMenu:function(){var e=new URI("/wol/ls");e.setQuery("locale",c.getUILanguage()).setQuery("type","documentOptions").setQuery("wtlocale",c.getContentLibraryLanguageSymbol()),c.web.getJSON(e.toString()).done(function(e){var t,n,i,a,o,r,l,s;e.strings&&(t=u("#content"),n=u('<ul class="documentMenu dropShadow20"></ul>'),c.utilities.currentDocumentRubyAvailable()&&n.append(d(c.utilities.enableRubyDocumentMenu(),c.utilities.showRubyOnForPage(),e.strings.showRubyText,e.classes.showRubyText,function(e){e?c.enableFeature("rb"):c.disableFeature("rb"),c.net.redirectForRuby()})),c.isDocument()&&(window.ClientComponents?u(".pageNum").show():n.append(d(!0,!1,e.strings.pageNumbers,null,c.togglePageNo))),c.isBibleDocument()&&n.append(d(!0,!0,e.strings.referenceSymbols,null,c.layout.toggleReferenceSymbols)),c.hasDocumentContent()&&n.append((a=!0,o=e.strings.fontSize,r=null,l=function(e){(e<0&&c.fontSizeManager.decrement()||0<e&&c.fontSizeManager.increment())&&(c.layout.applyFontSize(),c.utilities.updateFontSize(!0))},e=["spin"],s=a?"":" disabled",a||e.push("disabled"),r&&e.push(r),u('<li class="'+e.join(" ")+'">'+o+'<span class="spinContainer"><button id="fontSizeSmaller"'+s+'><span class="icon"></span></button><button id="fontSizeLarger"'+s+'><span class="icon"></span></button></span></li>').find("#fontSizeSmaller").on("click",function(){l(-1)}).end().find("#fontSizeLarger").on("click",function(){l(1)}).end().on("click",function(e){e.stopPropagation()}))),0<n.children().length&&(i=function(){n.hide(),u(document).off("click"),c.highlightManager.enabled=!0},s=u('<div id="documentMenuButton" class="documentMenuIcon documentMenuActivator"><span class="icon"></span></div>').appendTo(t),c.utilities.currentDocumentRubyAvailable()&&s.append('<span class="rubyIndicator showRuby-'+c.getContentLibraryLanguageSymbol()+'"></span>'),u(".documentMenuActivator").on("click",function(e){n.is(":visible")?i():(n.show(),u(document).on("click",i),c.highlightManager.enabled=!1),e.stopPropagation()}),n.appendTo(t),p()))})},positionMenu:p}}(jQuery,app),function(s,u){var r=!0,l="hl",c="inserted",d="dimmed",p='<span class="'+d+" "+c+'">',g="</span>";s(p+g);function i(){return s("#article").find("."+l)}function m(){s("#article").addClass(d)}function a(e){var t=s("#"+h(e));return 0<t.length?u.isBibleDocument()&&!e?u.getVerseNumberFromIDAttribute(t.attr("id")):u.getParagraphIDFromIDAttribute(t.attr("id")):null}function h(e){return u.utilities.getFirstActionableIdInScope(e,i())}function f(e){if(e instanceof jQuery)return e;if(e){var t=s("body").find(e);return t=0===(t=0===t.length&&("string"==typeof e||"number"==typeof e)?s("#article").find("[data-pid="+e+"]"):t).length&&("string"==typeof e||"number"==typeof e)?s("#"+e):t}return s()}function y(e){var t,n;r&&((t=s("."+d+"."+c)).contents().unwrap(),(n=s("."+l)).removeClass(l),(0<t.length||0<n.length)&&!e&&((e=s.Event("textunhighlighted")).$items=t.add(n),s(document).trigger(e)),s("#article").removeClass(d),s("."+d).removeClass(d))}function b(e){e=f(e);return 0<e.closest("."+l).length+e.find("."+l).length}function v(e,t){var n,i,a,o;e.constructor===String&&-1!==e.indexOf("=")?(n=URI("#"+e.replace(/^#*/,"")),(i=u.url.getHighlightTextRangeFromUrl(n))?u.highlightManager.highlightParagraphTextRange(i.stPar,i.stOff,i.edPar,i.edOff,!0):0<(a=u.url.getVersesFromUrl(n)).length&&u.highlightManager.highlightElems(a)):(a=f(e),r&&(e=a.closest("[id^=v]"),a=a.closest("[data-pid]"),o=0<e.length?(e=e.attr("id"),w(u.utilities.getAllVerseSegmentsFromIDAttribute(e),0,Number.MAX_VALUE,!0)):(o=a.data("pid"),w(s("#p"+o),0,Number.MAX_VALUE,!0)))),m(),t&&t(),o&&s(document).trigger(o)}function C(i,e,a,t,n){i<a&&0===t&&(a--,t=Number.MAX_VALUE);var o=s("#article").find("[data-pid]");0===o.filter("[data-pid="+i+"]").length&&(e=0),0===o.filter("[data-pid="+a+"]").length&&(t=Number.MAX_VALUE);var r=!1,l=s();return o.each(function(e,t){var n=s(t).data("pid");if((r=n===i?!0:r)&&(l=l.add(t)),n===a)return!1}),w(l.filter(function(e,t){return 0===s(t).parent().closest("[data-pid]").length}),e,t,n)}function w(n,i,a,e){n.each(function(e,t){t=s(t);0===e?e===n.length-1?0===i&&a===Number.MAX_VALUE||(t.insertTag(0,i,p,g,d),t.insertTag(a,Number.MAX_VALUE,p,g,d)):0!==i&&t.insertTag(0,i,p,g,d):e===n.length-1&&0<a&&a!==Number.MAX_VALUE&&t.insertTag(a,Number.MAX_VALUE,p,g,d),t.addClass(l)}),n.length&&m();var t=function(e){var t;function n(e,t){return s.contains(document.body,t)}t=e.find("."+l).addBack("."+l);for(var i=0;i<t.length;i++){var a,o,r=!1;(r=null!=s(t[i]).data("pid")?!0:r)||(a=s(t[i]).parent(),o=a.text().replace(/ /g,"").length,r=a.find("."+l).text().replace(/ /g,"").length,o===r&&(0<(r=a.find("."+d+"."+c)).length&&r.contents().unwrap(),a.addClass(l),a.find("*").removeClass(l),t=t.add(a).filter("."+l).filter(n),i--))}return t}(n);if(0<t.length){var o=s.Event("texthighlighted");if(o.$items=t,e)return o;s(document).trigger(o)}}u.highlightManager={removeHighlight:y,highlightParagraphTextRange:C,highlightElems:function(e){w(s(e),0,Number.MAX_VALUE)},highlightBibleVerseAsync:function(e,t){var n=(r="b"===u.getCommand())?u.getRsConfigSymbol():u.getContentRsConfigSymbol(),i=r?u.getLibrarySymbol():u.getContentLibrarySymbol(),a=u.getPubSym(),o=(u.getLangSym(),u.getPubYear(),u.getBookNumber()),r=u.getChapterNumber(),e=sprintf("/wol/bvr/%s/%s/%s/%s/%s/%s",n,i,a,o,r,e);u.web.getJSON(e).done(function(e){y(),C(e.begin_paragraph_id,e.begin_text_offset,e.end_paragraph_id,e.end_text_offset),t&&t()})},isHighlighted:b,highlight:v,toggleHighlight:function(e,t){var n,i,a,o,r,l=f(e);b(l=(e=(l=f(e=l)).closest("[id^=v]"),l=l.closest("[data-pid]"),0<e.length?e:l))?y(!1):(i=h(n=!1),a=l.attr("id"),null!=l.attr("data-pid")?r=s("[data-pid]").map(function(e,t){return t.id}):(r=s("[id^=v].v").map(function(e,t){return t.id}),i&&(a=u.utilities.getAllVerseSegmentsFromIDAttribute(a).get(-1).id)),0===s("#userTextRangeHighlight").length&&(i=null),y(!0),null==i?v(a):(o=s(),s.each(r,function(e,t){if((n=t===i?!0:n)&&(o=o.add(f(t))),t===a)return!1}),(r=w(o,0,Number.MAX_VALUE,!0))&&s(document).trigger(r))),t&&t()},enabled:r,getFirstHighlightedId:h,getFirstHighlightedIdNumber:a,hasHighlight:function(){return null!==h()},getHighlightUrlFragment:function(e){var t,n;return a(e)?(u.isBibleDocument()&&!e?(t="v="+(n=i().closest(".v").add(i().find(".v")).add(i().filter(".v")).map(function(e,t){return u.getBookNumberFromIDAttribute(t.id)+":"+u.getChapterNumberFromIDAttribute(t.id)+":"+u.getVerseNumberFromIDAttribute(t.id)}).get())[0],1<n.length&&(t+="-"+n.pop())):(t="h="+(n=i().closest("[data-pid]").map(function(e,t){return u.getParagraphIDFromIDAttribute(t.id)}).get())[0],1<n.length&&(t+="-"+n.pop())),t):null},getHighlightedElements:i,highlightUrlFragment:function(){var e=u.url.getHighlightTextRangeFromUrl();e?(u.highlightManager.highlightParagraphTextRange(e.stPar,e.stOff,e.edPar,e.edOff,!0),u.highlightManager.getFirstHighlightedId()||u.url.removeUrlFragmentByKey("h",null,!0,!1)):u.url.removeUrlFragmentByKey("h",null,!0,!1),0<(e=window.location.hash).length&&((t=u.getVerseNumberFromIDAttribute(e))&&u.highlightManager.highlightElems(u.utilities.getFirstIdMatchingVerseNumber(t)));var t=u.url.getVersesFromUrl();0<t.length?(u.highlightManager.highlightElems(t),u.highlightManager.getFirstHighlightedId()||u.url.removeUrlFragmentByKey("v",null,!0,!1)):u.url.removeUrlFragmentByKey("v",null,!0,!1)},setupHighlightDismiss:function(){s("#article").click(function(e){0<f(s(e.target)).closest("."+l).length||y(!1)})}}}(jQuery,app),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";return function(g,n,e,t){var m={features:null,bind:function(e,t,n,i){var a=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var o=0;o<t.length;o++)t[o]&&e[a](t[o],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){t=document.createElement(t||"div");return e&&(t.className=e),t},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){m.bind(e,t,n,!0)},removeClass:function(e,t){t=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(t," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){m.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(m.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(n&&e.hasOwnProperty(i)||(e[i]=t[i]))},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(m.features)return m.features;var e,t,n=m.createEl().style,i="",a={};a.oldIE=document.all&&!document.addEventListener,a.touch="ontouchstart"in window,window.requestAnimationFrame&&(a.raf=window.requestAnimationFrame,a.caf=window.cancelAnimationFrame),a.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,a.pointerEvent||(e=navigator.userAgent,!/iP(hone|od)/.test(navigator.platform)||(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))&&0<t.length&&1<=(t=parseInt(t[1],10))&&t<8&&(a.isOldIOSPhone=!0),t=(t=e.match(/Android\s([0-9\.]*)/))?t[1]:0,1<=(t=parseFloat(t))&&(t<4.4&&(a.isOldAndroid=!0),a.androidVersion=t),a.isMobileOpera=/opera mini|opera mobi/i.test(e));for(var o,r,l,s=["transform","perspective","animationName"],u=["","webkit","Moz","ms","O"],c=0;c<4;c++){for(var i=u[c],d=0;d<3;d++)o=s[d],r=i+(i?o.charAt(0).toUpperCase()+o.slice(1):o),!a[o]&&r in n&&(a[o]=r);i&&!a.raf&&(i=i.toLowerCase(),a.raf=window[i+"RequestAnimationFrame"],a.raf&&(a.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]))}return a.raf||(l=0,a.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),i=window.setTimeout(function(){e(t+n)},n);return l=t+n,i},a.caf=function(e){clearTimeout(e)}),a.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m.features=a}};m.detectFeatures(),m.features.oldIE&&(m.bind=function(e,t,n,i){t=t.split(" ");for(var a,o=(i?"detach":"attach")+"Event",r=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(a=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+a])return!1}else n["oldIE"+a]=r;e[o]("on"+a,n["oldIE"+a])}else e[o]("on"+a,n)});var h=this,f={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};m.extend(f,t);function i(){return{x:0,y:0}}function a(e,t){m.extend(h,t.publicMethods),Ge.push(e)}function r(e){var t=Wt();return t-1<e?e-t:e<0?t+e:e}function o(e,t){return et[e]||(et[e]=[]),et[e].push(t)}function y(e){var t=et[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(h,n)}}function c(){return(new Date).getTime()}function b(e){Be=e,h.bg.style.opacity=e*f.bgOpacity}function l(e,t,n,i,a){(!Xe||a&&a!==h.currItem)&&(i/=(a||h.currItem).fitRatio),e[le]=G+t+"px, "+n+"px"+J+" scale("+i+")"}function d(e,t){var n;!f.loop&&t&&(n=q+(Ze.x*We-e)/Ze.x,t=Math.round(e-Ct.x),(n<0&&0<t||n>=Wt()-1&&t<0)&&(e=Ct.x+t*f.mainScrollEndFriction)),Ct.x=e,it(e,Q)}function s(e,t){var n=wt[e]-Ke[e];return qe[e]+je[e]+n-t/Y*n}function v(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)}function u(e){e.x=Math.round(e.x),e.y=Math.round(e.y)}function p(e,t){return e=Gt(h.currItem,ze,e),t&&(De=e),e}function C(e){return(e=e||h.currItem).initialZoomLevel}function w(e){return 0<(e=e||h.currItem).w?f.maxSpreadZoom:1}function S(e,t,n,i){return i===h.currItem.initialZoomLevel?(n[e]=h.currItem.initialPosition[e],!0):(n[e]=s(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))}function k(e){var t="";f.escKey&&27===e.keyCode?t="close":f.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,h[t]()))}function x(e){e&&(Te||Pe||Ne||Se)&&(e.preventDefault(),e.stopPropagation())}function A(){h.setScrollOffset(0,m.getScrollY())}function P(e){rt[e]&&(rt[e].raf&&de(rt[e].raf),lt--,delete rt[e])}function T(e){rt[e]&&P(e),rt[e]||(lt++,rt[e]={})}function I(){for(var e in rt)rt.hasOwnProperty(e)&&P(e)}function E(e,t,n,i,a,o,r){var l,s=c();T(e);var u=function(){if(rt[e]){if(l=c()-s,i<=l)return P(e),o(n),void(r&&r());o((n-t)*a(l/i)+t),rt[e].raf=ce(u)}};u()}function L(e,t){return ft.x=Math.abs(e.x-t.x),ft.y=Math.abs(e.y-t.y),Math.sqrt(ft.x*ft.x+ft.y*ft.y)}function R(e,t){return Pt.prevent=!At(e.target,f.isClickableElement),y("preventDragEvent",e,t,Pt),Pt.prevent}function M(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t}function D(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)}function O(){var e=Qe.y-h.currItem.initialPosition.y;return 1-Math.abs(e/(ze.y/2))}function N(e){for(;0<Et.length;)Et.pop();return se?(_e=0,gt.forEach(function(e){0===_e?Et[0]=e:1===_e&&(Et[1]=e),_e++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(Et[0]=M(e.touches[0],Tt),1<e.touches.length&&(Et[1]=M(e.touches[1],It))):(Tt.x=e.pageX,Tt.y=e.pageY,Tt.id="",Et[0]=Tt),Et}function F(e,t){var n,i,a,o=Qe[e]+t[e],r=0<t[e],l=Ct.x+t.x,s=Ct.x-mt.x,u=o>De.min[e]||o<De.max[e]?f.panEndFriction:1,o=Qe[e]+t[e]*u;if((f.allowPanToNext||$===h.currItem.initialZoomLevel)&&(Oe?"h"!==Fe||"x"!==e||Pe||(r?(o>De.min[e]&&(u=f.panEndFriction,De.min[e],n=De.min[e]-qe[e]),(n<=0||s<0)&&1<Wt()?(a=l,s<0&&l>mt.x&&(a=mt.x)):De.min.x!==De.max.x&&(i=o)):(o<De.max[e]&&(u=f.panEndFriction,De.max[e],n=qe[e]-De.max[e]),(n<=0||0<s)&&1<Wt()?(a=l,0<s&&l<mt.x&&(a=mt.x)):De.min.x!==De.max.x&&(i=o))):a=l,"x"===e))return void 0!==a&&(d(a,!0),Ee=a!==mt.x),De.min.x!==De.max.x&&(void 0!==i?Qe.x=i:Ee||(Qe.x+=t.x*u)),void 0!==a;Ne||Ee||$>h.currItem.fitRatio&&(Qe[e]+=t[e]*u)}function U(e){var t;"mousedown"===e.type&&0<e.button||(Qt?e.preventDefault():ke&&"mousedown"===e.type||(R(e,!0)&&e.preventDefault(),y("pointerDown"),se&&((t=m.arraySearch(gt,e.pointerId,"id"))<0&&(t=gt.length),gt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}),e=(t=N(e)).length,Le=null,I(),xe&&1!==e||(xe=Ue=!0,m.bind(window,W,h),we=He=Ve=Se=Ee=Te=Ae=Pe=!1,Fe=null,y("firstTouchStart",t),v(qe,Qe),je.x=je.y=0,v(dt,t[0]),v(pt,dt),mt.x=Ze.x*We,ht=[{x:dt.x,y:dt.y}],ve=be=c(),p($,!0),kt(),xt()),!Re&&1<e&&!Ne&&!Ee&&(Y=$,Re=Ae=!(Pe=!1),je.y=je.x=0,v(qe,Qe),v(st,t[0]),v(ut,t[1]),D(st,ut,St),wt.x=Math.abs(St.x)-Qe.x,wt.y=Math.abs(St.y)-Qe.y,Me=L(st,ut))))}function V(e){var t,n;e.preventDefault(),!se||-1<(t=m.arraySearch(gt,e.pointerId,"id"))&&((n=gt[t]).x=e.pageX,n.y=e.pageY),xe&&(n=N(e),Fe||Te||Re?Le=n:Ct.x!==Ze.x*We?Fe="h":(e=Math.abs(n[0].x-dt.x)-Math.abs(n[0].y-dt.y),10<=Math.abs(e)&&(Fe=0<e?"h":"v",Le=n)))}function B(e){if(fe.isOldAndroid){if(ke&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(ke),ke=setTimeout(function(){ke=0},600))}y("pointerUp"),R(e,!1)&&e.preventDefault(),!se||-1<(n=m.arraySearch(gt,e.pointerId,"id"))&&(o=gt.splice(n,1)[0],navigator.pointerEnabled?o.type=e.pointerType||"mouse":(o.type={4:"mouse",2:"touch",3:"pen"}[e.pointerType],o.type||(o.type=e.pointerType||"mouse")));var t=N(e),n=t.length;if(2===(n="mouseup"===e.type?0:n))return!(Le=null);1===n&&v(pt,t[0]),0!==n||Fe||Ne||(o||("mouseup"===e.type?o={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(o={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),y("touchRelease",e,o));var i,a,o=-1;if(0===n&&(xe=!1,m.unbind(window,W,h),kt(),Re?o=0:-1!==vt&&(o=c()-vt)),vt=1===n?c():-1,o=-1!==o&&o<150?"zoom":"swipe",Re&&n<2&&(Re=!1,1===n&&(o="zoomPointerUp"),y("zoomGestureEnded")),Le=null,Te||Pe||Ne||Se)if(I(),(Ce=Ce||Rt()).calculateSwipeSpeed("x"),Se)O()<f.verticalDragRange?h.close():(i=Qe.y,a=Be,E("verticalDrag",0,1,300,m.easing.cubic.out,function(e){Qe.y=(h.currItem.initialPosition.y-i)*e+i,b((1-a)*e+a),tt()}),y("onVerticalDrag",1));else{if((Ee||Ne)&&0===n){if(Dt(o,Ce))return;o="zoomPointerUp"}Ne||("swipe"===o?!Ee&&$>h.currItem.fitRatio&&Mt(Ce):Nt())}}var H,_,j,q,Q,z,W,K,Z,$,Y,G,J,X,ee,te,ne,ie,ae,oe,re,le,se,ue,ce,de,pe,ge,me,he,fe,ye,be,ve,Ce,we,Se,ke,xe,Ae,Pe,Te,Ie,Ee,Le,Re,Me,De,Oe,Ne,Fe,Ue,Ve,Be,He,_e,je=i(),qe=i(),Qe=i(),ze={},We=0,Ke={},Ze=i(),$e=0,Ye=!0,Ge=[],Je={},Xe=!1,et={},tt=function(e){Oe&&(e&&($>h.currItem.fitRatio?Xe||(Jt(h.currItem,!1,!0),Xe=!0):Xe&&(Jt(h.currItem),Xe=!1)),l(Oe,Qe.x,Qe.y,$))},nt=function(e){e.container&&l(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},it=function(e,t){t[le]=G+e+"px, 0px"+J},at=null,ot=function(){at&&(m.unbind(document,"mousemove",ot),m.addClass(g,"pswp--has_mouse"),f.mouseUsed=!0,y("mouseUsed")),at=setTimeout(function(){at=null},100)},rt={},lt=0,t={shout:y,listen:o,viewportSize:ze,options:f,isMainScrollAnimating:function(){return Ne},getZoomLevel:function(){return $},getCurrentIndex:function(){return q},isDragging:function(){return xe},isZooming:function(){return Re},setScrollOffset:function(e,t){Ke.x=e,he=Ke.y=t,y("updateScrollOffset",Ke)},applyZoomPan:function(e,t,n,i){Qe.x=t,Qe.y=n,$=e,tt(i)},init:function(){if(!H&&!_){var e;h.framework=m,h.template=g,h.bg=m.getChildByClass(g,"pswp__bg"),pe=g.className,H=!0,fe=m.detectFeatures(),ce=fe.raf,de=fe.caf,le=fe.transform,me=fe.oldIE,h.scrollWrap=m.getChildByClass(g,"pswp__scroll-wrap"),h.container=m.getChildByClass(h.scrollWrap,"pswp__container"),Q=h.container.style,h.itemHolders=te=[{el:h.container.children[0],wrap:0,index:-1},{el:h.container.children[1],wrap:0,index:-1},{el:h.container.children[2],wrap:0,index:-1}],te[0].el.style.display=te[2].el.style.display="none",function(){if(le){var e=fe.perspective&&!ue;return G="translate"+(e?"3d(":"("),J=fe.perspective?", 0px)":")"}le="left",m.addClass(g,"pswp--ie"),it=function(e,t){t.left=e+"px"},nt=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,t=t*e.h;n.width=i+"px",n.height=t+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},tt=function(){var e,t,n;Oe&&(t=(n=1<(e=h.currItem).fitRatio?1:e.fitRatio)*e.w,n=n*e.h,(e=Oe).width=t+"px",e.height=n+"px",e.left=Qe.x+"px",e.top=Qe.y+"px")}}(),Z={resize:h.updateSize,orientationchange:function(){clearTimeout(ye),ye=setTimeout(function(){ze.x!==h.scrollWrap.clientWidth&&h.updateSize()},500)},scroll:A,keydown:k,click:x};var t=fe.isOldIOSPhone||fe.isOldAndroid||fe.isMobileOpera;for(fe.animationName&&fe.transform&&!t||(f.showAnimationDuration=f.hideAnimationDuration=0),e=0;e<Ge.length;e++)h["init"+Ge[e]]();n&&(h.ui=new n(h,m)).init(),y("firstUpdate"),q=q||f.index||0,(isNaN(q)||q<0||q>=Wt())&&(q=0),h.currItem=zt(q),(fe.isOldIOSPhone||fe.isOldAndroid)&&(Ye=!1),g.setAttribute("aria-hidden","false"),f.modal&&(Ye?g.style.position="fixed":(g.style.position="absolute",g.style.top=m.getScrollY()+"px")),void 0===he&&(y("initialLayout"),he=ge=m.getScrollY());t="pswp--open ";for(f.mainClass&&(t+=f.mainClass+" "),f.showHideOpacity&&(t+="pswp--animate_opacity "),t+=ue?"pswp--touch":"pswp--notouch",t+=fe.animationName?" pswp--css_animation":"",t+=fe.svg?" pswp--svg":"",m.addClass(g,t),h.updateSize(),z=-1,$e=null,e=0;e<3;e++)it((e+z)*Ze.x,te[e].el.style);me||m.bind(h.scrollWrap,K,h),o("initialZoomInEnd",function(){h.setContent(te[0],q-1),h.setContent(te[2],q+1),te[0].el.style.display=te[2].el.style.display="block",f.focus&&g.focus(),m.bind(document,"keydown",h),fe.transform&&m.bind(h.scrollWrap,"click",h),f.mouseUsed||m.bind(document,"mousemove",ot),m.bind(window,"resize scroll orientationchange",h),y("bindEvents")}),h.setContent(te[1],q),h.updateCurrItem(),y("afterInit"),Ye||(X=setInterval(function(){lt||xe||Re||$!==h.currItem.initialZoomLevel||h.updateSize()},1e3)),m.addClass(g,"pswp--visible")}},close:function(){H&&(_=!(H=!1),y("close"),m.unbind(window,"resize scroll orientationchange",h),m.unbind(window,"scroll",Z.scroll),m.unbind(document,"keydown",h),m.unbind(document,"mousemove",ot),fe.transform&&m.unbind(h.scrollWrap,"click",h),xe&&m.unbind(window,W,h),clearTimeout(ye),y("unbindEvents"),Kt(h.currItem,null,!0,h.destroy))},destroy:function(){y("destroy"),_t&&clearTimeout(_t),g.setAttribute("aria-hidden","true"),g.className=pe,X&&clearInterval(X),m.unbind(h.scrollWrap,K,h),m.unbind(window,"scroll",h),kt(),I(),et=null},panTo:function(e,t,n){n||(e>De.min.x?e=De.min.x:e<De.max.x&&(e=De.max.x),t>De.min.y?t=De.min.y:t<De.max.y&&(t=De.max.y)),Qe.x=e,Qe.y=t,tt()},handleEvent:function(e){e=e||window.event,Z[e.type]&&Z[e.type](e)},goTo:function(e){var t=(e=r(e))-q;$e=t,q=e,h.currItem=zt(q),We-=t,d(Ze.x*We),I(),Ne=!1,h.updateCurrItem()},next:function(){h.goTo(q+1)},prev:function(){h.goTo(q-1)},updateCurrZoomItem:function(e){var t;e&&y("beforeChange",0),Oe=te[1].el.children.length?(t=te[1].el.children[0],m.hasClass(t,"pswp__zoom-wrap")?t.style:null):null,De=h.currItem.bounds,Y=$=h.currItem.initialZoomLevel,Qe.x=De.center.x,Qe.y=De.center.y,e&&y("afterChange")},invalidateCurrItems:function(){ee=!0;for(var e=0;e<3;e++)te[e].item&&(te[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==$e){var t,n=Math.abs($e);if(!(e&&n<2)){h.currItem=zt(q),Xe=!1,y("beforeChange",$e),3<=n&&(z+=$e+(0<$e?-3:3),n=3);for(var i=0;i<n;i++)0<$e?(t=te.shift(),te[2]=t,it((++z+2)*Ze.x,t.el.style),h.setContent(t,q-n+i+1+1)):(t=te.pop(),te.unshift(t),it(--z*Ze.x,t.el.style),h.setContent(t,q+n-i-1-1));!Oe||1!==Math.abs($e)||(e=zt(ne)).initialZoomLevel!==$&&(Gt(e,ze),Jt(e),nt(e)),$e=0,h.updateCurrZoomItem(),ne=q,y("afterChange")}}},updateSize:function(e){if(!Ye&&f.modal){var t=m.getScrollY();if(he!==t&&(g.style.top=t+"px",he=t),!e&&Je.x===window.innerWidth&&Je.y===window.innerHeight)return;Je.x=window.innerWidth,Je.y=window.innerHeight,g.style.height=Je.y+"px"}if(ze.x=h.scrollWrap.clientWidth,ze.y=h.scrollWrap.clientHeight,A(),Ze.x=ze.x+Math.round(ze.x*f.spacing),Ze.y=ze.y,d(Ze.x*We),y("beforeResize"),void 0!==z){for(var n,i,a,o=0;o<3;o++)n=te[o],it((o+z)*Ze.x,n.el.style),a=q+o-1,f.loop&&2<Wt()&&(a=r(a)),(i=zt(a))&&(ee||i.needsUpdate||!i.bounds)?(h.cleanSlide(i),h.setContent(n,a),1===o&&(h.currItem=i,h.updateCurrZoomItem(!0)),i.needsUpdate=!1):-1===n.index&&0<=a&&h.setContent(n,a),i&&i.container&&(Gt(i,ze),Jt(i),nt(i));ee=!1}Y=$=h.currItem.initialZoomLevel,(De=h.currItem.bounds)&&(Qe.x=De.center.x,Qe.y=De.center.y,tt(!0)),y("resize")},zoomTo:function(t,e,n,i,a){e&&(Y=$,wt.x=Math.abs(e.x)-Qe.x,wt.y=Math.abs(e.y)-Qe.y,v(qe,Qe));var e=p(t,!1),o={};S("x",e,o,t),S("y",e,o,t);var r=$,l=Qe.x,s=Qe.y;u(o);e=function(e){1===e?($=t,Qe.x=o.x,Qe.y=o.y):($=(t-r)*e+r,Qe.x=(o.x-l)*e+l,Qe.y=(o.y-s)*e+s),a&&a(e),tt(1===e)};n?E("customZoomTo",0,1,n,i||m.easing.sine.inOut,e):e(1)}},st={},ut={},ct={},dt={},pt={},gt=[],mt={},ht=[],ft={},yt=0,bt=i(),vt=0,Ct=i(),wt=i(),St=i(),kt=function(){Ie&&(de(Ie),Ie=null)},xt=function(){xe&&(Ie=ce(xt),Lt())},At=function(e,t){return!(!e||e===document)&&(!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:At(e.parentNode,t)))},Pt={},Tt={},It={},Et=[],Lt=function(){if(Le){var e,t,n,i,a,o=Le.length;if(0!==o)if(v(st,Le[0]),ct.x=st.x-dt.x,ct.y=st.y-dt.y,Re&&1<o)dt.x=st.x,dt.y=st.y,(ct.x||ct.y||(i=Le[1],a=ut,i.x!==a.x||i.y!==a.y))&&(v(ut,Le[1]),Pe||(Pe=!0,y("zoomGestureStarted")),t=L(st,ut),(n=Ot(t))>h.currItem.initialZoomLevel+h.currItem.initialZoomLevel/15&&(He=!0),e=1,o=C(),i=w(),n<o?f.pinchToClose&&!He&&Y<=h.currItem.initialZoomLevel?(b(a=1-(o-n)/(o/1.2)),y("onPinchClose",a),Ve=!0):n=o-(e=1<(e=(o-n)/o)?1:e)*(o/3):i<n&&(n=i+(e=1<(e=(n-i)/(6*o))?1:e)*o),e<0&&(e=0),D(st,ut,bt),je.x+=bt.x-St.x,je.y+=bt.y-St.y,v(St,bt),Qe.x=s("x",n),Qe.y=s("y",n),we=$<n,$=n,tt());else if(Fe&&(Ue&&(Ue=!1,10<=Math.abs(ct.x)&&(ct.x-=Le[0].x-pt.x),10<=Math.abs(ct.y)&&(ct.y-=Le[0].y-pt.y)),dt.x=st.x,dt.y=st.y,0!==ct.x||0!==ct.y)){if("v"===Fe&&f.closeOnVerticalDrag&&"fit"===f.scaleMode&&$===h.currItem.initialZoomLevel){je.y+=ct.y,Qe.y+=ct.y;var r=O();return Se=!0,y("onVerticalDrag",r),b(r),void tt()}e=c(),t=st.x,n=st.y,50<e-ve&&((r=2<ht.length?ht.shift():{}).x=t,r.y=n,ht.push(r),ve=e),Te=!0,De=h.currItem.bounds,F("x",ct)||(F("y",ct),u(Qe),tt())}}},Rt=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){n=1<ht.length?(t=c()-ve+50,ht[ht.length-2][e]):(t=c()-be,pt[e]),i.lastFlickOffset[e]=dt[e]-n,i.lastFlickDist[e]=Math.abs(i.lastFlickOffset[e]),20<i.lastFlickDist[e]?i.lastFlickSpeed[e]=i.lastFlickOffset[e]/t:i.lastFlickSpeed[e]=0,Math.abs(i.lastFlickSpeed[e])<.1&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(t,e){i.backAnimStarted[t]||(Qe[t]>De.min[t]?i.backAnimDestination[t]=De.min[t]:Qe[t]<De.max[t]&&(i.backAnimDestination[t]=De.max[t]),void 0!==i.backAnimDestination[t]&&(i.slowDownRatio[t]=.7,i.slowDownRatioReverse[t]=1-i.slowDownRatio[t],i.speedDecelerationRatioAbs[t]<.05&&(i.lastFlickSpeed[t]=0,i.backAnimStarted[t]=!0,E("bounceZoomPan"+t,Qe[t],i.backAnimDestination[t],e||300,m.easing.sine.out,function(e){Qe[t]=e,tt()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10),i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,Qe[e]+=i.distanceOffset[e])},panAnimLoop:function(){rt.zoomPan&&(rt.zoomPan.raf=ce(i.panAnimLoop),i.now=c(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),tt(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05&&(Qe.x=Math.round(Qe.x),Qe.y=Math.round(Qe.y),tt(),P("zoomPan")))}};return i},Mt=function(e){if(e.calculateSwipeSpeed("y"),De=h.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;T("zoomPan"),e.lastNow=c(),e.panAnimLoop()},Dt=function(e,t){var n,i;Ne||(yt=q),"swipe"===e&&(i=dt.x-pt.x,e=t.lastFlickDist.x<10,30<i&&(e||20<t.lastFlickOffset.x)?o=-1:i<-30&&(e||t.lastFlickOffset.x<-20)&&(o=1)),o&&((q+=o)<0?(q=f.loop?Wt()-1:0,a=!0):q>=Wt()&&(q=f.loop?0:Wt()-1,a=!0),a&&!f.loop||($e+=o,We-=o,n=!0));var a=Ze.x*We,o=Math.abs(a-Ct.x),r=n||a>Ct.x==0<t.lastFlickSpeed.x?(r=0<Math.abs(t.lastFlickSpeed.x)?o/Math.abs(t.lastFlickSpeed.x):333,r=Math.min(r,400),Math.max(r,250)):333;return yt===q&&(n=!1),Ne=!0,y("mainScrollAnimStart"),E("mainScroll",Ct.x,a,r,m.easing.cubic.out,d,function(){I(),Ne=!1,yt=-1,!n&&yt===q||h.updateCurrItem(),y("mainScrollAnimComplete")}),n&&h.updateCurrItem(!0),n},Ot=function(e){return 1/Me*e*Y},Nt=function(){var e=$,t=C(),n=w();$<t?e=t:n<$&&(e=n);var i,a=Be;return Ve&&!we&&!He&&$<t?h.close():h.zoomTo(e,0,200,m.easing.cubic.out,i=Ve?function(e){b((1-a)*e+a)}:i),!0};a("Gestures",{publicMethods:{initGestures:function(){function e(e,t,n,i,a){ie=e+t,ae=e+n,oe=e+i,re=a?e+a:""}(se=fe.pointerEvent)&&fe.touch&&(fe.touch=!1),se?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):fe.touch?(e("touch","start","move","end","cancel"),ue=!0):e("mouse","down","move","up"),W=ae+" "+oe+" "+re,K=ie,se&&!ue&&(ue=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),h.likelyTouchDevice=ue,Z[ie]=U,Z[ae]=V,Z[oe]=B,re&&(Z[re]=Z[oe]),fe.touch&&(K+=" mousedown",W+=" mousemove mouseup",Z.mousedown=Z[ie],Z.mousemove=Z[ae],Z.mouseup=Z[oe]),ue||(f.allowPanToNext=!1)}}});function Ft(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}}function Ut(e,t,n,i,a,o){t.loadError||i&&(t.imageAppended=!0,Jt(t,i,t===h.currItem&&Xe),n.appendChild(i),o&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))}function Vt(e){var t;function n(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null}return e.loading=!0,e.loaded=!1,e.svg?(t=e.img=m.createEl("pswp__img","object")).type="image/svg+xml":t=e.img=m.createEl("pswp__img","img"),t.onload=n,t.onerror=function(){e.loadError=!0,n()},e.svg?t.data=e.src:t.src=e.src,t}function Bt(e,t){return e.src&&e.loadError&&e.container&&(t&&(e.container.innerHTML=""),e.container.innerHTML=f.errorMsg.replace("%url%",e.src),1)}function Ht(){if($t.length){for(var e,t=0;t<$t.length;t++)(e=$t[t]).holder.index===e.index&&Ut(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);$t=[]}}var _t,jt,qt,Qt,zt,Wt,Kt=function(r,e,l,t){var s;_t&&clearTimeout(_t),qt=Qt=!0,r.initialLayout?(s=r.initialLayout,r.initialLayout=null):s=f.getThumbBoundsFn&&f.getThumbBoundsFn(q);function u(){P("initialZoom"),l?(h.template.removeAttribute("style"),h.bg.removeAttribute("style")):(b(1),e&&(e.style.display="block"),m.addClass(g,"pswp--animated-in"),y("initialZoom"+(l?"OutEnd":"InEnd"))),t&&t(),Qt=!1}var c=l?f.hideAnimationDuration:f.showAnimationDuration;if(!c||!s||void 0===s.x)return y("initialZoom"+(l?"Out":"In")),$=r.initialZoomLevel,v(Qe,r.initialPosition),tt(),g.style.opacity=l?0:1,b(1),void(c?setTimeout(function(){u()},c):u());var d,p;d=j,p=!h.currItem.src||h.currItem.loadError||f.showHideOpacity,r.miniImg&&(r.miniImg.style.webkitBackfaceVisibility="hidden"),l||($=s.w/r.w,Qe.x=s.x,Qe.y=s.y-ge,h[p?"template":"bg"].style.opacity=.001,tt()),T("initialZoom"),l&&!d&&m.removeClass(g,"pswp--animated-in"),p&&(l?m[(d?"remove":"add")+"Class"](g,"pswp--animate_opacity"):setTimeout(function(){m.addClass(g,"pswp--animate_opacity")},30)),_t=setTimeout(function(){var t,n,i,a,o,e;y("initialZoom"+(l?"Out":"In")),l?(t=s.w/r.w,n=Qe.x,i=Qe.y,a=$,o=Be,e=function(e){1===e?($=t,Qe.x=s.x,Qe.y=s.y-he):($=(t-a)*e+a,Qe.x=(s.x-n)*e+n,Qe.y=(s.y-he-i)*e+i),tt(),p?g.style.opacity=1-e:b(o-e*o)},d?E("initialZoom",0,1,c,m.easing.cubic.out,e,u):(e(1),_t=setTimeout(u,c+20))):($=r.initialZoomLevel,v(Qe,r.initialPosition),tt(),b(1),p?g.style.opacity=1:b(1),_t=setTimeout(u,c+20))},l?25:90)},Zt={},$t=[],Yt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return jt.length}},Gt=function(e,t,n){if(!e.src||e.loadError)return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=Ft(),e.initialPosition=e.bounds.center,e.bounds;var i,a,o,r=!n;return r&&(e.vGap||(e.vGap={top:0,bottom:0}),y("parseVerticalMargin",e)),Zt.x=t.x,Zt.y=t.y-e.vGap.top-e.vGap.bottom,r&&(i=Zt.x/e.w,a=Zt.y/e.h,e.fitRatio=i<a?i:a,"orig"===(o=f.scaleMode)?n=1:"fit"===o&&(n=e.fitRatio),e.initialZoomLevel=n=1<n?1:n,e.bounds||(e.bounds=Ft())),n?(i=(t=e).w*n,a=e.h*n,(o=t.bounds).center.x=Math.round((Zt.x-i)/2),o.center.y=Math.round((Zt.y-a)/2)+t.vGap.top,o.max.x=i>Zt.x?Math.round(Zt.x-i):o.center.x,o.max.y=a>Zt.y?Math.round(Zt.y-a)+t.vGap.top:o.center.y,o.min.x=i>Zt.x?0:o.center.x,o.min.y=a>Zt.y?t.vGap.top:o.center.y,r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0},Jt=function(e,t,n){if(e.src){t=t||e.container.lastChild;var i=n?e.w:Math.round(e.w*e.fitRatio),a=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=a+"px"),t.style.width=i+"px",t.style.height=a+"px";for(var o=0;o<=e.container.childNodes.length;o++)e.container.childNodes[o]&&"OBJECT"===e.container.childNodes[o].tagName&&(e.container.childNodes[o].style.width=i+"px",e.container.childNodes[o].style.height=a+"px")}};a("Controller",{publicMethods:{lazyLoadItem:function(e){e=r(e);var t=zt(e);t&&(!t.loaded&&!t.loading||ee)&&(y("gettingData",e,t),t.src&&Vt(t))},initController:function(){m.extend(f,Yt,!0),h.items=jt=e,zt=h.getItemAt,Wt=f.getNumItemsFn,f.loop,Wt()<3&&(f.loop=!1),o("beforeChange",function(e){for(var t=f.preload,n=null===e||0<=e,i=Math.min(t[0],Wt()),a=Math.min(t[1],Wt()),o=1;o<=(n?a:i);o++)h.lazyLoadItem(q+o);for(o=1;o<=(n?i:a);o++)h.lazyLoadItem(q-o)}),o("initialLayout",function(){h.currItem.initialLayout=f.getThumbBoundsFn&&f.getThumbBoundsFn(q)}),o("mainScrollAnimComplete",Ht),o("initialZoomInEnd",Ht),o("destroy",function(){for(var e,t=0;t<jt.length;t++)(e=jt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);$t=null})},getItemAt:function(e){return 0<=e&&(void 0!==jt[e]&&jt[e])},allowProgressiveImg:function(){return f.forceProgressiveLoading||!ue||f.mouseUsed||1200<screen.width},setContent:function(t,n){f.loop&&(n=r(n));var e=h.getItemAt(t.index);e&&(e.container=null);var i,a,o=h.getItemAt(n);o?(y("gettingData",n,o),t.index=n,i=(t.item=o).container=m.createEl("pswp__zoom-wrap"),!o.src&&o.html&&(o.html.tagName?i.appendChild(o.html):i.innerHTML=o.html),Bt(o),Gt(o,ze),!o.src||o.loadError||o.loaded?!o.src&&!o.data||o.loadError||(o.svg?((a=o.img=m.createEl("pswp__img","object")).type="image/svg+xml",a.data=o.src):(a=o.img=m.createEl("pswp__img","img")).src=o.src,a.style.opacity=1,Jt(o,a),Ut(0,o,i,a),o.svg&&Ut(0,o,i,m.createEl("pswp__img pswp__img--overlay","div"))):(o.loadComplete=function(e){if(H){if(t&&t.index===n){if(Bt(e,!0))return e.loadComplete=e.img=null,Gt(e,ze),nt(e),void(t.index===q&&h.updateCurrZoomItem());e.imageAppended?!Qt&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null):fe.transform&&(Ne||Qt)?($t.push({item:e,baseDiv:i,img:e.img,index:n,holder:t,clearPlaceholder:!0}),e.svg&&$t.push({item:e,baseDiv:i,img:m.createEl("pswp__img pswp__img--overlay","div"),index:n,holder:t,clearPlaceholder:!0})):(Ut(0,e,i,e.img,0,!0),e.svg&&Ut(0,e,i,m.createEl("pswp__img pswp__img--overlay","div"),0,!0))}e.loadComplete=null,e.img=null,y("imageLoadComplete",n,e)}},m.features.transform&&(e="pswp__img pswp__img--placeholder",e+=o.msrc?"":" pswp__img--placeholder--blank",e=m.createEl(e,o.msrc?"img":""),o.msrc&&(e.src=o.msrc),Jt(o,e),i.appendChild(e),o.placeholder=e),o.loading||Vt(o),h.allowProgressiveImg()&&(!qt&&fe.transform?($t.push({item:o,baseDiv:i,img:o.img,index:n,holder:t}),o.svg&&$t.push({item:o,baseDiv:i,img:m.createEl("pswp__img pswp__img--overlay","div"),index:n,holder:t})):(Ut(0,o,i,o.img,0,!0),o.svg&&Ut(0,o,i,m.createEl("pswp__img pswp__img--overlay","div"),0,!0)))),qt||n!==q?nt(o):(Oe=i.style,Kt(o,a||o.img)),t.el.innerHTML="",t.el.appendChild(i)):t.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});function Xt(e,t,n){var i=document.createEvent("CustomEvent"),n={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,n),e.target.dispatchEvent(i)}var en,tn,nn={};a("Tap",{publicMethods:{initTap:function(){o("firstTouchStart",h.onTapStart),o("touchRelease",h.onTapRelease),o("destroy",function(){nn={},en=null})},onTapStart:function(e){1<e.length&&(clearTimeout(en),en=null)},onTapRelease:function(e,t){var n,i,a;t&&(Te||Ae||lt||(n=t,en&&(clearTimeout(en),en=null,i=n,a=nn,Math.abs(i.x-a.x)<25&&Math.abs(i.y-a.y)<25)?y("doubleTap",n):"mouse"!==t.type?"BUTTON"===e.target.tagName.toUpperCase()||m.hasClass(e.target,"pswp__single-tap")?Xt(e,t):(v(nn,n),en=setTimeout(function(){Xt(e,t),en=null},300)):Xt(e,t,"mouse")))}}}),a("DesktopZoom",{publicMethods:{initDesktopZoom:function(){me||(ue?o("mouseUsed",function(){h.setupDesktopZoom()}):h.setupDesktopZoom(!0))},setupDesktopZoom:function(e){tn={};var t="wheel mousewheel DOMMouseScroll";o("bindEvents",function(){m.bind(g,t,h.handleMouseWheel)}),o("unbindEvents",function(){tn&&m.unbind(g,t,h.handleMouseWheel)}),h.mouseZoomedIn=!1;function n(){h.mouseZoomedIn&&(m.removeClass(g,"pswp--zoomed-in"),h.mouseZoomedIn=!1),$<1?m.addClass(g,"pswp--zoom-allowed"):m.removeClass(g,"pswp--zoom-allowed"),a()}var i,a=function(){i&&(m.removeClass(g,"pswp--dragging"),i=!1)};o("resize",n),o("afterChange",n),o("pointerDown",function(){h.mouseZoomedIn&&(i=!0,m.addClass(g,"pswp--dragging"))}),o("pointerUp",a),e||n()},handleMouseWheel:function(e){if($<=h.currItem.fitRatio)return f.modal&&(!f.closeOnScroll||lt||xe?e.preventDefault():le&&2<Math.abs(e.deltaY)&&(j=!0,h.close())),!0;if(e.stopPropagation(),tn.x=0,"deltaX"in e)1===e.deltaMode?(tn.x=18*e.deltaX,tn.y=18*e.deltaY):(tn.x=e.deltaX,tn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(tn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?tn.y=-.16*e.wheelDeltaY:tn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;tn.y=e.detail}p($,!0);var t=Qe.x-tn.x,n=Qe.y-tn.y;(f.modal||t<=De.min.x&&t>=De.max.x&&n<=De.min.y&&n>=De.max.y)&&e.preventDefault(),h.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:ze.x/2+Ke.x,y:ze.y/2+Ke.y};var t=f.getDoubleTapZoom(!0,h.currItem),n=$===t;h.mouseZoomedIn=!n,h.zoomTo(n?h.currItem.initialZoomLevel:t,e,333),m[(n?"remove":"add")+"Class"](g,"pswp--zoomed-in")}}});function an(){return yn.hash.substring(1)}function on(){ln&&clearTimeout(ln),un&&clearTimeout(un)}function rn(){var e=an(),t={};if(e.length<5)return t;var n,i=e.split("&");for(o=0;o<i.length;o++)i[o]&&((n=i[o].split("=")).length<2||(t[n[0]]=n[1]));if(f.galleryPIDs){for(var a=t.pid,o=t.pid=0;o<jt.length;o++)if(jt[o].pid===a){t.pid=o;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t}var ln,sn,un,cn,dn,pn,gn,mn,hn,fn,yn,bn,vn={history:!0,galleryUID:1},Cn=function(){var e,t;un&&clearTimeout(un),lt||xe?un=setTimeout(Cn,500):(cn?clearTimeout(sn):cn=!0,t=q+1,(e=zt(q)).hasOwnProperty("pid")&&(t=e.pid),e=gn+"&gid="+f.galleryUID+"&pid="+t,mn||-1===yn.hash.indexOf(e)&&(fn=!0),t=yn.href.split("#")[0]+"#"+e,bn?"#"+e!==window.location.hash&&history[mn?"replaceState":"pushState"]("",document.title,t):mn?yn.replace(t):yn.hash=e,mn=!0,sn=setTimeout(function(){cn=!1},60))};a("History",{publicMethods:{initHistory:function(){var e,t;m.extend(f,vn,!0),f.history&&(yn=window.location,mn=hn=fn=!1,gn=an(),bn="pushState"in history,-1<gn.indexOf("gid=")&&(gn=(gn=gn.split("&gid=")[0]).split("?gid=")[0]),o("afterChange",h.updateURL),o("unbindEvents",function(){m.unbind(window,"hashchange",h.onHashChange)}),e=function(){pn=!0,hn||(fn?history.back():gn?yn.hash=gn:bn?history.pushState("",document.title,yn.pathname+yn.search):yn.hash=""),on()},o("unbindEvents",function(){j&&e()}),o("destroy",function(){pn||e()}),o("firstUpdate",function(){q=rn().pid}),-1<(t=gn.indexOf("pid="))&&"&"===(gn=gn.substring(0,t)).slice(-1)&&(gn=gn.slice(0,-1)),setTimeout(function(){H&&m.bind(window,"hashchange",h.onHashChange)},40))},onHashChange:function(){if(an()===gn)return hn=!0,void h.close();cn||(dn=!0,h.goTo(rn().pid),dn=!1)},updateURL:function(){on(),dn||(mn?ln=setTimeout(Cn,800):Cn())}}}),m.extend(h,t)}}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";return function(i,l){function e(e){if(T)return!0;e=e||window.event,P.timeToIdle&&P.mouseUsed&&!C&&U();for(var t,n,i=(e.target||e.srcElement).getAttribute("class")||"",a=0;a<B.length;a++)(t=B[a]).onTap&&-1<i.indexOf("pswp__"+t.name)&&(t.onTap(),n=!0);n&&(e.stopPropagation&&e.stopPropagation(),T=!0,e=l.features.isOldAndroid?600:30,setTimeout(function(){T=!1},e))}function t(e,t,n){l[(n?"add":"remove")+"Class"](e,"pswp__"+t)}function n(){var e=1===P.getNumItemsFn();e!==A&&(t(g,"ui--one-slide",e),A=e)}function a(){t(b,"share-modal--hidden",D)}function o(){return(D=!D)?(l.removeClass(b,"pswp__share-modal--fade-in"),setTimeout(function(){D&&a()},300)):(a(),setTimeout(function(){D||l.addClass(b,"pswp__share-modal--fade-in")},30)),D||N(),0}function r(e){var t=(e=e||window.event).target||e.srcElement;return i.shout("shareLinkClick",e,t),!!t.href&&(!!t.hasAttribute("download")||(window.open(t.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),D||o(),!1))}function s(e){for(var t=0;t<P.closeElClasses.length;t++)if(l.hasClass(e,"pswp__"+P.closeElClasses[t]))return!0}function u(e){(e=(e=e||window.event).relatedTarget||e.toElement)&&"HTML"!==e.nodeName||(clearTimeout(E),E=setTimeout(function(){L.setIdle(!0)},P.timeToIdleOutside))}function c(e){var t,n=e.vGap;!i.likelyTouchDevice||P.mouseUsed||screen.width>P.fitControlsWidth?(t=P.barsSize,P.captionEl&&"auto"===t.bottom?(h||((h=l.createEl("pswp__caption pswp__caption--fake")).appendChild(l.createEl("pswp__caption__center")),g.insertBefore(h,m),l.addClass(g,"pswp__ui--fit")),P.addCaptionHTMLFn(e,h,!0)?(e=h.clientHeight,n.bottom=parseInt(e,10)||44):n.bottom=t.top):n.bottom="auto"===t.bottom?0:t.bottom,n.top=t.top):n.top=n.bottom=0}function d(){function e(e){if(e)for(var t=e.length,n=0;n<t;n++){a=e[n],o=a.className;for(var i=0;i<B.length;i++)r=B[i],-1<o.indexOf("pswp__"+r.name)&&(P[r.option]?(l.removeClass(a,"pswp__element--disabled"),r.onInit&&r.onInit(a)):l.addClass(a,"pswp__element--disabled"))}}var a,o,r;e(g.children);var t=l.getChildByClass(g,"pswp__top-bar");t&&e(t.children)}var p,g,m,h,f,y,b,v,C,w,S,k,x,A,P,T,I,E,L=this,R=!1,M=!0,D=!0,O={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return i.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return i.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},N=function(){for(var e,t,n,i,a="",o=0;o<P.shareButtons.length;o++)e=P.shareButtons[o],t=P.getImageURLForShare(e),n=P.getPageURLForShare(e),i=P.getTextForShare(e),a+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",P.parseShareButtonOut&&(a=P.parseShareButtonOut(e,a));b.children[0].innerHTML=a,b.children[0].onclick=r},F=0,U=function(){clearTimeout(E),F=0,C&&L.setIdle(!1)},V=function(e){k!==e&&(t(S,"preloader--active",!e),k=e)},B=[{name:"caption",option:"captionEl",onInit:function(e){m=e}},{name:"share-modal",option:"shareEl",onInit:function(e){b=e},onTap:function(){o()}},{name:"button--share",option:"shareEl",onInit:function(e){y=e},onTap:function(){o()}},{name:"button--zoom",option:"zoomEl",onTap:i.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){f=e}},{name:"button--close",option:"closeEl",onTap:i.close},{name:"button--arrow--left",option:"arrowEl",onTap:i.prev},{name:"button--arrow--right",option:"arrowEl",onTap:i.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){p.isFullscreen()?p.exit():p.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){S=e}}];L.init=function(){var t;l.extend(i.options,O,!0),P=i.options,g=l.getChildByClass(i.scrollWrap,"pswp__ui"),(w=i.listen)("onVerticalDrag",function(e){M&&e<.95?L.hideControls():!M&&.95<=e&&L.showControls()}),w("onPinchClose",function(e){M&&e<.9?(L.hideControls(),t=!0):t&&!M&&.9<e&&L.showControls()}),w("zoomGestureEnded",function(){(t=!1)&&!M&&L.showControls()}),w("beforeChange",L.update),w("doubleTap",function(e){var t=i.currItem.initialZoomLevel;i.getZoomLevel()!==t?i.zoomTo(t,e,333):i.zoomTo(P.getDoubleTapZoom(!1,i.currItem),e,333)}),w("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),w("bindEvents",function(){l.bind(g,"pswpTap click",e),l.bind(i.scrollWrap,"pswpTap",L.onGlobalTap),i.likelyTouchDevice||l.bind(i.scrollWrap,"mouseover",L.onMouseOver)}),w("unbindEvents",function(){D||o(),I&&clearInterval(I),l.unbind(document,"mouseout",u),l.unbind(document,"mousemove",U),l.unbind(g,"pswpTap click",e),l.unbind(i.scrollWrap,"pswpTap",L.onGlobalTap),l.unbind(i.scrollWrap,"mouseover",L.onMouseOver),p&&(l.unbind(document,p.eventK,L.updateFullscreen),p.isFullscreen()&&(P.hideAnimationDuration=0,p.exit()),p=null)}),w("destroy",function(){P.captionEl&&(h&&g.removeChild(h),l.removeClass(m,"pswp__caption--empty")),b&&(b.children[0].onclick=null),l.removeClass(g,"pswp__ui--over-close"),l.addClass(g,"pswp__ui--hidden"),L.setIdle(!1)}),P.showAnimationDuration||l.removeClass(g,"pswp__ui--hidden"),w("initialZoomIn",function(){P.showAnimationDuration&&l.removeClass(g,"pswp__ui--hidden")}),w("initialZoomOut",function(){l.addClass(g,"pswp__ui--hidden")}),w("parseVerticalMargin",c),d(),P.shareEl&&y&&b&&(D=!0),n(),P.timeToIdle&&w("mouseUsed",function(){l.bind(document,"mousemove",U),l.bind(document,"mouseout",u),I=setInterval(function(){2===++F&&L.setIdle(!0)},P.timeToIdle/2)}),P.fullscreenEl&&!l.features.isOldAndroid&&((p=p||L.getFullscreenAPI())?(l.bind(document,p.eventK,L.updateFullscreen),L.updateFullscreen(),l.addClass(i.template,"pswp--supports-fs")):l.removeClass(i.template,"pswp--supports-fs")),P.preloaderEl&&(V(!0),w("beforeChange",function(){clearTimeout(x),x=setTimeout(function(){i.currItem&&i.currItem.loading?i.allowProgressiveImg()&&(!i.currItem.img||i.currItem.img.naturalWidth)||V(!1):V(!0)},P.loadingIndicatorDelay)}),w("imageLoadComplete",function(e,t){i.currItem===t&&V(!0)}))},L.setIdle=function(e){t(g,"ui--idle",C=e)},L.update=function(){R=!(!M||!i.currItem)&&(L.updateIndexIndicator(),P.captionEl&&(P.addCaptionHTMLFn(i.currItem,m),t(m,"caption--empty",!i.currItem.title)),!0),D||o(),n()},L.updateFullscreen=function(e){e&&setTimeout(function(){i.setScrollOffset(0,l.getScrollY())},50),l[(p.isFullscreen()?"add":"remove")+"Class"](i.template,"pswp--fs")},L.updateIndexIndicator=function(){P.counterEl&&(f.innerHTML=i.getCurrentIndex()+1+P.indexIndicatorSep+P.getNumItemsFn())},L.onGlobalTap=function(e){var t=(e=e||window.event).target||e.srcElement;T||(e.detail&&"mouse"===e.detail.pointerType?s(t)?i.close():l.hasClass(t,"pswp__img")&&(1===i.getZoomLevel()&&i.getZoomLevel()<=i.currItem.fitRatio?P.clickToCloseNonZoomable&&i.close():i.toggleDesktopZoom(e.detail.releasePoint)):(P.tapToToggleControls&&(M?L.hideControls():L.showControls()),P.tapToClose&&(l.hasClass(t,"pswp__img")||s(t))&&i.close()))},L.onMouseOver=function(e){e=(e=e||window.event).target||e.srcElement;t(g,"ui--over-close",s(e))},L.hideControls=function(){l.addClass(g,"pswp__ui--hidden"),M=!1},L.showControls=function(){M=!0,R||L.update(),l.removeClass(g,"pswp__ui--hidden")},L.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},L.getFullscreenAPI=function(){var e,t=document.documentElement,n="fullscreenchange";return t.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}:t.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}:t.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}:t.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){if(v=P.closeOnScroll,P.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return i.template[this.enterK]();i.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return P.closeOnScroll=v,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}}),function(c,d){"use strict";var a,o;function r(e,t){var n,i,a,o=c(t),r=(r="svg"===o.data("altType"))&&d.utilities.isOldSafari(),l=o.data("altSrc")||o.data("imgLargeSrc")||o.attr("src"),s=o.data("imgLargeX")?4*parseInt(o.data("imgLargeX"),10):4*o[0].naturalWidth,u=o.data("imgLargeY")?4*parseInt(o.data("imgLargeY"),10):4*o[0].naturalHeight;return"svg"===o.data("altType")&&(n=o.height(),i=o.width(),0!==n&&0!==i||(n=o[0].naturalHeight,i=o[0].naturalWidth),a=screen.height/n,o=screen.width/i,u=n*Math.min(a,o)*4,s=i*Math.min(a,o)*4),{svg:r,src:l,w:s,h:u,elem:t,index:e}}function i(){return document.querySelectorAll(".pswp")[0]}function t(e,t){var n=function(e,t){for(var n=null,i=0,a=t.length;i<a;i++)t[i].elem===e&&(n=t[i].index);return n}(e,t=void 0===t?a:t);return null!==n&&(e=t,t=n,t={index:n,bgOpacity:.7,history:!1,closeOnVerticalDrag:!1},new PhotoSwipe(i(),PhotoSwipeUI_Default,e,t).init(),!0)}c.fn.imagesLoaded=function(){var e=this.find('img[src!=""]');if(!e.length)return c.Deferred().resolve().promise();var n=[];return e.each(function(){var e=c.Deferred();n.push(e);var t=new Image;t.onload=function(){e.resolve()},t.onerror=function(){e.resolve()},t.onabort=function(){e.resolve()},t.src=this.src}),c.when.apply(c,n)},d.images={setupImages:function(){c(".article img").not("a > img:not(.lightbox)").each(function(){var e=c(this),t=e.attr("src");e.data("imgLargeSrc",t),e.data("imgLargeX",parseInt(e.attr("width"),10)),e.data("imgLargeY",parseInt(e.attr("height"),10)),"svg"===e.data("altType")&&e.attr("src")===e.data("altSrc")&&d.utilities.isOldSafari()&&(t=c("<object/>").attr("data",t).css("position","absolute").css("top",0).css("left",0),e.css("opacity",0),e.closest("div").css("position","relative"),e.parent().prepend(t))})},setupLightboxItems:function(e){var t=void 0!==e?c(e):c(".article img").not(".noLightbox, .suppressZoom, a > img:not(.lightbox)"),n=[],i=[];if(t.each(function(e,t){c(t).parents(".alternatePresentation").length?i.push(r(i.length,t)):n.push(r(n.length,t))}),void 0!==e)return n;a=n,o=i},showAltPresentationLightbox:function(e){return t(c(e).find("img")[0],o)},callLightbox:t,placeholders:function(){c(".responsiveLoadingImage").parent().imagesLoaded().then(function(){c(".responsiveLoadingImage").each(function(){c(this).css("display","inline-block").prev().replaceWith(this)})})},hasLightbox:function(){return!!i()}}}(jQuery,app),function(b,v){"use strict";function C(e){e=v.utilities.getFirstActionableIdInScope(!1,e.$items);return v.mediaMarker.getMarker(e)}function w(e,t,n,i){return parseInt(e-t+n/2-i)}function S(e,t,n,i,a,o){return i-2*a<=(e=e<=t?v.utilities.roundToNearest(t+n,n):e)&&(e=v.utilities.roundDown(i-2*a,n),o<=i-a&&(e=v.utilities.roundDown(o,n))),e}function k(e){var t;v.media.isPlayerPlaying?b("#playSelectedButton").addClass("stopButton").removeClass("playButton").one("click",function(e){return v.mediaMarker.stop(),k(),!1}):(t=b("#playSelectedButton")).addClass("playButton").removeClass("stopButton").one("click",function(e){return v.mediaMarker.playSelected(t.data("buildEvent").$items),x(!0),v.mediaMarker.clearMarkers(),!1}),v.share.canSharePage()&&(b("#shareContextButton").one("click",function(e){return x(!0),v.share.openShareDialog(),!1}),b("#shareCopyWithCaptionButton").one("click",function(e){return v.share.getShareCaption(function(e){v.utilities.copyRichText(e)}),x(!0),!1}))}function x(e,t){var n,l,i=b("#contextMenu");n=b("#contextMenu").children("span"),l=!1,n.each(function(e,t){var n=t.getBoundingClientRect(),i=n.top,a=n.bottom,o=n.left,r=n.right;if(v.lastClickEvent){t=v.lastClickEvent.clientX,n=v.lastClickEvent.clientY;if(o<t&&t<r&&i<n&&n<a)return!(l=!0)}}),l&&!e||(t?i.remove():i.fadeOut("slow",function(){i.remove()}),b(document).off(".contextMenuDismiss"))}v.contextMenu={drawMenu:function(y){(C(y)||v.share.canSharePage())&&(x(!0,!0),b("#contextMenu").promise().done(function(){var e,t,n,i,a,o,r,l,s,u,c,d,p,g,m,h,f;y.$items&&0<y.$items.length&&(0<(m=function(t){var n=b('<span id="contextMenu"/>').addClass("contextMenu").css("left",-9999).on("click",function(e){return!1});function e(e){n.append(b('<span id="'+e+'"><span class="icon"></span></span>').data("buildEvent",t))}C(t)&&e("playSelectedButton");v.share.canSharePage()&&(e("shareContextButton"),e("shareCopyWithCaptionButton"));return n}(y)).find("span").length&&(b("#regionMain").before(m),p=parseInt(m.css("margin-right"),10),e=parseInt(m.css("margin-bottom"),10),t=parseInt(m.css("margin-left"),10),g=parseInt(m.css("margin-top"),10),n=(p-e)/2+parseInt(m.css("border-top-left-radius"),10),i=m.width(),c=p+(u=v.utilities.roundToNearest(i/2,5)),d=i-u,o=(a=b(y.$items[0]).parent()[0].getBoundingClientRect()).left+n,r=a.right-n,h=(l=(s=v.highlightManager.getHighlightedElements().find(".cl, .vl"))&&0<s.length?(f=s.position(),h=s[0].getBoundingClientRect(),l=s.width(),h.left+l/2):(f=(s=b("#"+v.highlightManager.getFirstHighlightedId(!1))).position(),h=s[0].getBoundingClientRect(),v.isContentLibraryRTL()?h.right-n-5:h.left+n+t+5),f.top),h+=parseInt(s.css("margin-top"),10),f=l,h=h+=v.utilities.getVideoPlayerHeight(),c=p/2+(u=S(u=function(e,t,n,i,a,o,r,l,s){var u=t-n.left,c=n.right-t,d=0,p=0;if(Math.abs(u-c)>2*i)for(;d!==e;)p=e,u<a&&(p-=i),c<o&&(p+=i),p===d&&(p<d?v.isLibraryRTL()&&(p=d):v.isLibraryRTL()||(p=d)),d=e,a=r/2+(e=p)+l,o=w(s,e,r,l);return e}(u,l,a,5,c,d,p,n,i),t,5,i,n,g))+n,d=w(i,u,p,n),p=b("#regionHeader").height(),s.offset().top-b(window).scrollTop()-p<0?(f=v.isContentLibraryRTL()?a.right-d:a.left+c,h=b(window).scrollTop()+p):h+=p,h=h-m.outerHeight()-e,f=function(e,t,n,i,a,o){v.isLibraryRTL()?(e<t&&(e=n.left),a<e+i&&(e=n.right-i-2*o)):(e=a<e+i?n.right-i-2*o:e)<t&&(e=n.left);return e}(f-=c,o,a,i,r,n),u=S(u,t,5,i,n,g),g=y,h=h,f=f,(m=m).addClass("triangle-center-"+u),m.css("margin",0),m.css("top",h).css("left",f),k(),window.setTimeout(function(){b(document).one("scroll.contextMenuDismiss click.contextMenuDismiss",function(e){x()})},500)))}))},removeContextMenu:x,setupMenuEvent:k}}(jQuery,app),function(r,l){r("audio");var s,u,c,d=!1;function p(e){return Math.round(1e6*e)/1e6}function g(e){try{var t=e.toString().match(/(\d\d):(\d\d):(\d\d\.\d\d\d)/);return p(3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseFloat(t[3]))}catch(e){return null}}function m(e){var t,n,e="string"!=typeof e?(t=(e=r(e)).data("pid"),l.getVerseNumberFromIDAttribute(e.attr("id"))):(t=l.getParagraphIDFromIDAttribute(e),l.getVerseNumberFromIDAttribute(e)),i=t||e;i=parseInt(i,10);e=l.getDID();if(l.audioMarkers&&r.isNumeric(i)){if(e&&l.audioMarkerData.documentId&&e!=l.audioMarkerData.documentId)return null;n=r.grep(l.audioMarkerData.markers,function(e,t){return e.mepsParagraphId===i||e.verseNumber===i})}return n&&0<n.length?n[0]:null}function i(){l.media.previousSelector=null;var e=r(".currentMarker");return e.removeClass("currentMarker"),e}function t(e){n(function(i){var a=null;if(!l.audioMarkerData)return!1;var o=l.audioMarkerData.type;return r.each(l.audioMarkerData.markers,function(e){var t=Math.max(g(this.startTime),l.video.timeChangeDebounceTime),n=t+g(this.duration);if(t<=i&&i<=n)return"bible"===o?a=sprintf("#content [id^=v%s-%s-%s-]",l.audioMarkerData.bibleBookNumber,l.audioMarkerData.bibleBookChapter,this.verseNumber):"publication"===o&&(a=sprintf("#content [data-pid='%s']",this.mepsParagraphId)),!1}),a}(e))}function n(e){var t,n;e===l.media.previousSelector||r("html, body").is(":animated")||(t=i(),(n=r(e)).addClass("currentMarker"),l.media.previousSelector=e,0<n.length&&function(e,t){{var n,i,a;0===r("#contextMenu").length&&(0<e.get().reduce(function(e,t){return e+l.layout.pixelsScrolledIntoView(t)},0)||l.mediaMarker.autoScrollEnabled)&&(a=t[0],n=l.layout.pixelsScrolledIntoView(a),i=a.getBoundingClientRect().height,e=t[t.length-1],t=l.layout.pixelsScrolledIntoView(e),e=e.getBoundingClientRect().height,(n<i||t<e)&&(i=r(window).scrollTop(),t=r("#regionHeader").outerHeight(),e=a.getBoundingClientRect().top,(a=parseInt(r("#regionMain.hasVideoPlayer .articlePositioner").css("margin-top"),10))&&(t=Math.max(t,a)),e=i-t+e,r("html, body").animate({scrollTop:e},function(){l.mediaMarker.autoScrollEnabled=!0})))}}(t,n))}function e(e){l.contextMenu.setupMenuEvent(e),r("html, body").stop(!0,!1),i()}l.mediaMarker={initAudioMarkers:function(){u=document.getElementById("wolplayer"),c=u.player,l.iOS?(u.addEventListener("timeupdate",function(e){t(e.target.currentTime)}),u.addEventListener("pause",e)):(c.media.addEventListener("timeupdate",function(e){t(e.target.currentTime)}),c.media.addEventListener("pause",e))},getMarker:m,clearMarkers:i,playSelected:function(e){!function(e){var t,n=0;l.media.showAudioPlayer();var i,a,o,r=m(l.utilities.getFirstActionableIdInScope(!1,e));r&&void 0!==u&&(o=g(r.startTime),e.each(function(e){var t=m(this);t&&(n+=g(t.duration))}),clearTimeout(s),l.iOS||void 0===c?(a=function(){s=setTimeout(function(){},1e3*n)},!d&&isNaN(u.duration)?(u.play(),u.pause(),u.addEventListener("canplay",function(e){e.target.removeEventListener(e.type,arguments.callee),u.addEventListener("progress",function(e){e.target.removeEventListener(e.type,arguments.callee),u.currentTime=o,u.addEventListener("seeked",function(e){e.target.removeEventListener(e.type,arguments.callee),u.play(),d=!0,a()})})})):(u.setCurrentTime(o),t=window.setInterval(function(){u.currentTime===o?(u.play(),window.clearInterval(t)):u.setCurrentTime(o)},100),a())):(a=function(){clearTimeout(s),s=setTimeout(function(){},1e3*n)},d?(c.setCurrentTime(o),t=window.setInterval(function(){p(u.currentTime)===o?(c.play(),window.clearInterval(t)):c.setCurrentTime(o)},100),a()):(c.play(),i=function e(t){t.target.removeEventListener(t.type,e),c.setCurrentTime(o),c.play(),d=!0,a()},l.WindowsPhone?c.media.addEventListener("progress",i):(c.media.addEventListener("loadeddata",i),c.media.addEventListener("playing",function e(t){t.target.removeEventListener(t.type,e),c.media.addEventListener("timeupdate",i)})))))}(e)},stop:function(){l.iOS?(u.pause(),u.setCurrentTime(0)):(c.pause(),c.setCurrentTime(0)),i()},updateVideoPosition:function(e){n(function(e){var t;null!=e&&(e.paragraph?t=sprintf("#content [data-pid='%s']",e.paragraph):e.chapter&&(t=sprintf("#content [id^=v%s-%s-%s-]",l.getBookNumber(),e.chapter,e.verse)));return t}(e))},autoScrollEnabled:!1}}(jQuery,app),function(s,u){"use strict";function i(e,t,n,i,a){var o=r(e);return o[t]=n,l(o,e,i,a)}function t(e){e=/(\d+):*(\d*)-*(\d*):*(\d*)/.exec(URI(e||location.href).fragment(!0).h);if(e){e={stPar:parseInt(e[1],10),stOff:parseInt(e[2],10),edPar:parseInt(e[3],10),edOff:parseInt(e[4],10)};return isNaN(e.stOff)&&(e.stOff=0),isNaN(e.edPar)?(e.edPar=e.stPar+1,e.edOff=0):isNaN(e.edOff)&&(e.edPar+=1,e.edOff=0),e}return null}function r(e){e=e||window.location.href;var e=URI(e).fragment(),t={};return 0<e.length&&e.split("&").forEach(function(e){e=e.split("="),t[e[0]]=e[1]||""}),t}function l(n,e,t,i){e=e||window.location.href;var a=Object.keys(n).sort().reduce(function(e,t){return 0<t.length?e+"&"+t+(0<n[t].length?"="+n[t]:""):e},"#");a=(a=a.replace(/#&/,"#")).replace(/#$/,"");e=e.split("#",1)[0];return e+=a,!i&&!0!==i&&Modernizr.history&&history.replaceState(null,window.location.title,e),!t&&!0!==t&&Modernizr.history&&history.pushState(null,window.location.title,e),e}function a(e,t,n,i){var a=r(t);return delete a[e],l(a,t,n,i)}u.url={matchUrlToHighlight:function(){var n,e="h="+URI().fragment(!0).h,t=u.highlightManager.getHighlightUrlFragment(2<e.length);e.startsWith(t)||(n=window.location.href,s("[id]").each(function(e,t){n=function(e,t,n,i){t=t||window.location.href;var a=URI(t).fragment();return e!==a?t:l({},t,n,i)}(t.id,n,!0,!0)}),n=a("h",n,!0,!0),n=a("v",n,!0,!0),e=(t=null!=(t=null!=(t=u.highlightManager.getHighlightUrlFragment())&&t.startsWith("h=")&&e.split("-")[0].split(":")[0]===t.split("-")[0].split(":")[0]&&-1!==t.indexOf("-")?e.split("-")[0]+"-"+t.split("-")[1]:t)?t.split("=",2):["",""])[0],t=t[1]||"",i(n,e,t,!0,!1))},getHighlightTextRangeFromUrl:t,getParagraphRangeFromUrl:function(){var e=t();return e&&0===e.edOff&&--e.edPar,e},getVersesFromUrl:function(e){var i,a,t=URI(e||location.href).fragment(!0).v,n=s();return n=null!=t?-1!==t.indexOf("-")?(1===(t=t.split("-",2)).length&&(t[1]=t[0]),i=t[0].split(":").map(function(e){return parseInt(e,10)}),a=t[1].split(":").map(function(e){return parseInt(e,10)}),e=s("[id^=v].v").map(function(e,t){return[t.id.replace("v","").split("-")]}),e=s.grep(e,function(e){if((e=e.map(function(e){return parseInt(e,10)}))[0]<i[0]||e[0]>a[0])return!1;var t=a[0]>e[0]?Number.MAX_VALUE:a[1],n=i[0]<e[0]?Number.MIN_VALUE:i[1];if(e[1]<n||e[1]>t)return!1;t=t>e[1]?Number.MAX_VALUE:a[2],n=n<e[1]?Number.MIN_VALUE:i[2];return!(e[2]<n||e[2]>t)}),s.map(e,function(e){e="#v"+e[0]+"-"+e[1]+"-"+e[2]+"-"+e[3];return s(e)})):u.utilities.getAllVerseSegmentsFromIDAttribute("v"+t.replace(/:/g,"-")):n},getVerseRangeFromUrl:function(){var e,t={},n=(n=URI(e||location.href).fragment(!0).v,e=[],e=null!=n?n.split("-",2):e);return n.length&&(e=n[0].split(":").map(function(e){return parseInt(e,10)}),t.startBook=e[0],t.startChapter=1<e.length?e[1]:-1,t.startVerse=2<e.length?e[2]:-1,e=1<n.length?n[1].split(":").map(function(e){return parseInt(e,10)}):e,t.endBook=e[0],t.endChapter=1<e.length?e[1]:-1,t.endVerse=2<e.length?e[2]:-1),t},makeDateDataUrl:function(e,t,n,i){var a=new Date(e.getTime()+864e5*t),o=u.getUILanguage(),r=u.getRsConfigSymbol(),l=u.getLibrarySymbol(),t=null;return i&&(o=u.getContentUILanguage(),r=u.getContentRsConfigSymbol(),l=u.getContentLibrarySymbol()),e.getHours()!==a.getHours()&&(a=new Date(a.getTime()+36e5)),i=u.getCommand(n),e=s("#newMeetingsPage").val(),n?r&&l&&(t=sprintf("/wol/dt/%s/%s/%d/%d/%d",r,l,a.getFullYear(),a.getMonth()+1,a.getDate())):"meetings"===i||"msync"===i||e?o&&r&&l&&(u.utilities.getWeekNumber(a),e=u.utilities.getWeekNumber(a),t=sprintf("/%s/wol/meetings/%s/%s/%d/%d",o,r,l,e[0],e[1])):o&&r&&l&&(t=sprintf("/%s/wol/dt/%s/%s/%d/%d/%d",o,r,l,a.getFullYear(),a.getMonth()+1,a.getDate())),t},makeDailyTextUrl:function(e){var t=u.getContentUILanguage(),n=u.getContentRsConfigSymbol(),i=u.getContentLibrarySymbol(),a=null;return a=t&&n&&i?sprintf("/%s/wol/h/%s/%s/%d/%d/%d",t,n,i,e.getFullYear(),e.getMonth()+1,e.getDate()):a},removeUrlFragmentByKey:a,getUrlFragmentValueByKey:function(e,t){return r(e)[t]},setFragmentToPropagate:function(){u.isDocument()||s("a.resultsNavDocumentLink, .resultAlternatePubList a").on("click",function(){var e=URI();e.hasFragment("s")&&e.removeFragment("s"),(e.hasFragment("h")||e.hasFragment("v"))&&(function(e){var n=!1,i=[],t=e.fragment(!0).h,e=null!=t?t.split("-"):[];0<e.length&&s.each(e,function(e,t){t=t.split(":");i.push(parseInt(t[0],10));t="#p"+t[0];0<s(t).length&&(n=!0)});n||(t=s("#article").find("[data-pid]").filter(":first").data("pid"),e=s("#article").find("[data-pid]").filter(":last").data("pid"),i[0]<t&&i[1]>e&&(n=!0));return n}(e)||function(e){var t=e.fragment(!0).v,n=null!=t?t.split("-"):[];if(0<n.length){var i=u.getBookNumber(),e=u.getChapterNumber(),t=n[0].split(":").map(function(e){return parseInt(e,10)}),n=null!=n[1]?n[1].split(":").map(function(e){return parseInt(e,10)}):t;return t[0]<=i<=n[0]&&t[1]<=e<=n[1]}}(e))&&(this.href=this.href.split("#")[0]+"#"+e.fragment())})},setUrlFragmentByKey:i,disableDisabledNextPrevButtons:function(){s(".resultNavLeft .disabled, .resultNavRight .disabled").find("a").on("click",function(e){e.preventDefault()})},matchUrlToSelection:function(){var e=a("s",e=window.location.href,!0,!0),t=u.studyPane.getSelectionUrlFragment();i(e,(t=null!=t?t.split("=",2):["",""])[0],t[1]||"",!0,!1)},matchUrlToStudyPane:function(){var e,t=window.location.href;s("#study").is(":visible")?i(t=a("study",t,!0,!0),(e=null!=(e=u.studyPane.getNavigationTabFragment())?e.split("=",2):["",""])[0],e[1]||"",!0,!1):a("study",t,!0,!1)},simplifyHighlightFragment:function(e){var t=a("h",e,!0,!0);return t=a("v",t,!0,!0),e=u.highlightManager.getHighlightUrlFragment(),i(t,(e=null!=e?e.split("=",2):["",""])[0],e[1]||"",!0,!0)}}}(jQuery,app),function(n,i){"use strict";function t(e){var t=!navigator.userAgent.match(/IEMobile/);e.jumpTo({},t),0<n("#study").length&&i.studyPane.isStudyPaneVisible()&&(t=i.highlightManager.getFirstHighlightedId(),i.getVerseNumberFromIDAttribute(t)&&(t=i.studyPane.createSectionKeyFromVerseKey(t),0<(t=n("[data-key="+t+"]")).length&&t.scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-i.studyPane.getStudyPaneScrollOffset()})))}function a(){var e=n(".hl, .mk, .mkhl");return"s"!==i.getCommand()&&0<e.length&&(t(e),!0)}i.jumpHighlight={internalLinkHandler:function(e){e=e.target.location,(e=URI(e)).directory()===URI().directory()&&(i.highlightManager.removeHighlight(!0),i.highlightManager.highlight(e.fragment()),i.jumpHighlight.jumpToMarkOrHighlight())},hasHashJump:function(){var e=window.location.hash,t=URI();return!!(0<e.length&&(t.hasFragment("h")||t.hasFragment("v")||t.hasFragment("p")||document.getElementById(e.substr(1))))},jumpToMarkOrHighlight:a,hashJump:function(e){var t,e=e?e.target.hash||e.currentTarget.hash:window.location.hash;try{t=n(e)}catch(e){}return t&&0<t.length?t.jumpTo({},!0):a()},jumpToElement:t,initialJump:function(){return function(){var e=window.location.hash;try{return 0<e.length&&n("#article").find(e.substr(1))?(t(n("#article").find(e.substr(1))),!0):!1}catch(e){return!1}}()||a()||i.studyPane.jumpToSelectedVerse()}}}(jQuery,app),function(l,s){var n="studyDiscover",i="selected",a="collapsed",o={discover:"studyDiscover",parallel:"studyParallel",marginal:"studyMarginals"};function t(e){(e=l(e)).addClass(i),s.url.matchUrlToSelection()}function e(){return l("#article").find("."+i).first()}function r(){e().closest(".v").scrollIntoView({topOffset:l("#regionHeader").height()+10})}function u(){l("span.tt."+i).removeClass(i),s.url.matchUrlToSelection()}function c(){l("#study").find("."+i).removeClass(i)}function d(e){u(),t(e);e=l(e).closest("[id]");0<e.length&&x(e[0].id,!1)}function p(){return s.layout.toggleStudyPane(!0),d(l(this).children("span.cl, span.vl")),A(n)||(l(".tabItem.parallel").not(".active").addClass("flash"),setTimeout(function(){l(".tabItem.parallel").removeClass("flash")},2e3)),!1}function g(){return s.layout.toggleStudyPane(!0),L(n),u(),l(this).children("span.tt.fn").addClass(i),k("verseFootnote-"+l(this).data("fnid")),!1}function m(){return s.layout.toggleStudyPane(!0),L(n),u(),l(this).children("span.tt.m").addClass(i),C("verseMarginal-"+l(this).data("bid").split("-")[0]),!1}function h(){u();var e="#v"+l(this).data("key")+"-1";t(l(".bible").find(e).find(".tt").first());x(e,!1),r()}function f(){if(l(this).hasClass("populated"))return!1;var e=l(this).data("extractId");return function(e){u();e=e.split("-")[1],e=l("#article").find('a[data-bid="'+e+'-1"]');e.length&&(e.closest("[id]").scrollToTop({duration:250,easing:"easeOutExpo",topOffset:b()}),e.find(".tt").addClass(i,100,"easeOutElastic"))}(e),C(e),!1}function y(){var e=l(this).data("extractId");return function(e){u();e=e.split("-")[1],e=l('a[data-fnid="'+e+'"]');e.length&&(e.scrollToTop({duration:250,easing:"easeOutExpo",topOffset:b()}),e.find(".tt").addClass(i,100,"easeOutElastic"))}(e),k(e),!1}function b(){return l("#regionHeader").height()}function v(){return parseFloat(l(".navigationTabsContainer").css("border-bottom-width"))}function C(t){c();var e=l(w(t)),n=l(e).data("src")+"?snip=yes";e.removeClass(a),e.addClass(i),e.parent().parent().scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-v()}),S(t,"loading").hide().removeClass("hidden").show(250,"easeOutExpo",function(){s.web.ajax(n).done(function(e){!function(e,t){w(e).addClass("populated"),S(e,"loading").hide();e=l("[data-extract-target-id='"+e+"'].extract");e.hide().empty().append(t).show(),e.append('<div class="padding">&nbsp;</div>'),function(e){e=l(e).find(".tooltipVideo");1<e.length&&(e=e.filter(":visible"));e.each(function(e,t){t=l(t),s.video.setupTooltipPlayer(t.attr("id"),parseFloat(t.data("startTime")),parseFloat(t.data("duration")),!1)})}(e),s.setupTooltip(e)}(t,e)})}),S(t,"extract").empty().addClass(i)}function w(e){return l("[data-extract-id='"+e+"']")}function S(e,t){return l("[data-extract-target-id='"+e+"']."+t)}function k(e){l("#study").find("li.selected").removeClass(i);e=l(w(e));e.addClass(i),e.parent().parent().scrollToTop({duration:250,easing:"easeOutExpo",topOffset:-v()})}function x(e,t){e=T(e);c(),t&&L(n),function(e,t){t=l(P(e,t));l(P(e,null)).removeClass(i),t.addClass(i).find(".group.collapsible").removeClass(a)}(n,e),function(e){{var t,n,i,a,o,r;e&&"undefined"!==e&&0<e.length&&((a=l("#studyParallel")).find(".helpText").hide(),a.find(".extract").empty(),a.find(".loading").hide().removeClass("hidden").show(250,"easeOutExpo"),o=e.split("-"),t=o[0],n=o[1],r=o[2],i=s.getContentRsConfigSymbol(),a=s.getContentLibrarySymbol(),e=s.getPubSym(),s.getContentLibraryLanguageSymbol(),s.getPubYear(),o=s.getContentUILanguage(),r=sprintf("/%s/wol/parallel/%s/%s/%s/%s/%s/%s?snip=yes",o,i,a,e,t,n,r),s.web.ajax(r).done(function(e){var t;t=e,(e=l("#studyParallel")).find(".loading").hide(),e.find(".extract").append(t),s.setupTooltip(l(".extract"))}))}}(e)}function A(e){e=l(P(e)+"."+i);return 0<e.length&&(e.each(function(e,t){l(t).scrollIntoView()}),!0)}function P(e,t){return null!=t&&0<t.length?"#"+e+" .section[data-key="+t+"]":"#"+e+" .section"}function T(e){e=e.split(/[v,-]/);return e.shift(),e.pop(),e.join("-")}function I(){var e=l(this).parent(),t=!e.hasClass(a);e.toggleClass(a,t,250,"easeOutExpo")}function E(){var e=l(this),t=!e.hasClass(a);e.toggleClass(a,t,250,"easeOutExpo"),e.hasClass("populated")||e.find("a.title").trigger("click")}function L(e){s.tabs.activateContent(l(".navigationTabs [data-related-content="+e+"]"))}function R(e){var t,n=l("#article.bible");0<n.length&&!s.layout.isFloatingMode()&&(t=n.find(".fn.mkhl"),n=n.find(".m.mkhl"),0<t.length?t.each(g):0<n.length?n.each(m):0<e.item.length&&p.bind(e.item)())}s.studyPane={init:function(){var e;(e=l("#article.bible")).find(".cl").each(function(){l(this).append('<span class="tt cl"></span>')}),e.find(".vl").each(function(){l(this).append('<span class="tt vl"></span>')}),e.find("a.fn").each(function(){l(this).append('<span class="tt fn"></span>')}),e.find("a.b").each(function(){l(this).append('<span class="tt m"></span>')}),0<(e=l("#article.bible")).length&&(e.find(".tt.cl").parent().closest(".cl").on("click",p),e.find(".tt.vl").parent().closest(".vl").on("click",p),e.find("span.tt.fn").closest("a").on("click",g),e.find("span.tt.m").closest("a").on("click",m),l(document).on("markhighlighchanged",R)),(e=l("#study")).find(".group.collapsible .header").on("click",I),e.find(".item.collapsible").on("click",E),e.find("div.overview.chapterOnly .collapsible").on("click",function(){l(this).toggleClass("expanded",250,"easeOutExpo"),l(this).toggleClass("collapsed",250,"easeOutExpo")}),e.find("div.overview.chapterOnly a").on("click",function(e){e.stopPropagation()}),e.find(".marginalExpander").each(function(){l(this).on("click",f)}),e.find(".marginalExpander").on("click",".content",function(e){e.stopPropagation()}),e.find("li.footnote").on("click",y),e.find("a.galleryItem").on("click",s.gallery.handleGalleryItem),l("#studyDiscover").find(".section").on("click",h)},createSectionKeyFromVerseKey:T,getStudyPaneScrollOffset:v,getSelectionUrlFragment:function(){var e=l("span.tt.vl."+i).closest("[id]");return 0<e.length?"s="+s.getVerseNumberFromIDAttribute(e.attr("id")):null},processSelectUrlFragment:function(){var e=s.utilities.getFirstIdMatchingVerseNumber(URI().fragment(!0).s);u(),0<e.length&&d(e.first().find("span.tt.vl"))},getNavigationTabFragment:function(){var e=l(".showStudy .navigationTabs [data-related-content].active");return 0<e.length?"study="+function(e){for(var t=Object.keys(o),n=0;n<t.length;n++)if(o[t[n]]===e)return t[n]}(e.data("relatedContent")):null},jumpToSelectedVerse:function(){return 0<e().length&&(A(n),r(),!0)},processStudyUrlFragment:function(){var e=URI().fragment(!0).study;(e=o[e])&&(L(e),s.layout.toggleStudyPane(!0))},isStudyPaneVisible:function(){var e=l("#study");if(s.layout.isFloatingMode()){if(e.is(".activePane.slideIn"))return!0}else if(e.hasClass("activePane"))return!0;return!1}}}(jQuery,app),function(o,r){var n=!1;function i(e,t){var e=o(e),n=new URI(e.find("img").data("src"));n.setQuery("snip","yes");var n=n.toString(),i=e.find("a").attr("href"),a=o(".itemContainer");return c(!0),a.addClass("faded"),r.web.ajax(n).done(function(e){a.html(e).removeClass("faded").show(250,"easeOutExpo",function(){var e=o(".gallerySelectedItem");r.video.setupEmbeddedVideoPlayer(e)}),c(!1),r.setupTooltip(a),p(i),l(t,!t),r.utilities.isGalleryNav()&&Modernizr.history&&window.history.pushState(null,"",i)}).fail(function(){c(!1)}),!1}function l(e,t){0<o("#galleryModal").length&&(s(),r.media.prepareGalleryCaptionAudio(),u(),c(!1),e&&(o(".mediaCaption").addClass("hidden"),o(".mediaContent").imagesLoaded().then(function(){o(".mediaCaption").removeClass("hidden");var e=o(".mediaContent img"),t=r.images.setupLightboxItems(e);o(e).on("click",this,function(){r.images.callLightbox(this,t)}).css("cursor","pointer")})),t&&d(),o("#galleryModalContainer").hasClass("fadeIn")&&o("body").addClass("galleryUnderlay noscroll"))}function a(){var e=o(".carouselContainer .tile"),t=o("#galleryModal");e.on("click",function(){return r.video.findPlayingPlayers(t).forEach(function(e){r.video.destroyPlayers(e)}),i(this,!0)})}function s(){o("span.citationWithMedia a.b").filter(function(){return 0===o(this).children().length}).each(function(e,t){o(t).prepend('<span class="icon"></span>'),t.href=t.href+"/media"})}function u(){var e=o(".gallerySelectedItem"),t=e.data("mmidx"),n=e.data("chapter"),e=o(".carouselContainer"),t="[data-mmidx='"+t+"']";e.find(".selected").removeClass("selected"),n&&(t+="[data-chapter='"+n+"']"),e.find(t).addClass("selected").scrollIntoView({direction:"horizontal"})}function c(e){var t=o("#galleryModal").find(".loading");e?t.removeClass("hidden"):t.addClass("hidden")}function d(){o("#galleryModal").find(".closeBtn").on("click",g),o("body").on("keydown",t)}function t(e){27!==e.which||o("div.pswp").is(":visible")||(g(),o("body").off("keydown",t))}function p(e){e=parseInt(r.url.getUrlFragmentValueByKey(e,"chapter"),0);e&&o(".gallerySelectedItem").data("chapter",e)}function g(){var e=o("#galleryModalContainer");if(e.hasClass("fadeOut"))return!1;o("#galleryModal").find(".closeBtn").off("click");var t=o("#galleryPlayer").get(0);return t&&t.pause(),t=o("#galleryModal"),r.video.findPlayingPlayers(t).forEach(function(e){r.video.destroyPlayers(e)}),o("body.galleryUnderlay").removeClass("galleryUnderlay noscroll"),e.removeClass("fadeIn animated"),e.addClass("fadeOut animated"),o(".gallery, .navigationContents").removeClass("hasGalleryModalContainer"),r.utilities.isGalleryNav()&&(n?window.history.back():((e=window.location.href.split("/")).pop(),e=e.join("/"),window.history.replaceState(null,"",e))),!1}r.gallery={setupGalleryMediaReload:function(){window.onpopstate=function(e){if("gallery"===URI().segment(2)&&Modernizr.history){var t=o(".carouselContainer .tile"),n=document.location.pathname+document.location.hash,n=t.find('a[href="'+n+'"]');if(n[0])return i(n[0].parentElement,!0)}}},scrollCarouselIntoView:u,initGallery:function(){o(".gallery").find("a.galleryItem").on("click",r.gallery.handleGalleryItem),a()},initGalleryItem:l,handleGalleryItem:function(e){var t,n=this.href,i=n.split("#")[0]+"?snip=yes";return(t=o("#galleryModal")).find(".contents").empty(),t.find(".loading").removeClass("hidden"),function(){var e=o("#galleryModalContainer");o("body").addClass("galleryUnderlay noscroll"),o("#galleryModal").on("click",function(e){e.stopPropagation()}),e.one("click",g),e.removeClass("fadeOut animated"),e.addClass("fadeIn animated"),o(".gallery, .navigationContents").addClass("hasGalleryModalContainer")}(),t.show(),r.web.ajax(i).done(function(e){e=e,o("#galleryModal").find(".contents").append(e);e=o(".gallerySelectedItem");r.video.setupEmbeddedVideoPlayer(e),r.setupTooltip(e),a(),r.gallery.setupGalleryMediaReload(),p(i),r.gallery.initGalleryItem(!0,!0),r.utilities.isGalleryNav()&&Modernizr.history&&(window.history.pushState(null,"",n),window.scroll(0,0))}).fail(function(){c(!1),d()}),e.preventDefault(),!1},handlePlayPauseButton:function(e){var t=o(e.currentTarget),n=document.getElementById("galleryPlayer");t.hasClass("playBtn")?(t.removeClass("playBtn").addClass("pauseBtn"),n.currentTime=0,n.play(),e.stopPropagation()):t.hasClass("pauseBtn")&&(t.removeClass("pauseBtn").addClass("playBtn"),n.pause(),e.stopPropagation())},setGalleryItemChapterNumberFromUrl:p,setupCitationsWithMedia:s}}(jQuery,app),function(){"use strict";app.validator={containsNoTags:function(e){var t,n=!1,i=e;if("string"!=typeof i)return!1;for(;n|=-1!==(t=e=i).indexOf("<")||-1!==t.indexOf(">")||/(&#x0*3(c|e))|(&#0*6(0|2))|(\\u003(c|e))/i.test(t),e!==(i=decodeURIComponent(e)););return!n},isValidLocale:function(e){return/^[\w\-]{2,10}$/.test(e)},isValidRsconf:function(e){return/^[\w\-]{2,10}$/.test(e)},isValidLib:function(e){return/^[\w\-]{2,10}$/.test(e)}}}(jQuery),Handlebars.registerHelper("getUrl",function(e,t,n){"use strict";var i=URI().query(!0).url;return i&&0<i.length?new Handlebars.SafeString(i.replaceToken("locale",e).replaceToken("rsconf",t).replaceToken("library",n)):""}),Handlebars.registerHelper("getLocale",function(){"use strict";return app.getUILanguage()}),Handlebars.registerHelper("getRsconf",function(){"use strict";return app.getRsConfigSymbol()}),Handlebars.registerHelper("getLib",function(){"use strict";return app.getLibrarySymbol()}),Handlebars.registerHelper("toString",function(e){"use strict";return""+e}),Handlebars.registerHelper("toLower",function(e){"use strict";return e.toLowerCase()}),Handlebars.registerHelper("toJson",function(e){"use strict";return JSON.stringify(e)}),Handlebars.registerHelper("isNotCurrentRsconfLib",function(e,t){"use strict";return app.getRsConfigSymbol()!=="r"+e&&app.getLibrarySymbol()!==t}),Handlebars.registerHelper("hasRubyTag",function(e){return-1!==e.indexOf("<ruby>")}),Handlebars.registerHelper("getValueByPath",function(){"use strict";for(var e=arguments[arguments.length-1].data.root,t=0;t<arguments.length-1;t++)try{e=e[arguments[t]]}catch(e){return null}return e}),Handlebars.registerHelper({isArray:function(e){"use strict";return Array.isArray(e)},isBoolean:function(e){"use strict";return"boolean"==typeof e},isString:function(e){"use strict";return"string"==typeof e},isNull:function(e){"use strict";return null==e}}),Handlebars.registerHelper({isoDateToYmd:function(e){"use strict";if("string"!=typeof e)return e;e=e.split(/[: T-]/).map(parseFloat);return e[0]+"-"+e[1]+"-"+e[2]},isoDateToYmdHms:function(e){"use strict";if("string"!=typeof e)return e;e=e.split(/[: T-]/).map(parseFloat);return e[0]+"-"+e[1]+"-"+e[2]+" "+e[3]+":"+e[4]+":"+e[5]}}),Handlebars.registerHelper({add:function(){"use strict";for(var e=0,t=arguments.length;t--;)"number"==typeof arguments[t]&&(e+=arguments[t]);return e},subtract:function(){"use strict";for(var e=0,t=arguments.length;t--;)"number"==typeof arguments[t]&&(e-=arguments[t]);return e},multiply:function(){"use strict";for(var e=0,t=arguments.length;t--;)"number"==typeof arguments[t]&&(e*=arguments[t]);return e},divide:function(){"use strict";for(var e=0,t=arguments.length;t--;)"number"==typeof arguments[t]&&(e/=arguments[t]);return e},modulus:function(){"use strict";for(var e=0,t=arguments.length;t--;)"number"==typeof arguments[t]&&(e%=arguments[t]);return e}}),Handlebars.registerHelper({eq:function(e,t){"use strict";return e===t},ne:function(e,t){"use strict";return e!==t},lt:function(e,t){"use strict";return e<t},gt:function(e,t){"use strict";return t<e},lte:function(e,t){"use strict";return e<=t},gte:function(e,t){"use strict";return t<=e},and:function(e,t){"use strict";return e&&t},or:function(e,t){"use strict";return e||t},not:function(e){"use strict";return!e}}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.Banner=Handlebars.template({1:function(e,t,n,i,a){return" bannerHidden"},3:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.escapeExpression,e=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="bannerDismissible" data-save-dismiss="'+l((e(n,"toString")||t&&e(t,"toString")||r).call(o,null!=t?e(t,"isPermanentlyDismissible"):t,{name:"toString",hash:{},data:a,loc:{start:{line:3,column:59},end:{line:3,column:96}}}))+'" data-dismiss-id="'+l("function"==typeof(t=null!=(t=e(n,"dismissibleBannerId")||(null!=t?e(t,"dismissibleBannerId"):t))?t:r)?t.call(o,{name:"dismissibleBannerId",hash:{},data:a,loc:{start:{line:3,column:115},end:{line:3,column:138}}}):t)+'">\n            <span class="icon"></span>\n        </span>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,r,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="banner '+e.escapeExpression(typeof(r=null!=(r=c(n,"messageClasses")||(null!=t?c(t,"messageClasses"):t))?r:s)==u?r.call(l,{name:"messageClasses",hash:{},data:a,loc:{start:{line:1,column:19},end:{line:1,column:37}}}):r)+(null!=(o=c(n,"if").call(l,null!=t?c(t,"dismissibleBannerId"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:37},end:{line:1,column:84}}}))?o:"")+'">\n'+(null!=(o=c(n,"if").call(l,(c(n,"or")||t&&c(t,"or")||s).call(l,null!=t?c(t,"isDismissible"):t,null!=t?c(t,"isPermanentlyDismissible"):t,{name:"or",hash:{},data:a,loc:{start:{line:2,column:10},end:{line:2,column:53}}}),{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:4},end:{line:6,column:11}}}))?o:"")+'    <div class="bannerContent">\n    '+(null!=(o=typeof(r=null!=(r=c(n,"message")||(null!=t?c(t,"message"):t))?r:s)==u?r.call(l,{name:"message",hash:{},data:a,loc:{start:{line:8,column:4},end:{line:8,column:17}}}):r)?o:"")+"\n    </div>\n</div>\n"},useData:!0}),this.Handlebars.templates.CardHeader=Handlebars.template({1:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    class="\n    cardThumbnailImage\n'+(null!=(o=s(n,"if").call(r,null!=t?s(t,"hideThumbnailImage"):t,{name:"if",hash:{},fn:e.program(2,a,0),inverse:e.program(4,a,0),data:a,loc:{start:{line:5,column:4},end:{line:9,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"isNull")||t&&s(t,"isNull")||l).call(r,null!=t?s(t,"type"):t,{name:"isNull",hash:{},data:a,loc:{start:{line:10,column:10},end:{line:10,column:23}}}),{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.program(14,a,0),data:a,loc:{start:{line:10,column:4},end:{line:53,column:11}}}))?o:"")+"\n"+(null!=(o=s(n,"if").call(r,null!=t?s(t,"iconSymbol"):t,{name:"if",hash:{},fn:e.program(23,a,0),inverse:e.program(25,a,0),data:a,loc:{start:{line:55,column:4},end:{line:59,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"or")||t&&s(t,"or")||l).call(r,null!=t?s(t,"englishSymbol"):t,null!=(o=null!=t?s(t,"publicationToken"):t)?s(o,"englishSymbol"):o,{name:"or",hash:{},data:a,loc:{start:{line:60,column:10},end:{line:60,column:59}}}),{name:"if",hash:{},fn:e.program(27,a,0),inverse:e.noop,data:a,loc:{start:{line:60,column:4},end:{line:62,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,null!=(o=null!=t?s(t,"publicationToken"):t)?s(o,"englishSymbol"):o,{name:"if",hash:{},fn:e.program(29,a,0),inverse:e.noop,data:a,loc:{start:{line:63,column:4},end:{line:65,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,null!=t?s(t,"englishSymbol"):t,{name:"if",hash:{},fn:e.program(31,a,0),inverse:e.noop,data:a,loc:{start:{line:66,column:4},end:{line:68,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,null!=t?s(t,"categories"):t,{name:"if",hash:{},fn:e.program(33,a,0),inverse:e.noop,data:a,loc:{start:{line:69,column:4},end:{line:73,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,null!=t?s(t,"pubType"):t,{name:"if",hash:{},fn:e.program(36,a,0),inverse:e.noop,data:a,loc:{start:{line:74,column:4},end:{line:76,column:11}}}))?o:"")+'\n    " \n'+(null!=(o=s(n,"if").call(r,null!=(o=null!=t?s(t,"publicationToken"):t)?s(o,"englishSymbol"):o,{name:"if",hash:{},fn:e.program(38,a,0),inverse:e.noop,data:a,loc:{start:{line:79,column:4},end:{line:81,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,null!=t?s(t,"englishSymbol"):t,{name:"if",hash:{},fn:e.program(40,a,0),inverse:e.noop,data:a,loc:{start:{line:82,column:4},end:{line:84,column:11}}}))?o:"")},2:function(e,t,n,i,a){return"        hidden\n"},4:function(e,t,n,i,a){return"        thumbnail\n"},6:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"cardImageType"):t,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.program(9,a,0),data:a,loc:{start:{line:11,column:8},end:{line:22,column:15}}}))?a:""},7:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"cardImageType")||(null!=t?o(t,"cardImageType"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"cardImageType",hash:{},data:a,loc:{start:{line:12,column:12},end:{line:12,column:29}}}):o)+"\n"},9:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"content"):t,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.program(12,a,0),data:a,loc:{start:{line:14,column:12},end:{line:20,column:19}}}))?a:""},10:function(e,t,n,i,a){return"                publication\n"},12:function(e,t,n,i,a){return"                document\n"},14:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,0,{name:"eq",hash:{},data:a,loc:{start:{line:24,column:14},end:{line:24,column:25}}}),{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a,loc:{start:{line:24,column:8},end:{line:27,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,1,{name:"eq",hash:{},data:a,loc:{start:{line:28,column:14},end:{line:28,column:25}}}),{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a,loc:{start:{line:28,column:8},end:{line:31,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,2,{name:"eq",hash:{},data:a,loc:{start:{line:32,column:14},end:{line:32,column:25}}}),{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a,loc:{start:{line:32,column:8},end:{line:35,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,3,{name:"eq",hash:{},data:a,loc:{start:{line:36,column:14},end:{line:36,column:25}}}),{name:"if",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a,loc:{start:{line:36,column:8},end:{line:39,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,10,{name:"eq",hash:{},data:a,loc:{start:{line:40,column:14},end:{line:40,column:26}}}),{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a,loc:{start:{line:40,column:8},end:{line:43,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,20,{name:"eq",hash:{},data:a,loc:{start:{line:44,column:14},end:{line:44,column:26}}}),{name:"if",hash:{},fn:e.program(21,a,0),inverse:e.noop,data:a,loc:{start:{line:44,column:8},end:{line:47,column:15}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,30,{name:"eq",hash:{},data:a,loc:{start:{line:48,column:14},end:{line:48,column:26}}}),{name:"if",hash:{},fn:e.program(21,a,0),inverse:e.noop,data:a,loc:{start:{line:48,column:8},end:{line:51,column:15}}}))?o:"")+"\n"},15:function(e,t,n,i,a){return"            container\n"},17:function(e,t,n,i,a){return"            publication\n"},19:function(e,t,n,i,a){return""},21:function(e,t,n,i,a){return"            document\n"},23:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        icon-"+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"iconSymbol")||(null!=t?o(t,"iconSymbol"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"iconSymbol",hash:{},data:a,loc:{start:{line:56,column:13},end:{line:56,column:27}}}):o)+"\n"},25:function(e,t,n,i,a){return"        icon-default\n"},27:function(e,t,n,i,a){return"        publication\n"},29:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        pub-"+e.escapeExpression(e.lambda(null!=(e=null!=t?o(t,"publicationToken"):t)?o(e,"englishSymbol"):e,t))+"\n"},31:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        pub-"+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"englishSymbol")||(null!=t?o(t,"englishSymbol"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"englishSymbol",hash:{},data:a,loc:{start:{line:67,column:12},end:{line:67,column:29}}}):o)+"\n"},33:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"categories"):t,{name:"each",hash:{},fn:e.program(34,a,0),inverse:e.noop,data:a,loc:{start:{line:70,column:8},end:{line:72,column:17}}}))?a:""},34:function(e,t,n,i,a){return"            cat-"+e.escapeExpression(e.lambda(t,t))+"\n"},36:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        type-"+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"pubType")||(null!=t?o(t,"pubType"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"pubType",hash:{},data:a,loc:{start:{line:75,column:13},end:{line:75,column:24}}}):o)+"\n"},38:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        data-pub-symbol="'+e.escapeExpression(e.lambda(null!=(e=null!=t?o(t,"publicationToken"):t)?o(e,"englishSymbol"):e,t))+'"\n'},40:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        data-pub-symbol="'+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"englishSymbol")||(null!=t?o(t,"englishSymbol"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"englishSymbol",hash:{},data:a,loc:{start:{line:83,column:25},end:{line:83,column:42}}}):o)+'"\n'},42:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    cardLine1\n    ellipsized\n"+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"marginalClassification"):t,2,{name:"eq",hash:{},data:a,loc:{start:{line:90,column:10},end:{line:90,column:39}}}),{name:"if",hash:{},fn:e.program(43,a,0),inverse:e.noop,data:a,loc:{start:{line:90,column:4},end:{line:93,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"marginalClassification"):t,3,{name:"eq",hash:{},data:a,loc:{start:{line:94,column:10},end:{line:94,column:39}}}),{name:"if",hash:{},fn:e.program(45,a,0),inverse:e.noop,data:a,loc:{start:{line:94,column:4},end:{line:97,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"hasRubyTag")||t&&s(t,"hasRubyTag")||l).call(r,null!=t?s(t,"line1"):t,{name:"hasRubyTag",hash:{},data:a,loc:{start:{line:98,column:10},end:{line:98,column:28}}}),{name:"if",hash:{},fn:e.program(47,a,0),inverse:e.noop,data:a,loc:{start:{line:98,column:4},end:{line:100,column:11}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"and")||t&&s(t,"and")||l).call(r,null!=t?s(t,"line2"):t,(s(n,"not")||t&&s(t,"not")||l).call(r,null!=t?s(t,"continuedCard"):t,{name:"not",hash:{},data:a,loc:{start:{line:101,column:21},end:{line:101,column:40}}}),{name:"and",hash:{},data:a,loc:{start:{line:101,column:10},end:{line:101,column:41}}}),{name:"if",hash:{},fn:e.program(49,a,0),inverse:e.program(51,a,0),data:a,loc:{start:{line:101,column:4},end:{line:105,column:11}}}))?o:"")},43:function(e,t,n,i,a){return"        marginalsParallel\n"},45:function(e,t,n,i,a){return"        marginalsQuotation\n"},47:function(e,t,n,i,a){return"        hasRuby\n"},49:function(e,t,n,i,a){return"        cardHalfHeight\n"},51:function(e,t,n,i,a){return"        cardSingleLine\n"},53:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"if").call(o,(l(n,"and")||t&&l(t,"and")||r).call(o,null!=t?l(t,"line2"):t,(l(n,"not")||t&&l(t,"not")||r).call(o,null!=t?l(t,"continuedCard"):t,{name:"not",hash:{},data:a,loc:{start:{line:108,column:21},end:{line:108,column:40}}}),{name:"and",hash:{},data:a,loc:{start:{line:108,column:10},end:{line:108,column:41}}}),{name:"if",hash:{},fn:e.program(54,a,0),inverse:e.program(2,a,0),data:a,loc:{start:{line:108,column:4},end:{line:116,column:11}}}))?a:""},54:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        cardLine2\n        ellipsized\n"+(null!=(a=r(n,"if").call(o,(r(n,"hasRubyTag")||t&&r(t,"hasRubyTag")||e.hooks.helperMissing).call(o,null!=t?r(t,"line2"):t,{name:"hasRubyTag",hash:{},data:a,loc:{start:{line:111,column:14},end:{line:111,column:32}}}),{name:"if",hash:{},fn:e.program(55,a,0),inverse:e.noop,data:a,loc:{start:{line:111,column:8},end:{line:113,column:15}}}))?a:"")},55:function(e,t,n,i,a){return"            hasRuby\n"},57:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    chrome\n    cardContainer\n    noTooltips\n"+(null!=(r=l(n,"unless").call(o,(l(n,"or")||t&&l(t,"or")||r).call(o,null!=t?l(t,"continuedCard"):t,(l(n,"isNull")||t&&l(t,"isNull")||r).call(o,null!=t?l(t,"line2"):t,{name:"isNull",hash:{},data:a,loc:{start:{line:123,column:32},end:{line:123,column:46}}}),{name:"or",hash:{},data:a,loc:{start:{line:123,column:14},end:{line:123,column:47}}}),{name:"unless",hash:{},fn:e.program(58,a,0),inverse:e.noop,data:a,loc:{start:{line:123,column:4},end:{line:128,column:15}}}))?r:"")+(null!=(r=l(n,"unless").call(o,null!=t?l(t,"line1"):t,{name:"unless",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:129,column:4},end:{line:131,column:15}}}))?r:"")},58:function(e,t,n,i,a){var o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"if").call(o,(l(n,"or")||t&&l(t,"or")||r).call(o,(l(n,"hasRubyTag")||t&&l(t,"hasRubyTag")||r).call(o,null!=t?l(t,"line1"):t,{name:"hasRubyTag",hash:{},data:a,loc:{start:{line:124,column:18},end:{line:124,column:36}}}),(l(n,"hasRubyTag")||t&&l(t,"hasRubyTag")||r).call(o,null!=t?l(t,"line2"):t,{name:"hasRubyTag",hash:{},data:a,loc:{start:{line:124,column:37},end:{line:124,column:55}}}),{name:"or",hash:{},data:a,loc:{start:{line:124,column:14},end:{line:124,column:56}}}),{name:"if",hash:{},fn:e.program(55,a,0),inverse:e.noop,data:a,loc:{start:{line:124,column:8},end:{line:127,column:15}}}))?a:""},60:function(e,t,n,i,a){var o,r,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=d(n,"if").call(l,null!=t?d(t,"url"):t,{name:"if",hash:{},fn:e.program(61,a,0),inverse:e.program(64,a,0),data:a,loc:{start:{line:135,column:4},end:{line:140,column:11}}}))?o:"")+'\n        <div class="cardThumbnail '+(null!=(o=d(n,"if").call(l,null!=t?d(t,"continuedCard"):t,{name:"if",hash:{},fn:e.program(66,a,0),inverse:e.noop,data:a,loc:{start:{line:142,column:34},end:{line:142,column:68}}}))?o:"")+'">\n'+(null!=(o=d(n,"if").call(l,null!=t?d(t,"imageUrl"):t,{name:"if",hash:{},fn:e.program(68,a,0),inverse:e.program(70,a,0),data:a,loc:{start:{line:143,column:12},end:{line:147,column:19}}}))?o:"")+'        </div>\n\n        <div class="cardTitleBlock">\n            <div class="'+(null!=(o=e.invokePartial(d(i,"line1Classes"),t,{name:"line1Classes",data:a,helpers:n,partials:i,decorators:e.decorators}))?o:"")+" "+c(typeof(r=null!=(r=d(n,"style")||(null!=t?d(t,"style"):t))?r:s)==u?r.call(l,{name:"style",hash:{},data:a,loc:{start:{line:151,column:43},end:{line:151,column:52}}}):r)+'"><span class="sectionIcon"></span>\n                '+(null!=(o=typeof(r=null!=(r=d(n,"line1")||(null!=t?d(t,"line1"):t))?r:s)==u?r.call(l,{name:"line1",hash:{},data:a,loc:{start:{line:152,column:16},end:{line:152,column:27}}}):r)?o:"")+'\n            </div>\n            <div class="'+(null!=(o=e.invokePartial(d(i,"line2Classes"),t,{name:"line2Classes",data:a,helpers:n,partials:i,decorators:e.decorators}))?o:"")+" "+c(typeof(r=null!=(r=d(n,"style")||(null!=t?d(t,"style"):t))?r:s)==u?r.call(l,{name:"style",hash:{},data:a,loc:{start:{line:154,column:43},end:{line:154,column:52}}}):r)+'">\n                '+(null!=(o=typeof(r=null!=(r=d(n,"line2")||(null!=t?d(t,"line2"):t))?r:s)==u?r.call(l,{name:"line2",hash:{},data:a,loc:{start:{line:155,column:16},end:{line:155,column:27}}}):r)?o:"")+'\n            </div>\n        </div>\n\n        <div class="cardTitleDetail">'+(null!=(o=d(n,"if").call(l,null!=(o=null!=t?d(t,"publicationToken"):t)?d(o,"year"):o,{name:"if",hash:{},fn:e.program(72,a,0),inverse:e.program(74,a,0),data:a,loc:{start:{line:160,column:12},end:{line:169,column:20}}}))?o:"")+'</div>\n\n        <div class="cardChevron">\n            <div class="icon"></div>\n        </div>\n\n'+(null!=(o=d(n,"unless").call(l,(d(n,"or")||t&&d(t,"or")||s).call(l,null!=t?d(t,"url"):t,null!=t?d(t,"imageUrl"):t,{name:"or",hash:{},data:a,loc:{start:{line:176,column:14},end:{line:176,column:31}}}),{name:"unless",hash:{},fn:e.program(79,a,0),inverse:e.program(81,a,0),data:a,loc:{start:{line:176,column:4},end:{line:180,column:15}}}))?o:"")+"\n"},61:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="'+u(typeof(o=null!=(o=c(n,"url")||(null!=t?c(t,"url"):t))?o:l)==s?o.call(r,{name:"url",hash:{},data:a,loc:{start:{line:136,column:17},end:{line:136,column:24}}}):o)+'" class="jwac '+u(typeof(o=null!=(o=c(n,"articleClasses")||(null!=t?c(t,"articleClasses"):t))?o:l)==s?o.call(r,{name:"articleClasses",hash:{},data:a,loc:{start:{line:136,column:38},end:{line:136,column:56}}}):o)+" "+(null!=(i=e.invokePartial(c(i,"containerClasses"),t,{name:"containerClasses",data:a,helpers:n,partials:i,decorators:e.decorators}))?i:"")+" "+u(typeof(o=null!=(o=c(n,"style")||(null!=t?c(t,"style"):t))?o:l)==s?o.call(r,{name:"style",hash:{},data:a,loc:{start:{line:136,column:80},end:{line:136,column:89}}}):o)+' lnk"\n           '+(null!=(i=c(n,"if").call(r,(c(n,"isArray")||t&&c(t,"isArray")||l).call(r,null!=t?c(t,"navScopeData"):t,{name:"isArray",hash:{},data:a,loc:{start:{line:137,column:17},end:{line:137,column:39}}}),{name:"if",hash:{},fn:e.program(62,a,0),inverse:e.noop,data:a,loc:{start:{line:137,column:11},end:{line:137,column:95}}}))?i:"")+">\n"},62:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'data-nav-scope-data="'+(null!=(a=(o(n,"toJson")||t&&o(t,"toJson")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"navScopeData"):t,{name:"toJson",hash:{},data:a,loc:{start:{line:137,column:62},end:{line:137,column:87}}}))?a:"")+'"'},64:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="'+(null!=(e=e.invokePartial(o(i,"containerClasses"),t,{name:"containerClasses",data:a,helpers:n,partials:i,decorators:e.decorators}))?e:"")+' unavailable">\n'},66:function(e,t,n,i,a){return"hidden"},68:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <img "+(null!=(i=e.invokePartial(o(i,"thumbnailAttributes"),t,{name:"thumbnailAttributes",data:a,helpers:n,partials:i,decorators:e.decorators}))?i:"")+' src="'+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"imageUrl")||(null!=t?o(t,"imageUrl"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"imageUrl",hash:{},data:a,loc:{start:{line:144,column:52},end:{line:144,column:64}}}):o)+'"/>\n'},70:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                <span "+(null!=(e=e.invokePartial(o(i,"thumbnailAttributes"),t,{name:"thumbnailAttributes",data:a,helpers:n,partials:i,decorators:e.decorators}))?e:"")+" ></span>\n"},72:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                "+e.escapeExpression(e.lambda(null!=(e=null!=t?o(t,"publicationToken"):t)?o(e,"year"):e,t))+"\n"},74:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,1,{name:"eq",hash:{},data:a,loc:{start:{line:163,column:22},end:{line:163,column:33}}}),{name:"if",hash:{},fn:e.program(75,a,0),inverse:e.noop,data:a,loc:{start:{line:163,column:16},end:{line:165,column:23}}}))?o:"")+(null!=(o=s(n,"if").call(r,(s(n,"eq")||t&&s(t,"eq")||l).call(r,null!=t?s(t,"type"):t,2,{name:"eq",hash:{},data:a,loc:{start:{line:166,column:22},end:{line:166,column:33}}}),{name:"if",hash:{},fn:e.program(77,a,0),inverse:e.noop,data:a,loc:{start:{line:166,column:16},end:{line:168,column:23}}}))?o:"")},75:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                    "+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"year")||(null!=t?o(t,"year"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"year",hash:{},data:a,loc:{start:{line:164,column:20},end:{line:164,column:28}}}):o)+"\n"},77:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                    "+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"page")||(null!=t?o(t,"page"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"page",hash:{},data:a,loc:{start:{line:167,column:20},end:{line:167,column:28}}}):o)+"\n"},79:function(e,t,n,i,a){return"        </span>\n"},81:function(e,t,n,i,a){return"        </a>\n"},83:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(e=e.invokePartial(o(i,"cardContainer"),t,{name:"cardContainer",hash:{style:"cardLine1Prominent",line2:null!=t?o(t,"publicationTitle"):t,line1:null!=t?o(t,"title"):t},data:a,indent:"    ",helpers:n,partials:i,decorators:e.decorators}))?e:""},85:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=o(n,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"source"):t,{name:"if",hash:{},fn:e.program(86,a,0),inverse:e.program(88,a,0),data:a,loc:{start:{line:195,column:4},end:{line:203,column:11}}}))?a:""},86:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(e=e.invokePartial(o(i,"cardContainer"),t,{name:"cardContainer",hash:{style:"cardLine2Prominent",line2:null!=t?o(t,"title"):t,line1:null!=t?o(t,"source"):t},data:a,indent:"        ",helpers:n,partials:i,decorators:e.decorators}))?e:""},88:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(e=e.invokePartial(o(i,"cardContainer"),t,{name:"cardContainer",hash:{line1:null!=t?o(t,"title"):t},data:a,indent:"        ",helpers:n,partials:i,decorators:e.decorators}))?e:""},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a,o,r){var l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n\n\n\n"+(null!=(a=s(n,"if").call(l,(s(n,"and")||t&&s(t,"and")||e.hooks.helperMissing).call(l,null!=t?s(t,"title"):t,null!=t?s(t,"publicationTitle"):t,{name:"and",hash:{},data:a,loc:{start:{line:184,column:6},end:{line:184,column:34}}}),{name:"if",hash:{},fn:e.program(83,a,0,o,r),inverse:e.program(85,a,0,o,r),data:a,loc:{start:{line:184,column:0},end:{line:204,column:7}}}))?a:"")+"\n"},main_d:function(e,t,n,i,a,o,r){var l=n.decorators,s=n.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e=s(l,"inline")(e,t,n,{name:"inline",hash:{},fn:n.program(1,a,0,o,r),inverse:n.noop,args:["thumbnailAttributes"],data:a,loc:{start:{line:2,column:0},end:{line:85,column:11}}})||e,e=s(l,"inline")(e,t,n,{name:"inline",hash:{},fn:n.program(42,a,0,o,r),inverse:n.noop,args:["line1Classes"],data:a,loc:{start:{line:87,column:0},end:{line:106,column:11}}})||e,e=s(l,"inline")(e,t,n,{name:"inline",hash:{},fn:n.program(53,a,0,o,r),inverse:n.noop,args:["line2Classes"],data:a,loc:{start:{line:107,column:0},end:{line:117,column:11}}})||e,e=s(l,"inline")(e,t,n,{name:"inline",hash:{},fn:n.program(57,a,0,o,r),inverse:n.noop,args:["containerClasses"],data:a,loc:{start:{line:119,column:0},end:{line:132,column:11}}})||e,e=s(l,"inline")(e,t,n,{name:"inline",hash:{},fn:n.program(60,a,0,o,r),inverse:n.noop,args:["cardContainer"],data:a,loc:{start:{line:134,column:0},end:{line:182,column:11}}})||e},useDecorators:!0,usePartial:!0,useData:!0,useDepths:!0}),this.Handlebars.templates.LibraryInfo=Handlebars.template({1:function(e,t,n,i,a,o,r){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t<li role="row" data-lang-name="'+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"englishName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:32},end:{line:2,column:55}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"asciiEnglishName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:56},end:{line:2,column:84}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"vernacularName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:85},end:{line:2,column:111}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"asciiVernacularName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:112},end:{line:2,column:143}}}))+'">\n'+(null!=(a=c(n,"each").call(l,null!=t?c(t,"libs"):t,{name:"each",hash:{},fn:e.program(2,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:3,column:2},end:{line:36,column:11}}}))?a:"")+"\t</li>\n"},2:function(e,t,n,i,a,o,r){var l,s,u=e.lambda,c=e.escapeExpression,d=null!=t?t:e.nullContext||{},p=e.hooks.helperMissing,g="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<a href="'+c(u(null!=r[1]?m(r[1],"appRoot"):r[1],t))+c(u(null!=r[1]?m(r[1],"locale"):r[1],t))+"/wol/pref/"+c(typeof(s=null!=(s=m(n,"researchConfigurationID")||(null!=t?m(t,"researchConfigurationID"):t))?s:p)==g?s.call(d,{name:"researchConfigurationID",hash:{},data:a,loc:{start:{line:4,column:49},end:{line:4,column:76}}}):s)+"/"+c(typeof(s=null!=(s=m(n,"symbol")||(null!=t?m(t,"symbol"):t))?s:p)==g?s.call(d,{name:"symbol",hash:{},data:a,loc:{start:{line:4,column:77},end:{line:4,column:87}}}):s)+"?newrsconf="+c(typeof(s=null!=(s=m(n,"researchConfigurationID")||(null!=t?m(t,"researchConfigurationID"):t))?s:p)==g?s.call(d,{name:"researchConfigurationID",hash:{},data:a,loc:{start:{line:4,column:98},end:{line:4,column:125}}}):s)+"&newlib="+c(typeof(s=null!=(s=m(n,"symbol")||(null!=t?m(t,"symbol"):t))?s:p)==g?s.call(d,{name:"symbol",hash:{},data:a,loc:{start:{line:4,column:133},end:{line:4,column:143}}}):s)+"&url="+c((m(n,"getUrl")||t&&m(t,"getUrl")||p).call(d,null!=r[1]?m(r[1],"locale"):r[1],null!=t?m(t,"researchConfigurationID"):t,null!=t?m(t,"symbol"):t,{name:"getUrl",hash:{},data:a,loc:{start:{line:4,column:148},end:{line:4,column:199}}}))+'"\n\t\t\t\tstyle="border-left: 8px solid '+(null!=(l=m(n,"if").call(d,null!=t?m(t,"libraryColor"):t,{name:"if",hash:{},fn:e.program(3,a,0,o,r),inverse:e.program(5,a,0,o,r),data:a,loc:{start:{line:5,column:34},end:{line:5,column:96}}}))?l:"")+'"\n                data-rsconf="'+c(typeof(s=null!=(s=m(n,"researchConfigurationID")||(null!=t?m(t,"researchConfigurationID"):t))?s:p)==g?s.call(d,{name:"researchConfigurationID",hash:{},data:a,loc:{start:{line:6,column:29},end:{line:6,column:56}}}):s)+'" data-lib="'+c(typeof(s=null!=(s=m(n,"symbol")||(null!=t?m(t,"symbol"):t))?s:p)==g?s.call(d,{name:"symbol",hash:{},data:a,loc:{start:{line:6,column:68},end:{line:6,column:78}}}):s)+'" data-locale="'+c(u(null!=r[1]?m(r[1],"locale"):r[1],t))+'"\n                data-lang="'+c(u(null!=r[1]?m(r[1],"vernacularName"):r[1],t))+'" data-meps-symbol="'+c(u(null!=r[1]?m(r[1],"mepsSymbol"):r[1],t))+'" data-meps-script="'+c(u(null!=r[1]?m(r[1],"mepsScript"):r[1],t))+'"\n                data-dir="'+c(u(null!=r[1]?m(r[1],"direction"):r[1],t))+'" data-library-type="'+c(u(null!=(l=null!=t?m(t,"libraryBlessInfo"):t)?m(l,"libraryType"):l,t))+'" tabindex="-1"\n                data-rb="'+(null!=(l=m(n,"if").call(d,null!=t?m(t,"hasRuby"):t,{name:"if",hash:{},fn:e.program(7,a,0,o,r),inverse:e.program(9,a,0,o,r),data:a,loc:{start:{line:9,column:25},end:{line:9,column:60}}}))?l:"")+'"\n                data-title="'+c(typeof(s=null!=(s=m(n,"title")||(null!=t?m(t,"title"):t))?s:p)==g?s.call(d,{name:"title",hash:{},data:a,loc:{start:{line:10,column:28},end:{line:10,column:37}}}):s)+'"\n                data-privileged="'+(null!=(l=m(n,"if").call(d,null!=t?m(t,"isPrivileged"):t,{name:"if",hash:{},fn:e.program(11,a,0,o,r),inverse:e.program(13,a,0,o,r),data:a,loc:{start:{line:11,column:33},end:{line:11,column:77}}}))?l:"")+'"\n            >\n\t\t\t\t<ul>\n\t\t\t\t\t<li class="language">\n'+(null!=(l=m(n,"if").call(d,null!=r[1]?m(r[1],"uiBlessInfo"):r[1],{name:"if",hash:{},fn:e.program(15,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:15,column:24},end:{line:17,column:31}}}))?l:"")+'                        <span class="ms-ROMAN ml-E" dir="ltr" data-lang="E" lang="en">\n                            <span>'+(null!=(l=u(null!=r[1]?m(r[1],"englishName"):r[1],t))?l:"")+'</span>\n                        </span>\n\t\t\t\t\t\t<span class="ms-ROMAN">&nbsp;-&nbsp;</span>\n                            <span data-class="'+c(u(null!=r[1]?m(r[1],"libLangClasses"):r[1],t))+'" '+(null!=(l=u(null!=r[1]?m(r[1],"libLangAttributes"):r[1],t))?l:"")+">\n                                <span>"+(null!=(l=u(null!=r[1]?m(r[1],"vernacularName"):r[1],t))?l:"")+'</span>\n                            </span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="library" dir="'+c(u(null!=r[1]?m(r[1],"direction"):r[1],t))+'">\n\t\t\t\t\t\t<span class="statusIndicator blessStatus '+c(u(null!=(l=null!=t?m(t,"libraryBlessInfo"):t)?m(l,"cssClass"):l,t))+'"></span>\n                        <span data-class="'+c(u(null!=r[1]?m(r[1],"libLangClasses"):r[1],t))+'" '+(null!=(l=u(null!=r[1]?m(r[1],"libLangAttributes"):r[1],t))?l:"")+">"+(null!=(l=typeof(s=null!=(s=m(n,"title")||(null!=t?m(t,"title"):t))?s:p)==g?s.call(d,{name:"title",hash:{},data:a,loc:{start:{line:28,column:92},end:{line:28,column:103}}}):s)?l:"")+'</span>\n\t\t\t\t\t</li>\n                    <li class="libraryBadges">\n                        '+(null!=(l=m(n,"if").call(d,null!=r[1]?m(r[1],"isSignLanguage"):r[1],{name:"if",hash:{},fn:e.program(17,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:31,column:24},end:{line:31,column:124}}}))?l:"")+"\n                        "+(null!=(l=m(n,"if").call(d,null!=t?m(t,"hasRuby"):t,{name:"if",hash:{},fn:e.program(19,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:32,column:24},end:{line:32,column:143}}}))?l:"")+"\n                    </li>\n\t\t\t\t</ul>\n\t\t\t</a>\n"},3:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression("function"==typeof(o=null!=(o=o(n,"libraryColor")||(null!=t?o(t,"libraryColor"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"libraryColor",hash:{},data:a,loc:{start:{line:5,column:54},end:{line:5,column:70}}}):o)},5:function(e,t,n,i,a){return"transparent"},7:function(e,t,n,i,a){return"yes"},9:function(e,t,n,i,a){return"no"},11:function(e,t,n,i,a){return"true"},13:function(e,t,n,i,a){return"false"},15:function(e,t,n,i,a,o,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t\t\t    <span class="statusIndicator blessStatus '+e.escapeExpression(e.lambda(null!=(r=null!=r[1]?l(r[1],"uiBlessInfo"):r[1])?l(r,"blessStatus"):r,t))+'"></span>\n'},17:function(e,t,n,i,a){return'<span class="signLanguageLibrary"><span class="icon" ></span></span>'},19:function(e,t,n,i,a,o,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="rubyLibrary" data-meps-symbol="'+e.escapeExpression(e.lambda(null!=r[1]?l(r[1],"mepsSymbol"):r[1],t))+'"><span class="icon" ></span></span>'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a,o,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"items"):t,{name:"each",hash:{},fn:e.program(1,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:38,column:9}}}))?a:""},useData:!0,useDepths:!0}),this.Handlebars.templates.LibraryName=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="library '+u(typeof(o=null!=(o=c(n,"localizationCssClasses")||(null!=t?c(t,"localizationCssClasses"):t))?o:l)==s?o.call(r,{name:"localizationCssClasses",hash:{},data:a,loc:{start:{line:1,column:18},end:{line:1,column:44}}}):o)+'" '+(null!=(e=typeof(o=null!=(o=c(n,"localizationHtmlAttributes")||(null!=t?c(t,"localizationHtmlAttributes"):t))?o:l)==s?o.call(r,{name:"localizationHtmlAttributes",hash:{},data:a,loc:{start:{line:1,column:46},end:{line:1,column:78}}}):o)?e:"")+' href="/'+u(typeof(o=null!=(o=c(n,"locale")||(null!=t?c(t,"locale"):t))?o:l)==s?o.call(r,{name:"locale",hash:{},data:a,loc:{start:{line:1,column:86},end:{line:1,column:96}}}):o)+"/wol/"+u(typeof(o=null!=(o=c(n,"route")||(null!=t?c(t,"route"):t))?o:l)==s?o.call(r,{name:"route",hash:{},data:a,loc:{start:{line:1,column:101},end:{line:1,column:110}}}):o)+"/"+u(typeof(o=null!=(o=c(n,"rsconf")||(null!=t?c(t,"rsconf"):t))?o:l)==s?o.call(r,{name:"rsconf",hash:{},data:a,loc:{start:{line:1,column:111},end:{line:1,column:121}}}):o)+"/"+u(typeof(o=null!=(o=c(n,"lib")||(null!=t?c(t,"lib"):t))?o:l)==s?o.call(r,{name:"lib",hash:{},data:a,loc:{start:{line:1,column:122},end:{line:1,column:129}}}):o)+u(typeof(o=null!=(o=c(n,"queryString")||(null!=t?c(t,"queryString"):t))?o:l)==s?o.call(r,{name:"queryString",hash:{},data:a,loc:{start:{line:1,column:129},end:{line:1,column:144}}}):o)+'">'+(null!=(e=typeof(o=null!=(o=c(n,"libraryName")||(null!=t?c(t,"libraryName"):t))?o:l)==s?o.call(r,{name:"libraryName",hash:{},data:a,loc:{start:{line:1,column:146},end:{line:1,column:163}}}):o)?e:"")+"</a>\n"},useData:!0}),this.Handlebars.templates.SynchronizeSelection=Handlebars.template({1:function(e,t,n,i,a,o,r){var l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t<li role="row" data-lang-name="'+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"englishName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:32},end:{line:2,column:55}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"asciiEnglishName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:56},end:{line:2,column:84}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"vernacularName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:85},end:{line:2,column:111}}}))+" "+u((c(n,"toLower")||t&&c(t,"toLower")||s).call(l,null!=t?c(t,"asciiVernacularName"):t,{name:"toLower",hash:{},data:a,loc:{start:{line:2,column:112},end:{line:2,column:143}}}))+'">\n'+(null!=(a=c(n,"each").call(l,null!=t?c(t,"libs"):t,{name:"each",hash:{},fn:e.program(2,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:3,column:2},end:{line:30,column:11}}}))?a:"")+"\t</li>\n"},2:function(e,t,n,i,a,o,r){var l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(n,"if").call(l,(s(n,"isNotCurrentRsconfLib")||t&&s(t,"isNotCurrentRsconfLib")||e.hooks.helperMissing).call(l,null!=t?s(t,"researchConfigurationID"):t,null!=t?s(t,"symbol"):t,{name:"isNotCurrentRsconfLib",hash:{},data:a,loc:{start:{line:4,column:9},end:{line:4,column:63}}}),{name:"if",hash:{},fn:e.program(3,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:4,column:3},end:{line:29,column:10}}}))?a:""},3:function(e,t,n,i,a,o,r){var l,s,u=e.lambda,c=e.escapeExpression,d=null!=t?t:e.nullContext||{},p=e.hooks.helperMissing,g="function",m=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<a href="'+c(u(null!=r[1]?m(r[1],"appRoot"):r[1],t))+c(typeof(s=null!=(s=m(n,"getLocale")||(null!=t?m(t,"getLocale"):t))?s:p)==g?s.call(d,{name:"getLocale",hash:{},data:a,loc:{start:{line:5,column:27},end:{line:5,column:40}}}):s)+"/wol/sysl/"+c(typeof(s=null!=(s=m(n,"getRsconf")||(null!=t?m(t,"getRsconf"):t))?s:p)==g?s.call(d,{name:"getRsconf",hash:{},data:a,loc:{start:{line:5,column:50},end:{line:5,column:63}}}):s)+"/"+c(typeof(s=null!=(s=m(n,"getLib")||(null!=t?m(t,"getLib"):t))?s:p)==g?s.call(d,{name:"getLib",hash:{},data:a,loc:{start:{line:5,column:64},end:{line:5,column:74}}}):s)+"?syncrsconf="+c(typeof(s=null!=(s=m(n,"researchConfigurationID")||(null!=t?m(t,"researchConfigurationID"):t))?s:p)==g?s.call(d,{name:"researchConfigurationID",hash:{},data:a,loc:{start:{line:5,column:86},end:{line:5,column:113}}}):s)+"&synclib="+c(typeof(s=null!=(s=m(n,"symbol")||(null!=t?m(t,"symbol"):t))?s:p)==g?s.call(d,{name:"symbol",hash:{},data:a,loc:{start:{line:5,column:122},end:{line:5,column:132}}}):s)+"&url="+c((m(n,"getUrl")||t&&m(t,"getUrl")||p).call(d,null,null!=t?m(t,"researchConfigurationID"):t,null!=t?m(t,"symbol"):t,{name:"getUrl",hash:{},data:a,loc:{start:{line:5,column:137},end:{line:5,column:183}}}))+'"\n                    data-rsconf="'+c(typeof(s=null!=(s=m(n,"researchConfigurationID")||(null!=t?m(t,"researchConfigurationID"):t))?s:p)==g?s.call(d,{name:"researchConfigurationID",hash:{},data:a,loc:{start:{line:6,column:33},end:{line:6,column:60}}}):s)+'" data-lib="'+c(typeof(s=null!=(s=m(n,"symbol")||(null!=t?m(t,"symbol"):t))?s:p)==g?s.call(d,{name:"symbol",hash:{},data:a,loc:{start:{line:6,column:72},end:{line:6,column:82}}}):s)+'" data-locale="'+c(u(null!=r[1]?m(r[1],"locale"):r[1],t))+'" data-lang="'+c(u(null!=r[1]?m(r[1],"vernacularName"):r[1],t))+'"\n                    data-meps-symbol="'+c(u(null!=r[1]?m(r[1],"mepsSymbol"):r[1],t))+'" data-meps-script="'+c(u(null!=r[1]?m(r[1],"mepsScript"):r[1],t))+'" data-dir="'+c(u(null!=r[1]?m(r[1],"direction"):r[1],t))+'"\n                    data-rb="'+(null!=(l=m(n,"if").call(d,null!=t?m(t,"hasRuby"):t,{name:"if",hash:{},fn:e.program(4,a,0,o,r),inverse:e.program(6,a,0,o,r),data:a,loc:{start:{line:8,column:29},end:{line:8,column:64}}}))?l:"")+'"\n                >\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li class="language">\n                            <span class="ms-ROMAN ml-E" dir="ltr" data-lang="E" lang="en">\n                                <span>'+(null!=(l=u(null!=r[1]?m(r[1],"englishName"):r[1],t))?l:"")+'</span>\n                            </span>\n                            <span class="ms-ROMAN">&nbsp;-&nbsp;</span>\n                            <span data-class="'+c(u(null!=r[1]?m(r[1],"libLangClasses"):r[1],t))+'" '+(null!=(l=u(null!=r[1]?m(r[1],"libLangAttributes"):r[1],t))?l:"")+">\n                                <span>"+(null!=(l=u(null!=r[1]?m(r[1],"vernacularName"):r[1],t))?l:"")+'</span>\n                            </span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="library" dir="'+c(u(null!=r[1]?m(r[1],"direction"):r[1],t))+'">\n\t\t\t\t\t\t\t<span data-class="'+c(u(null!=r[1]?m(r[1],"libLangClasses"):r[1],t))+'" '+(null!=(l=u(null!=r[1]?m(r[1],"libLangAttributes"):r[1],t))?l:"")+">"+(null!=(l=typeof(s=null!=(s=m(n,"title")||(null!=t?m(t,"title"):t))?s:p)==g?s.call(d,{name:"title",hash:{},data:a,loc:{start:{line:21,column:75},end:{line:21,column:86}}}):s)?l:"")+'</span>\n\t\t\t\t\t\t</li>\n                        <li class="libraryBadges">\n                            '+(null!=(l=m(n,"if").call(d,null!=r[1]?m(r[1],"isSignLanguage"):r[1],{name:"if",hash:{},fn:e.program(8,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:24,column:28},end:{line:24,column:128}}}))?l:"")+"\n                            "+(null!=(l=m(n,"if").call(d,null!=t?m(t,"hasRuby"):t,{name:"if",hash:{},fn:e.program(10,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:25,column:28},end:{line:25,column:147}}}))?l:"")+"\n                        </li>\n\t\t\t\t\t</ul>\n\t\t\t\t</a>\n"},4:function(e,t,n,i,a){return"yes"},6:function(e,t,n,i,a){return"no"},8:function(e,t,n,i,a){return'<span class="signLanguageLibrary"><span class="icon" ></span></span>'},10:function(e,t,n,i,a,o,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="rubyLibrary" data-meps-symbol="'+e.escapeExpression(e.lambda(null!=r[1]?l(r[1],"mepsSymbol"):r[1],t))+'"><span class="icon" ></span></span>'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a,o,r){var l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(n,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"items"):t,{name:"each",hash:{},fn:e.program(1,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:32,column:9}}}))?a:""},useData:!0,useDepths:!0}),this.Handlebars.templates.Tooltip=Handlebars.template({1:function(e,t,n,i,a,o,r){var l,s,u=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li class="tooltipListItem linkCard">\n'+(null!=(l=d(n,"if").call(u,(d(n,"ne")||t&&d(t,"ne")||c).call(u,(d(n,"getValueByPath")||t&&d(t,"getValueByPath")||c).call(u,"items",(d(n,"add")||t&&d(t,"add")||c).call(u,a&&d(a,"index"),-1,{name:"add",hash:{},data:a,blockParams:o,loc:{start:{line:13,column:50},end:{line:13,column:65}}}),"source",{name:"getValueByPath",hash:{},data:a,blockParams:o,loc:{start:{line:13,column:26},end:{line:13,column:75}}}),null!=t?d(t,"source"):t,{name:"ne",hash:{},data:a,blockParams:o,loc:{start:{line:13,column:22},end:{line:13,column:83}}}),{name:"if",hash:{},fn:e.program(2,a,0,o,r),inverse:e.program(4,a,0,o,r),data:a,blockParams:o,loc:{start:{line:13,column:16},end:{line:17,column:23}}}))?l:"")+'                <div class="scalableui">\n'+(null!=(l=d(n,"if").call(u,null!=t?d(t,"substitutes"):t,{name:"if",hash:{},fn:e.program(6,a,0,o,r),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:19,column:20},end:{line:31,column:27}}}))?l:"")+'                    <div class="tooltipContent">\n                        <div class="'+e.escapeExpression("function"==typeof(s=null!=(s=d(n,"articleClasses")||(null!=t?d(t,"articleClasses"):t))?s:c)?s.call(u,{name:"articleClasses",hash:{},data:a,blockParams:o,loc:{start:{line:33,column:36},end:{line:33,column:54}}}):s)+'">\n'+(null!=(l=d(n,"if").call(u,(d(n,"or")||t&&d(t,"or")||c).call(u,null!=t?d(t,"mediaHtml"):t,(d(n,"or")||t&&d(t,"or")||c).call(u,null!=t?d(t,"content"):t,null!=t?d(t,"studyContent"):t,{name:"or",hash:{},data:a,blockParams:o,loc:{start:{line:34,column:48},end:{line:34,column:73}}}),{name:"or",hash:{},data:a,blockParams:o,loc:{start:{line:34,column:34},end:{line:34,column:74}}}),{name:"if",hash:{},fn:e.program(9,a,0,o,r),inverse:e.program(17,a,0,o,r),data:a,blockParams:o,loc:{start:{line:34,column:28},end:{line:60,column:35}}}))?l:"")+"                        </div>\n                    </div>\n\n"+(null!=(l=d(n,"if").call(u,(d(n,"isArray")||t&&d(t,"isArray")||c).call(u,null!=t?d(t,"multimediaItems"):t,{name:"isArray",hash:{},data:a,blockParams:o,loc:{start:{line:64,column:26},end:{line:64,column:51}}}),{name:"if",hash:{},fn:e.program(22,a,0,o,r),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:64,column:20},end:{line:91,column:27}}}))?l:"")+"                </div>\n            </li>\n"},2:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(e=e.invokePartial(o(i,"CardHeader"),t,{name:"CardHeader",data:a,indent:"                    ",helpers:n,partials:i,decorators:e.decorators}))?e:""},4:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(e=e.invokePartial(o(i,"CardHeader"),t,{name:"CardHeader",hash:{continuedCard:!0},data:a,indent:"                    ",helpers:n,partials:i,decorators:e.decorators}))?e:""},6:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                        <div class="alternatePresentation clickable">\n'+(null!=(a=o(n,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"substitutes"):t,{name:"each",hash:{},fn:e.program(7,a,2),inverse:e.noop,data:a,loc:{start:{line:21,column:28},end:{line:29,column:37}}}))?a:"")+"                        </div>\n"},7:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.hooks.helperMissing,s="function",u=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                <div class="option clearfix">\n                                    <span class="title">'+(null!=(e=typeof(o=null!=(o=c(n,"title")||(null!=t?c(t,"title"):t))?o:l)==s?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:23,column:56},end:{line:23,column:67}}}):o)?e:"")+'</span>\n                                    <img src="'+u(typeof(o=null!=(o=c(n,"thumbnailUrl")||(null!=t?c(t,"thumbnailUrl"):t))?o:l)==s?o.call(r,{name:"thumbnailUrl",hash:{},data:a,loc:{start:{line:24,column:46},end:{line:24,column:62}}}):o)+'" class="lightbox hiddenThumbnail"\n                                         data-alt-src="'+u(typeof(o=null!=(o=c(n,"targetUrl")||(null!=t?c(t,"targetUrl"):t))?o:l)==s?o.call(r,{name:"targetUrl",hash:{},data:a,loc:{start:{line:25,column:55},end:{line:25,column:68}}}):o)+'" data-alt-type="'+u(typeof(o=null!=(o=c(n,"targetType")||(null!=t?c(t,"targetType"):t))?o:l)==s?o.call(r,{name:"targetType",hash:{},data:a,loc:{start:{line:25,column:85},end:{line:25,column:99}}}):o)+'"/>\n                                    <span class="altIcon icon-'+u(typeof(o=null!=(o=c(n,"targetType")||(null!=t?c(t,"targetType"):t))?o:l)==s?o.call(r,{name:"targetType",hash:{},data:a,loc:{start:{line:26,column:62},end:{line:26,column:76}}}):o)+'"><span class="icon"></span></span>\n                                    <span class="spinner"></span>\n                                </div>\n'},9:function(e,t,n,i,a,o){var r,l=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=s(n,"if").call(l,(s(n,"isArray")||t&&s(t,"isArray")||e.hooks.helperMissing).call(l,null!=t?s(t,"mediaHtml"):t,{name:"isArray",hash:{},data:a,blockParams:o,loc:{start:{line:35,column:38},end:{line:35,column:57}}}),{name:"if",hash:{},fn:e.program(10,a,0,o),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:35,column:32},end:{line:39,column:39}}}))?r:"")+(null!=(r=s(n,"if").call(l,null!=t?s(t,"content"):t,{name:"if",hash:{},fn:e.program(13,a,0,o),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:40,column:32},end:{line:44,column:39}}}))?r:"")+(null!=(r=s(n,"if").call(l,null!=t?s(t,"studyContent"):t,{name:"if",hash:{},fn:e.program(15,a,0,o),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:45,column:32},end:{line:49,column:39}}}))?r:"")},10:function(e,t,n,i,a,o){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(n,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"mediaHtml"):t,{name:"each",hash:{},fn:e.program(11,a,2,o),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:36,column:36},end:{line:38,column:45}}}))?o:""},11:function(e,t,n,i,a,o){return"                                        "+(null!=(t=e.lambda(o[0][0],t))?t:"")+"\n"},13:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                    <div class="tooltipText">\n                                        '+(null!=(o="function"==typeof(o=null!=(o=o(n,"content")||(null!=t?o(t,"content"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"content",hash:{},data:a,loc:{start:{line:42,column:40},end:{line:42,column:53}}}):o)?o:"")+"\n                                    </div>\n"},15:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                    <div class="tooltipStudyContent">\n                                        '+(null!=(o="function"==typeof(o=null!=(o=o(n,"studyContent")||(null!=t?o(t,"studyContent"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"studyContent",hash:{},data:a,loc:{start:{line:47,column:40},end:{line:47,column:58}}}):o)?o:"")+"\n                                    </div>\n"},17:function(e,t,n,i,a,o,r){var l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                <p class="contentErrorNotice">\n'+(null!=(l=u(n,"if").call(s,null!=t?u(t,"url"):t,{name:"if",hash:{},fn:e.program(18,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:52,column:36},end:{line:54,column:43}}}))?l:"")+"                                    "+e.escapeExpression(e.lambda(null!=r[1]?u(r[1],"tooltipContentErrorMessage"):r[1],t))+"\n"+(null!=(l=u(n,"if").call(s,null!=t?u(t,"url"):t,{name:"if",hash:{},fn:e.program(20,a,0,o,r),inverse:e.noop,data:a,loc:{start:{line:56,column:36},end:{line:58,column:43}}}))?l:"")+"                                </p>\n"},18:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                    <a href="'+e.escapeExpression("function"==typeof(o=null!=(o=o(n,"url")||(null!=t?o(t,"url"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"url",hash:{},data:a,loc:{start:{line:53,column:45},end:{line:53,column:52}}}):o)+'">\n'},20:function(e,t,n,i,a){return"                                    </a>\n"},22:function(e,t,n,i,a,o){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                        <ul class="mediaItems">\n'+(null!=(o=r(n,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"multimediaItems"):t,{name:"each",hash:{},fn:e.program(23,a,2,o),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:66,column:28},end:{line:89,column:37}}}))?o:"")+"                        </ul>\n"},23:function(e,t,n,i,a,o){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"                                <li>\n"+(null!=(t=r(n,"if").call(null!=t?t:e.nullContext||{},null!=(t=o[0][0])?r(t,"hasVideo"):t,{name:"if",hash:{},fn:e.program(24,a,0,o),inverse:e.program(26,a,0,o),data:a,blockParams:o,loc:{start:{line:68,column:36},end:{line:87,column:43}}}))?t:"")+"                                </li>\n"},24:function(e,t,n,i,a,o){var r=e.lambda,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                        <div class="mediaTile">\n                                            <a href="'+(null!=(e=r(null!=(e=o[1][0])?l(e,"navigateUrl"):e,t))?e:"")+'">\n                                                <div class="link"><span class="title">'+(null!=(e=r(null!=(e=o[1][0])?l(e,"title"):e,t))?e:"")+'</span><span\n                                                        class="icon"></span></div>\n                                            </a>\n                                            <div class="videoContainer" data-json-src="'+(null!=(e=r(null!=(e=o[1][0])?l(e,"videoJson"):e,t))?e:"")+'"\n                                                 data-img-src="'+(null!=(e=r(null!=(e=o[1][0])?l(e,"videoPosterUrl"):e,t))?e:"")+'"></div>\n                                        </div>\n'},26:function(e,t,n,i,a,o){var r=e.lambda,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                                        <a href="'+(null!=(e=r(null!=(e=o[1][0])?l(e,"navigateUrl"):e,t))?e:"")+'">\n                                            <div class="mediaTile">\n                                                <div class="link"><span class="title">'+(null!=(e=r(null!=(e=o[1][0])?l(e,"title"):e,t))?e:"")+'</span><span\n                                                        class="icon"></span></div>\n                                                <img class="responsiveLoadingPlaceholder placeholder-1x1">\n                                                <img src="'+(null!=(e=r(null!=(e=o[1][0])?l(e,"sqsUrl"):e,t))?e:"")+'"\n                                                     class="preview responsiveLoadingImage imageFadeIn">\n                                            </div>\n                                        </a>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a,o,r){var l,s=null!=t?t:e.nullContext||{},u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tooltipHeader">\n    <div class="tooltipType">\n        '+(null!=(l="function"==typeof(l=null!=(l=u(n,"title")||(null!=t?u(t,"title"):t))?l:e.hooks.helperMissing)?l.call(s,{name:"title",hash:{},data:a,blockParams:o,loc:{start:{line:3,column:8},end:{line:3,column:19}}}):l)?l:"")+'\n    </div>\n    <div class="tooltipClose">\n        <div class="closeBtn"><span class="icon"></span></div>\n    </div>\n</div>\n<div class="tooltipListContainer">\n    <ul class="tooltipList">\n'+(null!=(l=u(n,"each").call(s,null!=t?u(t,"items"):t,{name:"each",hash:{},fn:e.program(1,a,2,o,r),inverse:e.noop,data:a,blockParams:o,loc:{start:{line:11,column:8},end:{line:94,column:17}}}))?l:"")+"    </ul>\n</div>"},usePartial:!0,useData:!0,useDepths:!0,useBlockParams:!0}),this.Handlebars.templates.Video=Handlebars.template({1:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div id="v'+(null!=(o=l(n,"each").call(r,null!=t?l(t,"mediaItems"):t,{name:"each",hash:{},fn:e.program(2,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:14},end:{line:4,column:62}}}))?o:"")+'" class="tooltipVideo videoPlayerHolder"\n        data-playlist="[\n'+(null!=(o=l(n,"each").call(r,null!=t?l(t,"mediaItems"):t,{name:"each",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:4},end:{line:16,column:13}}}))?o:"")+'    ]"></div>\n'},2:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o="function"==typeof(o=null!=(o=o(n,"mediaPlayerId")||(null!=t?o(t,"mediaPlayerId"):t))?o:e.hooks.helperMissing)?o.call(null!=t?t:e.nullContext||{},{name:"mediaPlayerId",hash:{},data:a,loc:{start:{line:4,column:34},end:{line:4,column:53}}}):o)?o:""},4:function(e,t,n,i,a){var o,r,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        {\n        &quot;startTime&quot;:"+(null!=(o=typeof(r=null!=(r=d(n,"mediaStartTime")||(null!=t?d(t,"mediaStartTime"):t))?r:s)==u?r.call(l,{name:"mediaStartTime",hash:{},data:a,loc:{start:{line:8,column:30},end:{line:8,column:50}}}):r)?o:"")+",\n        &quot;duration&quot;:"+(null!=(o=typeof(r=null!=(r=d(n,"mediaDuration")||(null!=t?d(t,"mediaDuration"):t))?r:s)==u?r.call(l,{name:"mediaDuration",hash:{},data:a,loc:{start:{line:9,column:29},end:{line:9,column:48}}}):r)?o:"")+",\n        &quot;jsonSrc&quot;:&quot;"+c(typeof(r=null!=(r=d(n,"mediaSrc")||(null!=t?d(t,"mediaSrc"):t))?r:s)==u?r.call(l,{name:"mediaSrc",hash:{},data:a,loc:{start:{line:10,column:34},end:{line:10,column:46}}}):r)+"&quot;,\n        &quot;imgSrc&quot;:&quot;"+c(typeof(r=null!=(r=d(n,"mediaUrl")||(null!=t?d(t,"mediaUrl"):t))?r:s)==u?r.call(l,{name:"mediaUrl",hash:{},data:a,loc:{start:{line:11,column:33},end:{line:11,column:45}}}):r)+"&quot;\n        }\n"+(null!=(o=d(n,"if").call(l,(d(n,"not")||t&&d(t,"not")||s).call(l,a&&d(a,"last"),{name:"not",hash:{},data:a,loc:{start:{line:13,column:14},end:{line:13,column:25}}}),{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:13,column:8},end:{line:15,column:15}}}))?o:"")},5:function(e,t,n,i,a){return"        ,\n"},7:function(e,t,n,i,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <p class="noVideoAvailable">'+(null!=(e=e.lambda(null!=(e=null!=t?o(t,"i18n"):t)?o(e,"multimediaNotAvailableForSelection"):e,t))?e:"")+"</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,i,a){var o,r=null!=t?t:e.nullContext||{},l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="videoErrorNotice hidden">'+(null!=(o=e.lambda(null!=(o=null!=t?l(t,"i18n"):t)?l(o,"multimediaErrorLoadingVideo"):o,t))?o:"")+"</p>\n\n"+(null!=(o=l(n,"if").call(r,(l(n,"isArray")||t&&l(t,"isArray")||e.hooks.helperMissing).call(r,null!=t?l(t,"mediaItems"):t,{name:"isArray",hash:{},data:a,loc:{start:{line:3,column:6},end:{line:3,column:26}}}),{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(7,a,0),data:a,loc:{start:{line:3,column:0},end:{line:20,column:7}}}))?o:"")},useData:!0}),function(i,a){"use strict";function e(){i("#searchRefineForm").trigger("submit")}a.search={setupSearch:function(){var n;"s"===a.getCommand()?(i("#proximitySelector").on("change",function(){i("#searchResultsForm").trigger("submit")}),i("#rankSelector").on("change",function(){i("#searchResultsForm #st").val(wolConstants.QUERY_SEARCH_TRIGGER_ChangeSort),i("#searchResultsForm").trigger("submit")}),i("#menuSearchHitNext").removeClass("hidden").show(),0!==i("#searchRefineForm").length&&i("#searchFilterContainer").find("input[type=checkbox]").on("change",e),Modernizr.sessionstorage&&i("[data-nav-scope-data]").each(function(e,t){var n=(t=i(t)).data("navScopeData");0<t.length&&!0===n.isBibleDocument&&t.closest("a").on("click",function(){return a.web.ajax(n.navScopeDataUrl).done(function(e){sessionStorage.setItem("nav-scope-data",JSON.stringify(e)),a.loadPage(Object.keys(e)[0]||t.closest("a").attr("href"))}),!1})})):"l"===a.getCommand()&&(n=sprintf("&p=%s&r=%s",a.utilities.getSearchProximity(),a.utilities.getSearchRank()),i(".directButton").each(function(e,t){t.href+=n}))},categoryFilterToggleAll:function(e){i("#searchFilterContainer").find("input").each(function(){this.checked=e}),e&&i("#searchRefineForm").trigger("submit")},sanitizeSearchQuery:function(e){return e.replace("‏","")}}}(jQuery,app),function(e,t){"use strict";function n(){e("#bibleChapterViewSwitch").closest(".grid, .list").removeClass("list").addClass("grid"),t.utilities.setCookie("binavview","grid")}function i(){e("#bibleChapterViewSwitch").closest(".grid, .list").removeClass("grid").addClass("list"),t.utilities.setCookie("binavview","list")}function a(){e("#bibleChapterViewSwitch").find(".iconButton").on("click",function(){(e(this).closest(".grid, .list").hasClass("list")?n:i)()}),("list"===t.utilities.getCookie("binavview")?i:n)()}t.biblenav={setupBibleNav:function(){t.utilities.setupAsyncPartialPageLoad({filter:'a:not(.chapterNo a, .chapterOutline a)[href*="/binav/"]',pageContentObject:e(".materialNav").parent(),successCallback:function(){a()}}),a()}}}(jQuery,app),function(a,o){function r(e){var t,n=a("#dailyText");a("#noDailyText").hide(),n.fadeIn("slow"),e&&o.setupTooltip(n),o.documentMenu.positionMenu(),o.getTodayDate()||(t=(t=a("#availableData").val())&&t.split(","),(e=new Date).setDate(e.getDate()-1),n=o.utilities.getDateString(e),a("#footerPrevDay a").attr("href",o.url.makeDailyTextUrl(e)),t&&-1===t.indexOf(n)?(a("#footerPrevDay").addClass("disabled"),a("#footerPrevDay a").removeAttr("href")):(a("#footerPrevDay").removeClass("disabled"),a("#footerPrevDay a").attr("href",o.url.makeDailyTextUrl(e))),(n=new Date).setDate(n.getDate()+1),e=o.utilities.getDateString(n),t&&-1===t.indexOf(e)?(a("#footerNextDay").addClass("disabled"),a("#footerNextDay a").removeAttr("href")):(a("#footerNextDay").removeClass("disabled"),a("#footerNextDay a").attr("href",o.url.makeDailyTextUrl(n))))}o.home={setupDailyText:function(){0<a("#dailyText").length&&function(){var e=new Date,t=function(){var e=o.getTodayDate().split("/");if(3===e.length){var t=e[0],n=parseInt(e[1],10)-1,e=e[2],e=new Date(t,n,e);if(!isNaN(e.getTime()))return e}return!1}();t&&(e=t);var n=o.utilities.getDateString(e)+"T00:00:00.000Z";{var i;a(".tabContent[data-date]").each(function(){if(a(this).data("date")===n)return a(this).addClass("active"),r(!1),!1}),0===a(".tabContent.active").length&&(i=o.url.makeDateDataUrl(new Date,0,!0))&&o.web.getJSON(i).done(function(e){var t=_.find(e.items,function(e){return 4===e.classification});t&&(e='<a href="'+t.url+'">'+t.publicationTitle+"</a>",e=o.transcribeUreLinks(t.content+e),a("#dailyText .articlePositioner").html(a('<div class="tabContent active"/>').append(e)),a("#availableData").val(""),r(!0))})}}()}}}(jQuery,app),function(r,l){function s(t,e){function n(e){t.find("a.selected").removeClass("selected"),e.addClass("selected"),e.scrollIntoView({duration:0,topOffset:r("#regionHeader").height()})}if(13===e){var i=t.find("a.selected:visible");if(i.length?o=i[0]:1===(i=r(".completeList a:visible")).length&&(o=i[0]),o)return l.loadPage(o.href),!1}else{if(27===e){var a=t.find("a.selected").removeClass("selected");return r(".selectionListFilterText").val("").trigger("input"),0===a.length}if(38===e||40===e){var o=t.find("a:visible"),a=o.index(o.filter(".selected"));if(40===e)return-1===a?(n(o.first()),!1):a<o.length-1?(n(o.eq(a+1)),!1):void 0;if(38===e)if(-1===a)n(o.last());else if(0<a)return n(o.eq(a-1)),!1}}}l.libraryInfoList={setupFilterAndMRU:function(e){r("[data-class]").addClass(function(){return r(this).data("class")});for(var t=r(),n=0;n<e.length;n++){var i=r("[data-rsconf="+e[n].rsconf+"][data-lib="+e[n].lib+"]");0<i.length&&(i=i.parent().clone().html(i[0].outerHTML),t=t.add(i[0]))}t=t.wrap('<ul class="librarySelection"/>').parent(),r(".mruList").append(t).removeClass("hidden").show(),r(".selectionListFilter").removeClass("hidden").show();var a=r(".completeList"),o=r(".mruList, .completeList");r(document).on("keydown",function(e){return s(o,e.keyCode)}),r(".selectionListFilterText").on("keydown",function(e){return s(o,e.keyCode)}).on("input",function(){var e,t=r(this).val().toLowerCase();e=r(".mruList"),""===t?e.removeClass("hidden").show():e.hide(),e=t,(t=(t=a).find("> ul")).find("a.selected").removeClass("selected"),""===e?t.find("> li").show():t.find("> li").hide().end().find('> li[role*="row-header"]').show().end().find('> li[data-lang-name*="'+e+'"]').show().end().find("> li").find('> a[data-locale="'+e+'"]').parent().show().end().end().find('> a[data-rsconf="'+e+'"]').parent().show().end().end().find('> a[data-lib="'+e+'"]').parent().show().end().end().find('> a[data-meps-symbol="'+e.toUpperCase()+'"]').parent().show().end().end().find('> a[data-library-type="'+e.toUpperCase()+'"]').parent().show().end().end()}).on("focus",function(){r(this).scrollIntoView({duration:0,topOffset:r("#regionHeader").height()})}).trigger("input").scrollIntoView({duration:0,topOffset:r("#regionHeader").height()}).trigger("focus"),l.iOS&&r(".selectionListFilterText").after(r("<button/>")).end().find("button").css("position","absolute").css("top","-1000px").trigger("focus")},loadList:function(t,n,i){n=r(n),"function"==typeof t&&0!==n.length&&l.web.ajax("/wol/li",{dataType:"json"}).done(function(e){n.html(t(e)),i&&i(e)})}}}(jQuery,app),function(n,i){"use strict";function a(){n("a[data-rsconf][data-lib]").on("click",function(e){e=n(e.target).closest("a"),e.attr("href"),e=e.data();return i.utilities.getCookie("syncrsconf")===e.rsconf&&i.utilities.getCookie("synclib")===e.lib&&(i.utilities.setCookie("syncrsconf",i.utilities.getCookie("rsconf")),i.utilities.setCookie("synclib",i.utilities.getCookie("lib")),i.utilities.setCookie("synclang",i.utilities.getCookie("lang")),i.utilities.setCookie("synclocale",i.utilities.getCookie("locale")),i.utilities.setCookie("synclangsym",i.utilities.getCookie("ckLang")),i.utilities.setCookie("synclangscript",i.utilities.getCookie("script")),i.utilities.setCookie("syncdir",i.utilities.getCookie("dir"))),t(e),!0})}function t(e){i.utilities.setCookie("rsconf",(e=e||{}).rsconf||i.getRsConfigSymbol()),i.utilities.setCookie("lib",e.lib||i.getLibrarySymbol()),i.utilities.setCookie("lang",e.lang||i.getLibraryLanguageName()),i.utilities.setCookie("locale",e.locale||i.getUILanguage()),i.utilities.setCookie("ckLang",e.mepsSymbol||i.getLibraryLanguageSymbol()),i.utilities.setCookie("script",e.mepsScript||i.getLibraryLanguageScript()),i.utilities.setCookie("dir",e.dir||i.getLibraryDir()),i.utilities.setCookie("title",e.title||i.getLibraryTitle()),i.utilities.setCookie("privileged",e.privileged||i.getLibraryIsPrivileged())}i.libraryinfo={setCookiesForLibrary:t,setupLibraryInfo:function(){"li"===i.getCommand()&&(i.auth.isLoggedIn()?i.libraryInfoList.loadList(Handlebars.templates.LibraryInfo,".completeList .librarySelection",function(e){var t=n("#langCountTemplate");0<t.length&&(e=e.items.reduce(function(e,t){return!0===t.isScriptVariant?e:e+1},0),t.html(t.html().replaceToken("TotalLanguages",'<span class="languageCount">'+e+"</span>")).removeClass("hidden"),n("#langCount").hide()),i.libraryInfoList.setupFilterAndMRU(i.getMRULibraries()),a()}):(i.libraryInfoList.setupFilterAndMRU(i.getMRULibraries()),a()))}}}(jQuery,app),function(i,a){"use strict";var t=i("#audioPlayerContainer").find("input"),n=i("#audioContinuousPlayContainer").find("input"),o=i("#rubyContainer").find("input");function r(e){var t=!e&&a.utilities.getCookie("rsconf")||a.getRsConfigSymbol(),e=!e&&a.utilities.getCookie("lib")||a.getLibrarySymbol();a.web.getJSON(sprintf("/wol/libraryname/%s/%s",t,e)).done(function(e){e.locale=a.getUILanguage(),e.rsconf=a.getRsConfigSymbol(),e.lib=a.getLibrarySymbol(),e.route="li",i("#primaryLibrary").html(Handlebars.templates.LibraryName(e))})}function l(t){var e=a.utilities.getCookie("syncrsconf")||a.utilities.getCookie("rsconf")||a.getRsConfigSymbol(),n=a.utilities.getCookie("synclib")||a.utilities.getCookie("lib")||a.getLibrarySymbol();a.web.getJSON(sprintf("/wol/libraryname/%s/%s",e,n)).done(function(e){e.locale=a.getUILanguage(),e.rsconf=a.getRsConfigSymbol(),e.lib=a.getLibrarySymbol(),e.route="sysl",!t&&a.utilities.getCookie("syncrsconf")&&a.utilities.getCookie("synclib")||(e.libraryName="-"),i("#syncLibrary").html(Handlebars.templates.LibraryName(e).replace("{locale}",a.getLibraryLocale()).replace("{rsconf}",a.getRsConfigSymbol()).replace("{library}",a.getLibrarySymbol()))})}a.pref={setupPreferences:function(){var e;"pref"===a.getCommand()&&(i(".requireJavaScript").removeClass("requireJavaScript"),e=i(".requireCookies"),a.cookiesEnabled()?e.removeClass("requireCookies"):i("#preferencesNoCookies").removeClass("hidden"),i("#fontSizeLarger").on("click",function(){return a.fontSizeManager.increment()&&a.utilities.updateFontSize(!1),!1}),i("#fontSizeSmaller").on("click",function(){return a.fontSizeManager.decrement()&&a.utilities.updateFontSize(!1),!1}),i("#resetPreferences").on("click",function(e){e.preventDefault(),a.utilities.removeCookie("locale"),a.utilities.removeCookie("rsconf"),a.utilities.removeCookie("lib"),a.utilities.removeCookie("lang"),a.utilities.removeCookie("ckLang"),a.utilities.removeCookie("synclocale"),a.utilities.removeCookie("syncrsconf"),a.utilities.removeCookie("synclib"),a.utilities.removeCookie("synclang"),a.utilities.removeCookie("audioPlayer"),a.utilities.removeCookie("audioContinuousPlay"),a.utilities.removeCookie("preferredVideoResolution"),a.utilities.removeCookie("prox"),a.utilities.removeCookie("rank"),a.utilities.removeCookie("fontScale"),a.utilities.removeCookie("rb"),r(!0),l(!0),t.prop("checked",t.val()),n.prop("checked",n.val()),i("input[name=videoRes]").val([a.utilities.getVideoResolution()]),i("input[name=p]").val([a.utilities.getSearchProximity()]),i("input[name=r]").val([a.utilities.getSearchRank()]),a.fontSizeManager.reset(),a.utilities.updateFontSize(!1),o.prop("checked",!1)}),i("#savePreferences").on("click",function(e){e.preventDefault(),t.prop("checked")?a.enableFeature("audioPlayer"):a.disableFeature("audioPlayer"),n.prop("checked")?a.enableFeature("audioContinuousPlay"):a.disableFeature("audioContinuousPlay"),a.utilities.setVideoResolution(i("#videoResolutionSelector").find("[name=videoRes]:checked").attr("value")),a.utilities.setCookie("prox",i("#proximitySelector").find("[name=p]:checked").attr("value")),a.utilities.setCookie("rank",i("#rankSelector").find("[name=r]:checked").attr("value")),a.utilities.updateFontSize(!0),o.prop("checked")?a.enableFeature("rb"):a.disableFeature("rb");e=URI().query(!0).url;e?a.net.redirectForRuby(e):a.loadPage(i("#savePreferences").data("homeUrl"))}),r(),l(),t.prop("checked",a.audioPlayerVisible),n.prop("checked",a.utilities.audioContinuousPlayEnabled),i("input[name=videoRes]").val([a.utilities.getVideoResolution()]),i("input[name=p]").val([a.utilities.getSearchProximity()]),i("input[name=r]").val([a.utilities.getSearchRank()]),a.utilities.updateFontSize(!1),o.prop("checked",a.isFeatureEnabled("rb")))},updatePreferencesRedirect:function(){var e=i("#menuToolsPreferences a, #contentFooterPreferences a"),t=new URI(e.attr("href"));t.setQuery("url",window.location.pathname),e.attr("href",t.toString())}}}(jQuery,app),function(e,t){"use strict";t.publicationnav={setupPublicationNav:function(){t.utilities.setupAsyncPartialPageLoad({filter:'[href*="/wol/lv/"], [href*="/wol/publication/"], [href*="/wol/library/"]',pageContentObject:e(".materialNav").parent(),successCallback:function(){t.nwtstg.setupFilter(),t.biblenav.setupBibleNav()}})}}}(jQuery,app),function(n,i){"use strict";function t(){var e=n("[name=glossaryFilter]:checked").data("filter"),t=n("[data-classification]");(e&&0<e.length?t.hide().filter("[data-classification="+e+"]"):t).show(),i.utilities.setCookie("glossaryFilter",e)}i.nwtstg={setupFilter:function(){var e;"nwtstg"===i.getPubSym()&&(e=i.utilities.getCookie("glossaryFilter")||"",e=n("<ul/>").attr("id","glossaryFilter").append(n("<span/>").attr("id","glossaryFilterLabel").text(n("#showGlossaryItemsText").val())).append(n("<li/>").append(n("<label/>").append(n('<input type="radio"/>').attr("name","glossaryFilter").data("filter","").on("change",t).prop("checked",""===e)).append(n("<span/>").text(n("#allGlossaryItemsText").val())))).append(n("<li/>").append(n("<label/>").append(n('<input type="radio"/>').attr("name","glossaryFilter").data("filter","154").on("change",t).prop("checked","154"===e)).append(n("<span/>").text(n("#biblicalTermsText").val())))).append(n("<li/>").append(n("<label/>").append(n('<input type="radio">').attr("name","glossaryFilter").data("filter","155").on("change",t).prop("checked","155"===e)).append(n("<span/>").text(n("#nonBiblicalTermsText").val())))),0===n("#glossaryFilter").length&&n(".pageList").after(e),t())}}}(jQuery,app),function(i){i(".collection_toggle").on("click",function(){i(".collection_container").hide(),("collection-All"===i(this).data("key")?i(".collection_container"):i("#"+i(this).data("key"))).show(),i(".collection_toggle").removeClass("selected"),i(this).addClass("selected")}),i(".font_toggle").on("click",function(){i(".data").attr("class","data "+i(this).data("key")),i(".font_toggle").removeClass("selected"),i(this).addClass("selected"),i("#fontweight").text(i(this).data("key"))}),i("#testFontSelector").on("change",function(){var e=this.files[0],n=new FileReader;n.addEventListener("load",function(){var e=document.getElementById("testFontStyle");for(e?e.parentNode.removeChild(e):(e=document.createElement("style")).setAttribute("id","testFontStyle");e.lastChild;)e.removeChild(e.lastChild);var t='@font-face{font-family:"Test Font";src:url('+n.result+");}";e.type="text/css",e.stylesheet?e.stylesheet.cssText=t:(t=document.createTextNode(t),e.appendChild(t)),i("head").append(e)}),n.readAsDataURL(e)}),i("#fontTestSize").on("change",function(){i("#fontTestText").css("font-size",i(this).val()+"pt")}),i("[name=fontTestDirection]").on("change",function(){i("#fontTestText").css("direction",i(this).val())}),i(".stringsReader").closest("#article").css("max-width","100%")}(jQuery),function(n,a){"use strict";a.synchronizeselection={setupSynchronizeSelection:function(){function e(){var e,t,i;e=a.getLibrarySymbol(),(t=a.getRsConfigSymbol())!==a.utilities.getCookie("syncrsconf")&&e!==a.utilities.getCookie("synclib")&&n("a[data-rsconf="+t+"][data-lib="+e+"]").remove(),a.libraryInfoList.setupFilterAndMRU(a.getMRULibraries()),n("a[data-rsconf][data-lib]").on("click",function(e){var t=n(e.target).closest("a").data(),e=URI().query(!0).url,e=/\/wol\/sy[a-z]{2}\//.test(e)?a.utilities.trySetCookie:a.utilities.setCookie;e("syncrsconf",t.rsconf),e("synclib",t.lib),e("synclang",t.lang),e("synclocale",t.locale),e("synclangsym",t.mepsSymbol),e("synclangscript",t.mepsScript),e("syncdir",t.dir),a.utilities.trySetCookie("rsconf",a.getRsConfigSymbol()),a.utilities.trySetCookie("lib",a.getLibrarySymbol()),a.utilities.trySetCookie("lang",a.getLibraryLanguageName()),a.utilities.trySetCookie("locale",a.getLibraryLocale()),a.utilities.trySetCookie("ckLang",a.getContentLibraryLanguageSymbol()),a.utilities.trySetCookie("dir",a.isContentLibraryRTL()?"rtl":"ltr"),a.utilities.trySetCookie("script",a.getContentLibraryLanguageScript())}),(i=a.isFeatureEnabled("rb"))&&n("a[data-rsconf][data-lib][data-rb=yes]").each(function(){var e=this.getAttribute("href"),t=this.getAttribute("data-lib"),n=a.net.convertSymbolToFromRb(t,i);this.setAttribute("href",e.replace("/"+t+"/","/"+n+"/"))})}"sysl"===a.getCommand()&&(a.auth.isLoggedIn()?a.libraryInfoList.loadList(Handlebars.templates.SynchronizeSelection,".completeList .librarySelection",e):e())}}}(jQuery,app),function(o){"use strict";function r(e,t){var n=e.split("-"),e=2<=n.indexOf("rb");return e&&t||(e&&!t?n.splice(n.lastIndexOf("rb"),1):(e||t)&&!e&&t&&n.splice(2,0,"rb")),n.join("-")}function e(e){var t=!1;e=e?(t=!0,URI(e)):URI();var n=o.isFeatureEnabled("rb")&&o.utilities.rubyAvailable(),i=o.getContentLibrarySymbol(),a=r(i,n);i!==a&&((n=e.path().split("/"))[n.lastIndexOf(i)]=a,e.path(n.join("/")),t=!0),t&&(e=o.url.simplifyHighlightFragment(e.toString()),o.loadPage(e))}o.net={redirectForRuby:e,redirectRubyHome:function(){"h"===o.getCommand()&&o.isFeatureSet("rb")&&e()},convertSymbolToFromRb:r}}((jQuery,app)),function(i,a){"use strict";function n(){var e=i("#banner");e.on("click",".bannerDismissible .icon",o),e.find(".banner").each(function(e,t){var n;t=(n=i(n=t)).find(".bannerDismissible").data("dismissId"),a.isFeatureEnabled(t)?o.call(n):n.removeClass("bannerHidden")}),i("input.enableRuby").prop("checked",a.utilities.showRubyOnForPage()).on("change",function(e){e.target.checked?a.enableFeature("rb"):a.disableFeature("rb"),a.net.redirectForRuby()})}function o(){var e=i(this).parents(".banner").addBack(".banner"),t=e.find(".bannerDismissible");t.data("saveDismiss")&&(t=t.data("dismissId"),a.enableFeature(t)),e.remove()}a.banner={setupBanner:n,oldIeBanner:function(){var e;a.isIEOlderThan11()&&i("#oldIeBanner").val()&&(e="/wol/ls?locale="+a.getUILanguage()+"&type=oldIe",a.web.getJSON(e).done(function(e){var t;e.strings&&(t=Handlebars.templates.Banner,e={message:e.strings.preferencesOldIe,messageClasses:"bannerOldIe",dismissibleBannerId:"oldIe",isDismissible:!0,isPermanentlyDismissible:!0},i("#banner").append(i(t(e))),n())}))}}}(jQuery,app),function(n,i){"use strict";var a=401;function o(e,t){return n.ajax(e,t||{}).fail(function(e){e.status===a&&i.auth.showModalRefreshDialog()})}i.web={ajax:o,cachedScript:function(e,t){return o(e,t=n.extend(t||{},{dataType:"script",cache:!0}))},getJSON:function(e,t){return o(e,t=n.extend(t||{},{dataType:"json"}))},getNoSessionDialogJSON:function(e,t){return n.getJSON(e,t||{})},SESSION_EXPIRED_CODE:a}}(jQuery,app),"object"!=typeof app&&(app={}),function(t){"use strict";t.pendingCommands={setupPendingCommandsHandler:function(){var e;"showModalLoginDialog"===sessionStorage.getItem("pendingCommand")&&(e=t.auth.showModalLoginDialog,sessionStorage.removeItem("pendingCommand"),e())},setPendingCommand:function(e){sessionStorage.setItem("pendingCommand",e)}}}(app),function(l,s){"use strict";function o(){return"yes"===s.utilities.getCookie("hasJwt")}function e(){var e=l("#footerLogin"),t=l("#headerLogin"),n=l("#headerRefresh"),i=l("#headerLogout"),a=l("#userStatus");s.utilities.getCookie("hasUser")||o()?o()?(l(".userName").text(function(){var e=JSON.parse(s.utilities.getCookie("id")||"{}");if(null!=e.name&&s.validator.containsNoTags(e.name))return e.name}()),t.hide(),i.removeClass("hidden").show(),n.removeClass("hidden").show(),e.hide(),function(){var e=s.utilities.getCookie("locale"),t=s.utilities.getCookie("rsconf"),n=s.utilities.getCookie("lib"),i=s.utilities.getCookie("privileged"),a=s.utilities.getCookie("ckLang");{var o,r;null!=e&&null!=t&&null!=n&&"true"===i&&(o=s.getRsConfigSymbol(),r=s.getLibrarySymbol(),i=s.getLibraryLanguageSymbol(),o!==t&&r!==n&&i===a&&(t=URI("").path(sprintf("/%s/wol/h/%s/%s",e,t,n)),s.utilities.getCookie("title")&&(n=l("#returnToLibrary").val(),t=l("<a />").attr("href",t).attr("dir",s.utilities.getCookie("dir")).addClass("meps-symbol-"+s.utilities.getCookie("ckLang")).addClass("ms-"+s.utilities.getCookie("script")).attr("lang",s.utilities.getCookie("locale")).data("lang",s.utilities.getCookie("ckLang")).text(s.utilities.getCookie("title")),t=n.replaceToken(wolConstants.TOKENS_LibraryName,t[0].outerHTML),l("#cookieLibrary").append(t),l(".hasUserStatus").addClass("hasReturnTo"))))}}()):(t.removeClass("hidden").show(),n.hide(),i.hide(),e.hide()):(l(".hasUserStatus").removeClass("hasUserStatus"),a.hide(),t.hide(),n.hide(),i.hide(),e.removeClass("hidden").show())}function n(){s.auth.loginState&&!o()&&s.auth.showModalRefreshDialog(),s.auth.loginState=o()}s.auth={isLoggedIn:o,getUsersEmail:function(){var e=JSON.parse(s.utilities.getCookie("id")||"{}");if(null!=e.email&&s.validator.containsNoTags(e.email))return e.email},getPersistId:function(){var e=JSON.parse(s.utilities.getCookie("id")||"{}");return null!=e.persist&&!!e.persist},togglePersistId:function(e){var t=JSON.parse(s.utilities.getCookie("id")||"{}");t.persist=e||!t.persist,s.utilities.setCookie("id",JSON.stringify(t))},showModalLoginDialog:function(){s.modal.showModal("/wol/loginform",!1,!0)},showModalRefreshDialog:function(){s.modal.showModal("/wol/refresh",!0)},setupAuth:function(){var t;e(),(t=l(".authMenu")).on("click",function(){var e=t.find(".authMenuOptions");parseInt(e.css("left"),10)?e.css("left","auto"):e.css("left","-9999px")}),l("#userStatusLabel").on("click",function(){var e;return o()&&(s.utilities.setCookie("hasUser","yes"),(e=l("#userControls")).hasClass("hidden")?e.removeClass("hidden").show():e.toggle(0,function(){return!1})),!1}),l(window).on("click",function(e){l(e.target).parents(".currentUser").length||l("#userControls").hide()}),l(".userLoginLink").on("click",function(){return s.auth.showModalLoginDialog(),!1}),l(".userRefreshLink").on("click",function(){return s.user.login(!0),!1}),l(".userLogoutLink").on("click",function(){return s.user.logout(),!1}),void 0===s.auth.loginState&&(s.auth.loginState=o(),window.addEventListener("focus",n)),!s.getLibraryIsPrivileged()||null!=s.utilities.getCookie("rsconf")&&null!=s.utilities.getCookie("lib")||s.libraryinfo.setCookiesForLibrary()}}}(jQuery,app),"object"!=typeof app&&(app={}),function(){"use strict";app.user={login:function(e,t){var n="/auth/login";e&&(e=window.location.href.replace(window.location.origin,""),n+="?url="+encodeURIComponent(e)),t&&(n+="&username="+t),window.location=n},logout:function(){window.location="/auth/logout"}}}(),function(o,r){"use strict";var l;function t(){return!!r.getShareBaseUrl()}function n(){var e=s();return(r.iOS||r.iPadOS||r.Android)&&window.navigator&&window.navigator.share?window.navigator.share(e).catch(function(){}):(o("#shareForm img.sharePublicationImage").attr("src",r.getContentThumbnailUrl()),o("#shareForm input.shareLink").val(e.url),o("#shareForm .shareContentTitle").html(e.contentTitle),""!==e.parentTitle?(o("#shareForm .shareContentParentTitle").html(e.parentTitle),o("#shareForm .shareContentParentTitle").show()):o("#shareForm .shareContentParentTitle").hide(),r.modal.showForm(o("#shareForm"),!1,!0)),!1}function s(){var e=r.getContentTitle();u()&&r.url.getVerseRangeFromUrl().startChapter&&l.value&&(e=l.value);var t=r.utilities.stripHtml(e),n=r.getContentParentTitle(),i=r.getContentThumbnailUrl();return{url:function(){var e=r.getShareBaseUrl(),t=0===e.indexOf("https://");t||(e="https://"+window.location.hostname+"/wol/finder"+e);e=new URI(e);u()?(t?function(e){var t=r.url.getVerseRangeFromUrl();{var n,i;t.startChapter&&(n=t.startBook+r.utilities.leftPad(t.startChapter,3),i=0<t.startVerse?t.startVerse:0,n+=r.utilities.leftPad(i,3),t.startChapter===t.endChapter&&t.startVerse===t.endVerse||(i=t.startBook+r.utilities.leftPad(t.endChapter,3),t=0<t.endVerse?t.endVerse:0,n+="-"+i+r.utilities.leftPad(t,3)),e.setQuery(wolConstants.QUERY_Bible,n))}}:function(e){var t=r.url.getVerseRangeFromUrl();t.startChapter&&e.setQuery(wolConstants.QUERY_BibleChapter,t.startChapter);-1!==t.startVerse&&e.setQuery(wolConstants.QUERY_BibleVerse,t.startVerse);t.startChapter!==t.endChapter?(e.setQuery(wolConstants.QUERY_EndBibleChapter,t.endChapter),e.setQuery(wolConstants.QUERY_EndBibleVerse,t.endVerse)):t.startVerse!==t.endVerse&&e.setQuery(wolConstants.QUERY_EndBibleVerse,t.endVerse)})(e):a()?(t?function(e){var t=r.url.getParagraphRangeFromUrl();{var n;t&&(n=t.stPar,t.edPar>t.stPar&&(n=n+"-"+t.edPar),e.setQuery(wolConstants.QUERY_Par,n))}}:function(e){var t=r.url.getParagraphRangeFromUrl();t&&(e.setQuery(wolConstants.QUERY_Paragraph,t.stPar),t.stPar!==t.edPar&&e.setQuery(wolConstants.QUERY_EndParagraph,t.edPar))})(e):r.getShareType()===wolConstants.SHARETYPE_DailyText&&function(e){{var t;r.getTodayDate()||(t=r.utilities.getDateString(new Date),e.setQuery(wolConstants.QUERY_Date,t))}}(e);return e.toString()}(),text:t,title:t,contentTitle:e,thumbnailUrl:i,parentTitle:n}}function u(){return r.getShareType()===wolConstants.SHARETYPE_Bible}function a(){return r.getShareType()===wolConstants.SHARETYPE_Document}r.share={canSharePage:t,getShareCaption:function(e){var t=s(),n=t.contentTitle,i=r.highlightManager.getHighlightedElements(),a=(a=r.utilities.rubyVisible())?function(e){return o(e).html()}:function(e){return o(e).text()};i=(i=o.map(i,a).map(function(e){return e.trim()+"<br>\n"}).join("")).replace(/[+*\u200B]/g,""),a=t.url.replace(/&/g,"&amp;"),i+='<a href="'+a+'">'+a+"</a>",a=l.value,u()?(a=a||n,e(i=(r.isLibraryRTL()?"‏":"")+"("+a+") "+i)):e(i="*** "+((a=a||t.parentTitle)?a+" "+n:n)+" ***<br>\n"+i)},openShareDialog:n,sendEmail:function(){var e=s(),t=encodeURIComponent(e.title),e=encodeURIComponent(e.title+"\r\n\r\n"+e.url);window.location.href="mailto:?subject="+t+"&body="+e},setupShare:function(){var e=o("#shareButton, #shareButtonFooter");e.off("click"),t()?(e.on("click",n),e.removeClass("hidden")):e.addClass("hidden"),l||((l=document.createElement("input")).id="citationTitle",l.type="hidden",l.value="",document.body.appendChild(l))},updateCitationTitle:function(){var t,e,n;l.value="",(u()||a())&&0<r.highlightManager.getHighlightedElements().length&&(t=function(e){l.value=e},e=r.highlightManager.getHighlightedElements(),n=r.utilities.rubyVisible(),(e=r.utilities.getFirstActionableIdInScope(!1,e))&&"v"===e.charAt(0)?r.api.getBibleCitationTitle(n,function(e){t(e)}):r.api.getDocumentCitationTitle(n,function(e){t(e)}))}}}(jQuery,app),function(r){"use strict";r.api={getBibleCitationTitle:function(e,t){var n,i,a,o;(o=r.url.getVerseRangeFromUrl()).startChapter?(n=o,i=e,a=r.getContentRsConfigSymbol(),o=r.getContentLibrarySymbol(),e=r.getPubSym(),o="/wol/api/v1/citation/"+a+"/"+o+"/bible/",o+=[n.startBook,n.startChapter,n.startVerse,n.endBook,n.endChapter,n.endVerse].join("/"),(o=new URI(o)).setQuery("pub",e),i&&o.setQuery("snip",i),r.web.ajax(o.toString()).done(function(e){t(e.citation)}).fail(function(){t("")})):t("")},getDocumentCitationTitle:function(e,t){var n,i,a=r.url.getParagraphRangeFromUrl();n=a,i=e,a="/wol/api/v1/citation/"+r.getContentRsConfigSymbol()+"/"+r.getContentLibrarySymbol()+"/publication/",e=[r.getDID()],n&&e.push(n.stPar,n.edPar),a+=e.join("/"),a=new URI(a),i&&a.setQuery("snip",i),r.web.ajax(a.toString()).done(function(e){t(e.citation)}).fail(function(){t("")})}}}((jQuery,app)),function(i,a){"use strict";function n(){var e=r(),e={endpoint:a.getInsightApiUrl(),system:"wol",contextID:e,contextLanguageID:a.getLibraryLanguageSymbol()};return e.contextParams={pathCommand:a.getCommand(),rsconf:a.getRsConfigSymbol(),lib:a.getLibrarySymbol()},s()&&(e.contextParams.toRsconf=a.getContentRsConfigSymbol(),e.contextParams.toLib=a.getContentLibrarySymbol()),e}function o(e,t){t.query=e.q,void 0!==e.fc&&0<e.fc.length?(t.filter="byType",t.types=e.fc):t.filter="all",t.trigger=function(e){switch(e){case wolConstants.QUERY_SEARCH_TRIGGER_FieldSubmit:return"fieldSubmit";case wolConstants.QUERY_SEARCH_TRIGGER_ButtonSubmit:return"buttonSubmit";case wolConstants.QUERY_SEARCH_TRIGGER_NavWithoutLink:return"navigationWithoutLink";case wolConstants.QUERY_SEARCH_TRIGGER_ChangeFilter:return"changeFilter";case wolConstants.QUERY_SEARCH_TRIGGER_ChangeSort:return"changeSort";case wolConstants.QUERY_SEARCH_TRIGGER_PaginationLink:return"paginationLink";default:return"navigationWithLink"}}(e.st),t.filterSelectedBeforeSearch=!1,t.scope=function(e){switch(e){case"sen":return"sentence";case"doc":return"document";case"par":default:return"paragraph"}}(e.p);var n=e.r;t.sort="occ"===n?"rel":n,t.page=Number(e.pg||1)}function r(){if(a.getBookNumber()&&a.getChapterNumber())return"bc-"+(a.getBookNumber()+a.utilities.leftPad(a.getChapterNumber(),3))+"_"+a.getPubSym();if(a.getDID())return"pa-"+a.getDID();if(a.getIssueDate()&&a.getIssueSymbol())return"pi-"+a.getIssueSymbol()+"_"+a.getIssueDate();if("gallery"===a.getCommand()&&a.getPubSym()){var e="bible:"+a.getPubSym()+":media";return(t=a.getBookNumber())&&(e+=":"+t),e}if(a.utilities.isBibleNav()){var t=a.getBookNumber(),e=a.getPubSym();if(t)return"bb-"+t+"_"+e;if(a.utilities.isDefaultBible())return"wol:biblenav";if(e)return"pub-"+a.getPubSym()}else{if(a.getPubSym())return"pub-"+a.getPubSym();if(a.getTodayWeek())return"dated-material:"+new Date(a.getTodayDate()).toISOString().substring(0,10)+":meetings";if(a.getTodayDate())return"dated-material:"+new Date(a.getTodayDate()).toISOString().substring(0,10)+":daily-text";if("h"===a.getCommand())return"wol:home";if("pref"===a.getCommand())return"wol:settings";if("li"===a.getCommand())return"wol:library-select";if("bibles"===a.getCommand())return"wol:biblesel";if("s"===a.getCommand())return"wol:search"}return null}function l(e){switch(e){case wolConstants.QUERY_SEARCH_TRIGGER_ChangeFilter:case wolConstants.QUERY_SEARCH_TRIGGER_ChangeSort:case wolConstants.QUERY_SEARCH_TRIGGER_PaginationLink:return"refineSearch";default:return"search"}}function s(){switch(a.getCommand()){case"bsync":case"dsync":case"dtsync":case"msync":return 1;default:return}}a.components={setupClientComponents:function(){var t,e;window.ClientComponents&&(e=new(t=window.ClientComponents).ConfigBuilder,a.getInsightApiUrl()&&r()&&(e.setInsightConfigProvider(n),e.enableInsightEvents()),(e=e.getConfiguration()).components.Root=!0,e.components.FlipbookGallery=!0,t.configure(e),t.vendor.$(document).ready(function(){t.initialize(t.vendor.$("body"));var e=t.insight.makeEvent(function(){if(s())return"contentLanguageChange";return"s"!==a.getCommand()?"pageLoad":l(i("#searchTrigger").val())}());e.addParams(function(){var e={};s()&&(e={from:a.getLibraryLanguageSymbol(),to:a.getContentLibraryLanguageSymbol()});{var t,n;a.isSearchResultsPage()&&(n={q:URI().query(!0).q,p:i("#proximitySelector").find("[name=p]").val(),r:i("#rankSelector").find("[name=r]").val(),st:i("#searchTrigger").val(),pg:Number(i("#searchResultsPageNumber").val())},a.isSubsetSelectedSearchCategories()&&(n.fc=a.getSelectedSearchCategories()),o(n,e),e.offset=Number(i("#searchResultsOffset").val()),e.total={value:Number(i("#searchResultsTotal").val()),relation:"eq"},""!==document.referrer&&(t=new URI(document.referrer).query(!0),e.previousSearch={},e.previousSearch.event=l(t.st),n=Number(t.pg||1),e.previousSearch.offset=Number(i("#searchResultsPageSize").val())*Number(n-1),o(t,e.previousSearch)))}return e}()),e.send()}))}}}(jQuery,app),$(function(){"use strict";app.net.redirectRubyHome(),app.banner.setupBanner(),app.banner.oldIeBanner(),app.home.setupDailyText(),app.pref.setupPreferences(),app.libraryinfo.setupLibraryInfo(),app.synchronizeselection.setupSynchronizeSelection(),app.images.placeholders(),app.auth.setupAuth(),app.images.setupImages(),app.utilities.isGalleryNav()&&app.gallery.initGallery(),app.gallery.setupGalleryMediaReload(),app.gallery.setGalleryItemChapterNumberFromUrl(window.location.href),app.gallery.initGalleryItem(!1,!0),app.scrollHandler.activateSubheadingTracking(),$("#audioMultiselect").val()&&$("#regionMain").on("pointerup.selectedtext",function(){var e=app.utilities.getSelectedText();e&&!e.collapsed&&0<e.toString().length?$(document).trigger("textselected"):$(document).trigger("textunselected")}),app.layout.setupSyncLinks(),app.layout.setupNextSearchHitButton(),app.menu.setupMenu(),app.documentMenu.makeDocumentMenu(),app.layout.applyFontSize(),app.studyPane.processStudyUrlFragment(),app.layout.applyStudyPaneCollapse(),app.layout.setupSecondaryNav(),app.layout.displaySyncState(),app.layout.setupScrollHandler(),app.layout.setupResizeHandler(),app.layout.setupKeymapping(),app.layout.setupCSSAnimationHandler(),app.video.setupVideoPlaceHolder(),app.bibleAudioCheck.checkBibleAudio(),app.layout.contentPositionAdjuster(),app.documentMenu.positionMenu(),$(".searchControlContainer input[name=p]").val([app.utilities.getSearchProximity()]),$(".searchControlContainer input[name=r]").val([app.utilities.getSearchRank()]);var e,t=$(".blessPanel #libGeneratedDate");function n(){app.components.setupClientComponents(),app.layout.setupStudyPaneCollapse(),app.layout.setupSecondaryNavToggle(),setTimeout(function(){app.layout.sideBarSizing()},0),app.studyPane.processSelectUrlFragment(),app.images.setupLightboxItems(),$(".alternatePresentation").on("click",this,function(){return app.images.showAltPresentationLightbox(this)}),app.images.hasLightbox()&&$(".article img").not(".noLightbox, .suppressZoom, .gen-flipbook, a > img:not(.lightbox)").on("click",this,function(){return!app.images.callLightbox(this)}).css("cursor","pointer"),app.jumpHighlight.initialJump(),app.share.updateCitationTitle(),app.scrollHandler.addBottomPadding($("#subheadings").find("a").last()),app.pendingCommands.setupPendingCommandsHandler(),app.modal.setupModals(),app.utilities.isSignLanguage()?app.video.setupSharedPlayer():app.media.audioNavigationSetup(),app.media.initMedia(),app.video.setupEmbeddedVideoPlayer($("#article")),$("textarea,#article.document input").prop("disabled",!0)}0<t.length&&(e=t.data("seconds"),24<(Date.now()-1e3*e)/1e3/60/60&&$(".blessPanel .blessStatusApprovalDataWarning").removeClass("hidden")),app.studyPane.init(),app.tabs.wireTabs($(".tabItem")),e=app.isBibleDocument()?"[id^=v]":"[id^=p]",$(".article:not(.contentOnly, .search)").find(e).on("click",function(e){var t;0<$(e.target).closest("a, input, img, label, textarea").length||0<$(e.target).find("input,textarea").length||((t=app.utilities.getSelectedText())&&!t.collapsed&&0<t.toString().length||(e=$(e.currentTarget).data("pid")||e.currentTarget.id,app.highlightManager.enabled&&(app.highlightManager.toggleHighlight(e),app.url.matchUrlToHighlight(),app.share.updateCitationTitle())))}),app.highlightManager.setupHighlightDismiss(),$(window).on("hashchange",function(e){app.jumpHighlight.internalLinkHandler(e),app.url.setFragmentToPropagate()}),$("#article").hasClass("document")?$("#secondaryNavContent").find(".documentNavigation a").on("click",function(e){return app.layout.toggleNavigation(),app.jumpHighlight.hashJump(e),!1}):$("#secondaryNavContent .verseItem, #secondaryNavContent .documentNavigation a").on("click",function(e){var t;return app.layout.toggleNavigation(),app.highlightManager.removeHighlight(!0),app.utilities.isContentLibraryHTML5()?app.highlightManager.highlight($(this).attr("href"),function(){app.jumpHighlight.hashJump(e)}):(t=app.getVerseNumberFromIDAttribute($(this).attr("href")),app.highlightManager.highlightBibleVerseAsync(t,function(){app.jumpHighlight.hashJump(e)})),!1}),document.addEventListener?document.addEventListener("click",function(e){app.lastClickEvent=e},!0):document.attachEvent&&document.attachEvent("onclick",function(e){app.lastClickEvent=e}),$("html, body").on("wheel touchmove",function(){return $("html, body").stop(!0,!1),!0}),$(document).on("texthighlighted",function(e){0===$("#playerplaylist").filter(":visible").length&&(app.contextMenu.drawMenu(e),$(document).one("jumptoend",function(){app.contextMenu.drawMenu(e)}))}),$(document).on("textunhighlighted",function(){app.contextMenu.removeContextMenu(!0,!0)}),app.highlightManager.highlightUrlFragment(),app.url.setFragmentToPropagate(),app.url.disableDisabledNextPrevButtons(),app.isOldIE()||app.utilities.isContentLibraryHTML5()&&$(document).on("texthighlighted textunhighlighted",function(){app.url.matchUrlToHighlight()}),app.gallery.setupCitationsWithMedia(),Handlebars.partials=Handlebars.templates,app.setupTooltip($(".article:not(.bible)")),app.setupTooltip($("#study")),app.layout.setupLibraryColor(),app.search.setupSearch(),app.text.setupText(),app.utilities.externalizeLinks(),app.nwtstg.setupFilter(),app.biblenav.setupBibleNav(),app.publicationnav.setupPublicationNav(),app.share.setupShare(),"complete"===document.readyState?n():$(window).on("load",n)});